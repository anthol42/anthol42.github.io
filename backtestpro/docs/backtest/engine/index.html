<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<link rel="icon" type="image/x-icon" href="/backtestpro/assets/favicon.ico">
<link href='/backtestpro/assets/bootstrap.min.css' rel='stylesheet', type='text/css'>
<link href="/backtestpro/assets/style.css" rel="stylesheet" type="text/css">
<script src="/backtestpro/assets/bootstrap.min.js"></script>
<script>
function navigateToUrl(url) {
// Navigate to the URL
window.location.href = url;
}
</script>
<title>backtest.engine API documentation</title>
<meta name="description" content="This module contains the logic to run the backtest." />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}#lunr-search{width:100%;font-size:1em;padding:6px 9px 5px 9px;border:1px solid silver}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right;margin-top:4em}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){.module-list{min-height:100vh}#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:80px}.content-container{min-height:100vh}#content{width:70%;max-width:100ch;padding:3em 4em;margin-top:20px;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<nav class="navbar navbar-light navbar-expand bg-light fixed-top shadow-sm" id="navbar-main">
<div class="navbar-container" style="padding-left: 20px">
<a class="navbar-brand logo" href="/backtestpro">
<img alt="Logo image" class="logo__image only-light" src="/backtestpro/assets/logo_light.svg">
</a>
<div class="col-lg-9 navbar">
<div class="mr-auto" id="navbar-center">
<div class="navbar-center-item">
<ul class="navbar-nav" id="navbar-main-elements">
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="/backtestpro">
Home
</a>
</li>
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="/backtestpro/get_started.html">
Get Started
</a>
</li>
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="/backtestpro/tutorials">
Tutorials
</a>
</li>
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link active" href="/backtestpro/docs/backtest">
Documentation
</a>
</li>
<li class="nav-item">
<a class="nav-link nav-external" href="/backtestpro/about.html">About</a>
</li>
</ul>
</div>
</div>
<div id="navbar-end">
<div class="navbar-end-item">
<code class="navbar-version">v0.1.0</code>
</div>
<div class="navbar-end-item">
<ul aria-label="Icon Links" class="navbar-nav" id="navbar-icon-links">
<li class="nav-item">
<a class="nav-link" href="https://github.com/anthol42/backtestPro" rel="noopener" target="_blank"
title="GitHub"><img alt="GitHub" class="icon-link" src="/backtestpro/assets/github-mark.svg"
style="height: 1.2em; margin: 0px; padding: 0px;"></a>
</li>
</ul>
</div>
</div>
</div>
</div>
</nav>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>engine</code></h1>
</header>
<div class="content-container">
<section id="section-intro">
<p>This module contains the logic to run the backtest.</p>
</section>
<section>
<h2 class="section-title" id="header-submodules">Sub-modules</h2>
<dl>
<dt><code class="name"><a title="backtest.engine.account" href="account.html">backtest.engine.account</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt><code class="name"><a title="backtest.engine.analyser" href="analyser.html">backtest.engine.analyser</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt><code class="name"><a title="backtest.engine.backtest" href="backtest.html">backtest.engine.backtest</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt><code class="name"><a title="backtest.engine.backtestResult" href="backtestResult.html">backtest.engine.backtestResult</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt><code class="name"><a title="backtest.engine.broker" href="broker.html">backtest.engine.broker</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt><code class="name"><a title="backtest.engine.cashController" href="cashController.html">backtest.engine.cashController</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt><code class="name"><a title="backtest.engine.functional" href="functional.html">backtest.engine.functional</a></code></dt>
<dd>
<div class="desc"><p>This module contains multiple helper function to execute a backtest.</p></div>
</dd>
<dt><code class="name"><a title="backtest.engine.metadata" href="metadata.html">backtest.engine.metadata</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt><code class="name"><a title="backtest.engine.portfolio" href="portfolio.html">backtest.engine.portfolio</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt><code class="name"><a title="backtest.engine.record" href="record.html">backtest.engine.record</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt><code class="name"><a title="backtest.engine.strategy" href="strategy.html">backtest.engine.strategy</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt><code class="name"><a title="backtest.engine.time_resolution_extenders" href="time_resolution_extenders.html">backtest.engine.time_resolution_extenders</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt><code class="name"><a title="backtest.engine.trade" href="trade.html">backtest.engine.trade</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt><code class="name"><a title="backtest.engine.transaction" href="transaction.html">backtest.engine.transaction</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt><code class="name"><a title="backtest.engine.tsData" href="tsData.html">backtest.engine.tsData</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt><code class="name"><a title="backtest.engine.utils" href="utils.html">backtest.engine.utils</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="backtest.engine.account.Account"><code class="flex name class">
<span>class <span class="ident">Account</span></span>
<span>(</span><span>initial_cash: float = 100000, allow_debt: bool = False)</span>
</code></dt>
<dd>
<div class="desc"><p>Object representing the bank account of the strategy.
This object keeps track of the cash available in the account,
the collateral used in the account and the transactions made by the strategy.</p>
<h2 id="attributes">Attributes</h2>
<dl>
<dt><strong><code>available_cash</code></strong></dt>
<dd>The amount of cash available in the account.
This is the amount of cash that can be used to buy securities.</dd>
<dt><strong><code>collateral</code></strong></dt>
<dd>The amount of money that is currently being used as collateral.</dd>
<dt><strong><code>transactions</code></strong></dt>
<dd>The transactions made by the strategy.</dd>
</dl></div>
<h3>Static methods</h3>
<dl>
<dt id="backtest.engine.account.Account.load_state"><code class="name flex">
<span>def <span class="ident">load_state</span></span>(<span>dict_data: dict)</span>
</code></dt>
<dd>
<div class="desc"><p>This method load a Account object from a dictionary.</p>
<h2 id="args">Args:</h2>
<p><strong><code>dict_data</code></strong>: The dictionary to load from
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The Account object</dd>
</dl></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="backtest.engine.account.Account.add_collateral"><code class="name flex">
<span>def <span class="ident">add_collateral</span></span>(<span>self, amount: float, dt: datetime.datetime, message: str = 'Sold short')</span>
</code></dt>
<dd>
<div class="desc"><p>Adds collateral to the account.
This is the amount of money held as collateral and cannot
be used.
This method could be used when selling short a position.</p>
<h2 id="args">Args:</h2>
<p><strong><code>amount</code></strong>: Value of collateral.<br>
<strong><code>dt</code></strong>: datetime of the update<br>
<strong><code>message</code></strong>: Reason of the update.
Can be, for example: "Step update", "Enter short position for {ticker}", etc.
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>None</dd>
</dl>
<h2 id="raises">Raises:</h2>
<p><strong><code>RuntimeError</code></strong>: If the amount of collateral is bigger than the current cash in the account.
</p></div>
</dd>
<dt id="backtest.engine.account.Account.get_cash"><code class="name flex">
<span>def <span class="ident">get_cash</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>The amount of cash available in the account.
This is the amount of cash that can be used to buy securities.
total_cash - collateral = cash</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>available cash</dd>
</dl></div>
</dd>
<dt id="backtest.engine.account.Account.get_state"><code class="name flex">
<span>def <span class="ident">get_state</span></span>(<span>self) ‑> dict</span>
</code></dt>
<dd>
<div class="desc"><p>This method export the account object to a JSONable dictionary.</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The object state as a dictionary</dd>
</dl></div>
</dd>
<dt id="backtest.engine.account.Account.get_total_cash"><code class="name flex">
<span>def <span class="ident">get_total_cash</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>The total amount of cash in the account.
Not deducing collateral.
This include cash that cannot be used to
buy securities.</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>Total cash</dd>
</dl></div>
</dd>
<dt id="backtest.engine.account.Account.get_transactions"><code class="name flex">
<span>def <span class="ident">get_transactions</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Return a deepcopy of the transactions list.</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The transactions list</dd>
</dl></div>
</dd>
<dt id="backtest.engine.account.Account.remove_collateral"><code class="name flex">
<span>def <span class="ident">remove_collateral</span></span>(<span>self, amount: float, dt: datetime.datetime, message: str = 'Bought back short')</span>
</code></dt>
<dd>
<div class="desc"><p>Removes collateral from the account.
This is the amount of money held as collateral and cannot
be used.
This method could be used when buying back a short position.</p>
<h2 id="args">Args:</h2>
<p><strong><code>amount</code></strong>: Value of collateral.<br>
<strong><code>dt</code></strong>: datetime of the update<br>
<strong><code>message</code></strong>: Reason of the update.
Can be, for example: "Step update", "Enter short position for {ticker}", etc.
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>None</dd>
</dl>
<h2 id="raises">Raises:</h2>
<p><strong><code>RuntimeError</code></strong>: If the amount of collateral is bigger than the current cash in the account.
</p></div>
</dd>
<dt id="backtest.engine.account.Account.update_collateral"><code class="name flex">
<span>def <span class="ident">update_collateral</span></span>(<span>self, amount: float, dt: datetime.datetime, message: str = 'Step update')</span>
</code></dt>
<dd>
<div class="desc"><p>Updates the amount of collateral in the account.
This is the amount of money held as collateral and cannot
be used.
This should be updated at each steps because it should be dependent to the current value of the
assets.
Raise a RuntimeError if the amount of collateral is bigger than the current worth of the account.</p>
<h2 id="args">Args:</h2>
<p><strong><code>amount</code></strong>: Value of collateral.<br>
<strong><code>dt</code></strong>: datetime of the update<br>
<strong><code>message</code></strong>: Reason of the update.
Can be, for example: "Step update", "Enter short position for {ticker}", etc.
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>None</dd>
</dl></div>
</dd>
</dl>
</dd>
<dt id="backtest.engine.account.CollateralUpdate"><code class="flex name class">
<span>class <span class="ident">CollateralUpdate</span></span>
<span>(</span><span>amount: float, dt: datetime.datetime, message: str, collateral_update_type: <a title="backtest.engine.account.CollateralUpdateType" href="account.html#backtest.engine.account.CollateralUpdateType">CollateralUpdateType</a>)</span>
</code></dt>
<dd>
<div class="desc"><p>Data class holding info about a collateral update</p>
<h2 id="args">Args:</h2>
<p><strong><code>amount</code></strong>: The amount frozen in the account as collateral (Cannot be used to buy securities)<br>
<strong><code>dt</code></strong>: The datetime of the update.<br>
<strong><code>message</code></strong>: A message explaining the reason of the update.
(Useful for debugging the strategy)<br>
<strong><code>collateral_update_type</code></strong>: The type of update.
Can be ADD, REMOVE or UPDATE
</p></div>
<h3>Static methods</h3>
<dl>
<dt id="backtest.engine.account.CollateralUpdate.load"><code class="name flex">
<span>def <span class="ident">load</span></span>(<span>data: dict)</span>
</code></dt>
<dd>
<div class="desc"><p>This method load a CollateralUpdate object from a dictionary.</p>
<h2 id="args">Args:</h2>
<p><strong><code>data</code></strong>: The dictionary to load from
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The CollateralUpdate object</dd>
</dl></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="backtest.engine.account.CollateralUpdate.export"><code class="name flex">
<span>def <span class="ident">export</span></span>(<span>self) ‑> dict</span>
</code></dt>
<dd>
<div class="desc"><p>This method export the trade order object to a JSONable dictionary.</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The object's state as a dictionary</dd>
</dl></div>
</dd>
</dl>
</dd>
<dt id="backtest.engine.account.CollateralUpdateType"><code class="flex name class">
<span>class <span class="ident">CollateralUpdateType</span></span>
<span>(</span><span>*args, **kwds)</span>
</code></dt>
<dd>
<div class="desc"><p>[Enum] The type of collateral update.
Can be:</p>
<ul>
<li>ADD</li>
<li>REMOVE</li>
<li>UPDATE</li>
</ul></div>
<h3>Parent</h3>
<ul class="hlist">
<li>enum.Enum</li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="backtest.engine.account.CollateralUpdateType.ADD"><code class="name">var <span class="ident">ADD</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtest.engine.account.CollateralUpdateType.REMOVE"><code class="name">var <span class="ident">REMOVE</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtest.engine.account.CollateralUpdateType.UPDATE"><code class="name">var <span class="ident">UPDATE</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
<dt id="backtest.engine.backtest.Backtest"><code class="flex name class">
<span>class <span class="ident">Backtest</span></span>
<span>(</span><span>data: List[Dict[str, <a title="backtest.engine.tsData.TSData" href="tsData.html#backtest.engine.tsData.TSData">TSData</a>]], strategy: <a title="backtest.engine.strategy.Strategy" href="strategy.html#backtest.engine.strategy.Strategy">Strategy</a>, *, metadata: <a title="backtest.engine.metadata.Metadata" href="metadata.html#backtest.engine.metadata.Metadata">Metadata</a> = &lt;backtest.engine.metadata.Metadata object&gt;, market_index: <a title="backtest.engine.tsData.TSData" href="tsData.html#backtest.engine.tsData.TSData">TSData</a> = None, main_timestep: int = 0, initial_cash: float = 100000, commission: float = None, relative_commission: float = None, margin_interest: float = 0, min_initial_margin: float = 50, min_maintenance_margin: float = 25, liquidation_delay: int = 2, min_initial_margin_short: float = 50, min_maintenance_margin_short: float = 25, broker: Type[<a title="backtest.engine.broker.Broker" href="broker.html#backtest.engine.broker.Broker">Broker</a>] = backtest.engine.broker.Broker, account: Type[<a title="backtest.engine.account.Account" href="account.html#backtest.engine.account.Account">Account</a>] = backtest.engine.account.Account, window: int = 50, default_marginable: bool = False, default_shortable: bool = False, risk_free_rate: float = 1.5, default_short_rate: float = 1.5, sell_at_the_end: bool = True, cash_controller: <a title="backtest.engine.cashController.CashControllerBase" href="cashController.html#backtest.engine.cashController.CashControllerBase">CashControllerBase</a> = &lt;backtest.engine.cashController.CashControllerBase object&gt;, verbose=3, time_res_extender: Optional[<a title="backtest.engine.time_resolution_extenders.TimeResExtender" href="time_resolution_extenders.html#backtest.engine.time_resolution_extenders.TimeResExtender">TimeResExtender</a>] = None, indicators: Union[<a title="backtest.indicators.indicatorSet.IndicatorSet" href="../indicators/indicatorSet.html#backtest.indicators.indicatorSet.IndicatorSet">IndicatorSet</a>, List[<a title="backtest.indicators.indicatorSet.IndicatorSet" href="../indicators/indicatorSet.html#backtest.indicators.indicatorSet.IndicatorSet">IndicatorSet</a>], Dict[int, <a title="backtest.indicators.indicatorSet.IndicatorSet" href="../indicators/indicatorSet.html#backtest.indicators.indicatorSet.IndicatorSet">IndicatorSet</a>]] = IndicatorSet(n_indicators=0))</span>
</code></dt>
<dd>
<div class="desc"><h2 id="args">Args:</h2>
<p><strong><code>data</code></strong>: The data on which to run the backtest.
It is a list of dictionaries where each dictionary
represents a group of time series data.
The key is the ticker and the value is the TSData object.
IMPORTANT: The length of each time series (charts) must be the same with the same index.
If
they are not, you need to pad the data with nan.<br>
<strong><code>strategy</code></strong>: The strategy to test<br>
<strong><code>metadata</code></strong>: A metadata object.
This is useful to store information about the backtest to add context.<br>
<strong><code>market_index</code></strong>: The TSData object containing the reference market index.
(Used to compare the strategy
performances to the market)<br>
<strong><code>main_timestep</code></strong>: The index of the timeseries data in data list to use as the main series.
i.e. the
frequency at which the strategy is run.
The other timeseries will be passed to the
strategy as additional data.
For example, if our data is a list of two dictionaries,
the first one containing hourly data and the second one containing daily data, and we
extend the daily data to weekly data, we would set main_timestep to 1.
(The second
dictionary) to run our strategy at each open market days.<br>
<strong><code>initial_cash</code></strong>: The initial cash in bank account<br>
<strong><code>commission</code></strong>: The absolute commission.
In $ per trade<br>
<strong><code>relative_commission</code></strong>: The relative commission.
In % of the trade value.
Example: 5% would be 5<br>
<strong><code>margin_interest</code></strong>: The interest rate on margin.
In % of the margin value.
Example: 5% would be 5<br>
<strong><code>min_initial_margin</code></strong>: The minimum initial margin.
In % of the trade value.
Example: 5% would be 5<br>
<strong><code>min_maintenance_margin</code></strong>: The minimum maintenance margin.
In % of the trade value.
Example: 5% would be 5<br>
<strong><code>liquidation_delay</code></strong>: The delay before liquidating a position in margin call.
In timestep.
Example, if the
delay is 2 and the main time resolution is daily, the position will be liquidated 2 days<br>
<strong><code>min_initial_margin_short</code></strong>: The minimum initial margin for short positions.
In % of the trade value.<br>
<strong><code>min_maintenance_margin_short</code></strong>: The minimum maintenance margin for short positions.
In % of the trade value.<br>
<strong><code>broker</code></strong>: The Broker class to use.
This is useful to use a custom broker.
The broker class must inherit
from the Broker class.<br>
<strong><code>account</code></strong>: The Account class to use.
This is useful to use a custom account.
The account class must inherit
from the Account class.<br>
<strong><code>window</code></strong>: The lookback period for the strategy.
The number of datapoint to pass to the strategy at each
timestep.
(The number of datapoint in the main timestep.
There might be more or less for others)<br>
<strong><code>default_marginable</code></strong>: In case there is no column "Marginable" in the data, this value will be used to know
if the security is marginable.<br>
<strong><code>default_shortable</code></strong>: In case there is no column "Shortable" in the data, this value will be used to know if
the security is shortable.<br>
<strong><code>risk_free_rate</code></strong>: The risk-free rate in %.
Used to calculate performance ratios like the Sharpe ratio.<br>
<strong><code>default_short_rate</code></strong>: The short rate in % in case there is no column 'Short_rate' in the data.<br>
<strong><code>sell_at_the_end</code></strong>: Whether to sell every open position at the end or not.
If True, the strategy will
sell the positions at the end of the backtest.<br>
<strong><code>cash_controller</code></strong>: A cash controller object to control the money flow in and out of the bank account during
the backtest.
This is useful to simulate the effect of, for example, weekly deposit or monthly
withdrawal.<br>
<strong><code>verbose</code></strong>: 0: No print, 1: Only errors, 2: Errors and warnings, 3: All<br>
<strong><code>time_res_extender</code></strong>: A time resolution extender object.
This is useful to add time resolutions to the data<br>
<strong><code>indicators</code></strong>: An Indicator set object.
This is useful to add indicators to the data.
The indicators are
calculated at each timestep and passed to the strategy.
It can also be a list with the same length
as the number of time resolution.
Each element of the list will be an IndicatorSet object to use for
the corresponding time resolution.
If it is a dictionary, the keys will be the index of the time
resolution and the values will be the IndicatorSet object to use for the corresponding time resolution.
If a dictionary is used, make sure there is at least a key for the main time resolution.
If the
streaming parameter is True for one of the IndicatorSet, the streaming will be activated for every
supported indicators.
</p></div>
<h3>Static methods</h3>
<dl>
<dt id="backtest.engine.backtest.Backtest.default_forge_last_candle"><code class="name flex">
<span>def <span class="ident">default_forge_last_candle</span></span>(<span>data: List[Dict[str, <a title="backtest.engine.tsData.TSData" href="tsData.html#backtest.engine.tsData.TSData">TSData</a>]], current_time_res: int, timestep: datetime.datetime, main_timestep: int) ‑> List[Tuple[float, float, float, float, float, float, str]]</span>
</code></dt>
<dd>
<div class="desc"><p>Forge new candle by cropping the last candle for the data with bigger time resolution than the main timestep to avoid
peeking into the future.
(Data leaking)
How this default method works:</p>
<p>For each Tickers:
1. Find the last candle compared to current time step with the current resolution. (Get index and Open)
2. Find the last candle for the ticker with main resolution.
(Get index and Close)
3. Using the main resolution, get the series between the beginning of the candle (Current resolution) and the
current timestep.
(This will be a series of intra-candle data)
This is where it can get tricky because,
depending on your data, the start idx (computed in step 1) might not align with any timesteps of the series
in the main resolution.
In this default method, we will use the next candle the nearest of the desired
start idx of the main resolution data.
(Default behavior of pandas)
4. Get High by computing the max of the maxes of the intra-candle data and the Low by computing the min of the
mins of the intra-candle data.
The volume is obtained by summing the volume
of the intra-candle data.
5. Return the new candle by using computed High Low Open Close and Volume.</p>
<p>DO NOT OVERRIDE THIS METHOD:
If you need to override a candle forging method, override the method 'forge_last_candle' instead.</p>
<h2 id="args">Args:</h2>
<p><strong><code>data</code></strong>: The data<br>
<strong><code>current_time_res</code></strong>: The current time resolution (to forge)<br>
<strong><code>timestep</code></strong>: The current timestep<br>
<strong><code>main_timestep</code></strong>: The main timestep
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>A list of the forged candles: List[Tuple[Open, High, Low, Close, Volume, Stock Split, ticker]]</dd>
</dl></div>
</dd>
<dt id="backtest.engine.backtest.Backtest.run_indicator"><code class="name flex">
<span>def <span class="ident">run_indicator</span></span>(<span>data: pandas.core.frame.DataFrame, previous_data: Optional[pandas.core.frame.DataFrame], indicators: <a title="backtest.indicators.indicatorSet.IndicatorSet" href="../indicators/indicatorSet.html#backtest.indicators.indicatorSet.IndicatorSet">IndicatorSet</a>, streaming: bool, bigger_res: bool = False) ‑> pandas.core.frame.DataFrame</span>
</code></dt>
<dd>
<div class="desc"><p>Run the indicators on a single chart.</p>
<h2 id="args">Args:</h2>
<p><strong><code>data</code></strong>: The chart data OHLCV<br>
<strong><code>previous_data</code></strong>: The previously cached data.
Used when streaming is True.
If streaming is False, this
parameter is ignored.
This should be a dataframe with the same index as the data.
This means that
the indicators points that needs to be calculated should be nan, and one already calculated should be
the previously calculated values.
The columns names should be the output columns names of the
indicators.<br>
<strong><code>indicators</code></strong>: The indicatorSet to use.<br>
<strong><code>streaming</code></strong>: Whether to use the streaming capabilities of the indicators or not.<br>
<strong><code>bigger_res</code></strong>: Whether we are computing the indicator for a bigger time resolution or not.
If True and we
are in streaming mode, the last cache datapoint will be set to nan in order to recompute it.
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The new data</dd>
</dl></div>
</dd>
<dt id="backtest.engine.backtest.Backtest.stadardize_timesteps"><code class="name flex">
<span>def <span class="ident">stadardize_timesteps</span></span>(<span>timesteps_list: List[datetime.datetime]) ‑> List[datetime.datetime]</span>
</code></dt>
<dd>
<div class="desc"><p>Optionnaly reformat timesteps_list.
Can be useful when indexes are variable across stocks</p>
<h2 id="args">Args:</h2>
<p><strong><code>timesteps_list</code></strong>: The list of timesteps
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The reformatted list of timesteps</dd>
</dl></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="backtest.engine.backtest.Backtest.apply_indicators"><code class="name flex">
<span>def <span class="ident">apply_indicators</span></span>(<span>self, data: List[<a title="backtest.engine.record.Record" href="record.html#backtest.engine.record.Record">Record</a>], time_res_idx: int, bigger_res: bool = False) ‑> List[<a title="backtest.engine.record.Record" href="record.html#backtest.engine.record.Record">Record</a>]</span>
</code></dt>
<dd>
<div class="desc"><p>Apply the indicators to the data (All tickers in time res)</p>
<h2 id="args">Args:</h2>
<p><strong><code>data</code></strong>: The list of records to apply the indicators to<br>
<strong><code>time_res_idx</code></strong>: The current time resolution<br>
<strong><code>bigger_res</code></strong>: Whether we are computing the indicator for a bigger time resolution or not.
If True and we
are in streaming mode, the last cache datapoint will be set to nan in order to recompute it.
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The updated data</dd>
</dl></div>
</dd>
<dt id="backtest.engine.backtest.Backtest.forge_last_candle"><code class="name flex">
<span>def <span class="ident">forge_last_candle</span></span>(<span>self, data: List[Dict[str, <a title="backtest.engine.tsData.TSData" href="tsData.html#backtest.engine.tsData.TSData">TSData</a>]], prepared_data: List[List[<a title="backtest.engine.record.Record" href="record.html#backtest.engine.record.Record">Record</a>]], current_time_res: int, timestep: datetime.datetime) ‑> List[Tuple[float, float, float, float, float, float, str]]</span>
</code></dt>
<dd>
<div class="desc"><p>Forge new candle by cropping the last candle for the data with bigger time resolution than the main timestep to avoid
peeking into the future.
(Data leaking)
How this default method works: (Read the warning below if your data contains higher resolution than main res)</p>
<p>For each Tickers:
1. Find the last candle compared to current time step with the current resolution. (Get index and Open)
2. Find the last candle for the ticker with main resolution.
(Get index and Close)
3. Using the main resolution, get the series between the beginning of the candle (Current resolution) and the
current timestep.
(This will be a series of intra-candle data)
This is where it can get tricky because,
depending on your data, the start idx (computed in step 1) might not align with any timesteps of the series
in the main resolution.
In this default method, we will use the next candle the nearest of the desired
start idx of the main resolution data.
(Default behavior of pandas)
4. Get High by computing the max of the maxes of the intra-candle data and the Low by computing the min of the
mins of the intra-candle data.
The volume is obtained by summing the volume
of the intra-candle data.
5. Return the new candle by using computed High Low Open Close and Volume.</p>
<h2 id="important">Important</h2>
<p>If you need this method in your setup, you should override it since it may not work for your setup.
In fact, it is hard to forge new candles for any arbitrary time resolution from discrete timeseries where
timesteps might not correctly align.
You should take this into account when making this method.</p>
<p>TO OVERRIDE THIS METHOD:
Just override it like any other method.
You can also use the default method by calling
'self.default_forge_last_candle' and complement it.
To suppress the warning, you can override this method
by only calling the default 'self.default_forge_last_candle'</p>
<h2 id="args">Args:</h2>
<p><strong><code>data</code></strong>: The data<br>
<strong><code>prepared_data</code></strong>: The already prepared data.<br>
<strong><code>current_time_res</code></strong>: The current time resolution<br>
<strong><code>timestep</code></strong>: The current timestep
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>A list of the forged candles: List[Tuple[Open, High, Low, Close, Volume, Stock Split, ticker]]</dd>
</dl></div>
</dd>
<dt id="backtest.engine.backtest.Backtest.run"><code class="name flex">
<span>def <span class="ident">run</span></span>(<span>self) ‑> <a title="backtest.engine.backtestResult.BackTestResult" href="backtestResult.html#backtest.engine.backtestResult.BackTestResult">BackTestResult</a></span>
</code></dt>
<dd>
<div class="desc"><p>Run the backtest simulation with the given data and strategy.
It will show a progress bar showing the current progress.
It will save the results and all the statistics into a BackTestResult object in the results attribute, or
returned value of this method.</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>BackTestResult object containing all the results, statistics, debug info, etc.</dd>
</dl></div>
</dd>
</dl>
</dd>
<dt id="backtest.engine.backtestResult.BackTestResult"><code class="flex name class">
<span>class <span class="ident">BackTestResult</span></span>
<span>(</span><span>strategy_name: str, metadata: <a title="backtest.engine.metadata.Metadata" href="metadata.html#backtest.engine.metadata.Metadata">Metadata</a>, start: datetime.datetime, end: datetime.datetime, intial_cash: float, added_cash: float, market_index: Optional[numpy.ndarray[typing.Any, numpy.dtype[numpy.float64]]], broker: <a title="backtest.engine.broker.Broker" href="broker.html#backtest.engine.broker.Broker">Broker</a>, account: <a title="backtest.engine.account.Account" href="account.html#backtest.engine.account.Account">Account</a>, risk_free_rate: float = 1.5)</span>
</code></dt>
<dd>
<div class="desc"><p>This class is used to store the result of a backtest.
It contains all the information about the backtest</p>
<h2 id="args">Args:</h2>
<p><strong><code>strategy_name</code></strong>: The name of the strategy<br>
<strong><code>metadata</code></strong>: The metadata object<br>
<strong><code>start</code></strong>: Start date of the backtest data<br>
<strong><code>end</code></strong>: End date of the backtest data<br>
<strong><code>intial_cash</code></strong>: The initial cash of the account<br>
<strong><code>added_cash</code></strong>: The cash added to the account (or removed) with the CashController<br>
<strong><code>market_index</code></strong>: The market index time series (Price/score evolution across time)<br>
<strong><code>broker</code></strong>: The broker object used to backtest the strategy<br>
<strong><code>account</code></strong>: The account object used to backtest the strategy<br>
<strong><code>risk_free_rate</code></strong>: The risk free rate used to compute the ratios [%].
(Usually the estimated policy rate)
</p></div>
<h3>Static methods</h3>
<dl>
<dt id="backtest.engine.backtestResult.BackTestResult.load"><code class="name flex">
<span>def <span class="ident">load</span></span>(<span>path: str)</span>
</code></dt>
<dd>
<div class="desc"><p>Load a backtest result from a JSON file</p>
<h2 id="args">Args:</h2>
<p><strong><code>path</code></strong>: The path to the backtest result file
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The backtest result</dd>
</dl></div>
</dd>
<dt id="backtest.engine.backtestResult.BackTestResult.load_state"><code class="name flex">
<span>def <span class="ident">load_state</span></span>(<span>data: dict)</span>
</code></dt>
<dd>
<div class="desc"><p>Load a backtest result from a state dictionary</p>
<h2 id="args">Args:</h2>
<p><strong><code>data</code></strong>: The state dictionary
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The backtest result</dd>
</dl></div>
</dd>
<dt id="backtest.engine.backtestResult.BackTestResult.strided_arr"><code class="name flex">
<span>def <span class="ident">strided_arr</span></span>(<span>a: numpy.ndarray, window: int)</span>
</code></dt>
<dd>
<div class="desc"><p>Create a strided array to compute the rolling window of an array</p>
<h2 id="args">Args:</h2>
<p><strong><code>a</code></strong>: The array<br>
<strong><code>window</code></strong>: The window size
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The strided array.
Shape(len(a) - window + 1, window)</dd>
</dl></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="backtest.engine.backtestResult.BackTestResult.compute_calmar_ratio"><code class="name flex">
<span>def <span class="ident">compute_calmar_ratio</span></span>(<span>self, yearly_max_drawdown: pandas.core.series.Series) ‑> Optional[float]</span>
</code></dt>
<dd>
<div class="desc"><p>Compute the calmar ratio of the strategy</p>
<h2 id="args">Args:</h2>
<p><strong><code>yearly_max_drawdown</code></strong>: The yearly maximum drawdown of the strategy
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The calmar ratio of the strategy</dd>
</dl></div>
</dd>
<dt id="backtest.engine.backtestResult.BackTestResult.compute_sharp_ratio"><code class="name flex">
<span>def <span class="ident">compute_sharp_ratio</span></span>(<span>self, risk_free_rate) ‑> float</span>
</code></dt>
<dd>
<div class="desc"><p>Compute the sharp ratio of the strategy on a weekly basis</p>
<h2 id="args">Args:</h2>
<p><strong><code>risk_free_rate</code></strong>: The risk free rate or MAR (Minimum acceptable return)
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The sharp ratio of the strategy</dd>
</dl></div>
</dd>
<dt id="backtest.engine.backtestResult.BackTestResult.compute_sortino_ratio"><code class="name flex">
<span>def <span class="ident">compute_sortino_ratio</span></span>(<span>self, risk_free_rate) ‑> float</span>
</code></dt>
<dd>
<div class="desc"><p>Compute the sortino ratio of the strategy on a weekly basis</p>
<h2 id="args">Args:</h2>
<p><strong><code>risk_free_rate</code></strong>: The risk free rate or MAR (Minimum acceptable return)
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The sortino ratio of the strategy</dd>
</dl></div>
</dd>
<dt id="backtest.engine.backtestResult.BackTestResult.get_drawdown"><code class="name flex">
<span>def <span class="ident">get_drawdown</span></span>(<span>self, equity_history: numpy.ndarray, equity_timestamps: numpy.ndarray, window: Union[datetime.timedelta, int] = datetime.timedelta(days=365)) ‑> numpy.ndarray[typing.Any, numpy.dtype[numpy.float32]]</span>
</code></dt>
<dd>
<div class="desc"><p>Get the maximum drawdown of the strategy for each timestep (Causally - so looking back in time)</p>
<h2 id="args">Args:</h2>
<p><strong><code>equity_history</code></strong>: The equity history of the strategy (Worth of the portoflio evolution over time)<br>
<strong><code>equity_timestamps</code></strong>: The timestamps of the equity history<br>
<strong><code>window</code></strong>: The lookback window to use to compute the drawdown
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>A time series of the maximum drawdown of the strategy for each time steps</dd>
</dl></div>
</dd>
<dt id="backtest.engine.backtestResult.BackTestResult.get_ohlc"><code class="name flex">
<span>def <span class="ident">get_ohlc</span></span>(<span>self, period: <a title="backtest.engine.backtestResult.Period" href="backtestResult.html#backtest.engine.backtestResult.Period">Period</a>)</span>
</code></dt>
<dd>
<div class="desc"><p>Return a OHLC dataframe of the equity history corresponding to the period.</p>
<h2 id="args">Args:</h2>
<p><strong><code>period</code></strong>: The period to use to make the OHLC dataframe
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The OHLC dataframe</dd>
</dl></div>
</dd>
<dt id="backtest.engine.backtestResult.BackTestResult.save"><code class="name flex">
<span>def <span class="ident">save</span></span>(<span>self, path: str)</span>
</code></dt>
<dd>
<div class="desc"><p>Save the backtest result to a JSON file with the .bktst extension if none is provided.
About the .bktst extension:
This is the fileformat for a backtest result.
It is a JSON file that contains all the information about the
backtest.
It is a human readable file that can be used to share backtest results with other people.
Also, it can be loaded by this module so that the backtest result can be analyzed later.</p>
<h2 id="args">Args:</h2>
<p><strong><code>path</code></strong>: The path to save the backtest result.
If no extension is provided, the .bktst extension will be added.
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>None</dd>
</dl></div>
</dd>
<dt id="backtest.engine.backtestResult.BackTestResult.toAnalyser"><code class="name flex">
<span>def <span class="ident">toAnalyser</span></span>(<span>self, data: List[Dict[str, <a title="backtest.engine.tsData.TSData" href="tsData.html#backtest.engine.tsData.TSData">TSData</a>]])</span>
</code></dt>
<dd>
<div class="desc"><p>Convert the backtest result to an analyser object to visualize the backtest results</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The analyser object</dd>
</dl></div>
</dd>
</dl>
</dd>
<dt id="backtest.engine.broker.Broker"><code class="flex name class">
<span>class <span class="ident">Broker</span></span>
<span>(</span><span>bank_account: <a title="backtest.engine.account.Account" href="account.html#backtest.engine.account.Account">Account</a>, commission: float = None, relative_commission: float = None, margin_interest: float = 0, min_initial_margin: float = 0.5, min_maintenance_margin: float = 0.25, liquidation_delay: int = 2, min_initial_margin_short: float = 0.5, min_maintenance_margin_short: float = 0.25)</span>
</code></dt>
<dd>
<div class="desc"><p>When using margin, you need to add a column in the data called 'marginable' that is bool corresponding if a stock
can have margin or not.
Note: If there is not enough cash in the account when monthly fees are deduced, the strategy fills a bankruptcy, and
the simulation stops.</p>
<h2 id="args">Args:</h2>
<p><strong><code>bank_account</code></strong>: The bank account holding cash and collateral with the initial cash set.<br>
<strong><code>commission</code></strong>: The commission to be paid for each trade.
This parameter cannot be set if relative_commission
is set.
And vice versa.
If commission and relative_commission are both None, the commission
is set to 0.<br>
<strong><code>relative_commission</code></strong>: The commission to be paid for each trade as a ratio (0-1) of the trade value.
This
parameter cannot be set if commission is set.
And vice versa.<br>
<strong><code>margin_interest</code></strong>: The margin interest rate.
It is the interest rate charged on borrowed money.
It is
calculated daily and charged monthly.<br>
<strong><code>min_initial_margin</code></strong>: The initial margin required to buy a stock on margin.
It is a ratio (0-1) of the
stock's value.
Example: 50% initial margin is 0.5<br>
<strong><code>min_maintenance_margin</code></strong>: The minimum margin required to keep a stock on margin before a margin call.
It is a ratio (0-1) of the stock's value.
Example: 25% maintenance margin is 0.25<br>
<strong><code>liquidation_delay</code></strong>: The time a margin call has to be active before the broker liquidate positions to pay
the margin call. (Must be grater than 0, and an int)<br>
<strong><code>min_initial_margin_short</code></strong>: The minimum initial margin required to sell a stock short.
It is a ratio (0-1)<br>
<strong><code>min_maintenance_margin_short</code></strong>: The minimum maintenance margin required to keep a stock short before a margin
call.
It is a ratio (0-1) of the stock's value.
</p>
<h2 id="raises">Raises:</h2>
<p><strong><code>ValueError</code></strong>: If both commission and relative_commission are set.<br>
<strong><code>ValueError</code></strong>: If relative_commission is not None and not between 0 and 1<br>
<strong><code>ValueError</code></strong>: If commission is not None and smaller than 0<br>
<strong><code>ValueError</code></strong>: If margin_interest is not between 0 and 1<br>
<strong><code>ValueError</code></strong>: min_initial_margin and min_maintenance_margin are not between 0 and 1<br>
<strong><code>ValueError</code></strong>: If min_maintenance_margin_short and min_initial_margin_short are not between 0 and 1<br>
<strong><code>ValueError</code></strong>: If min_maintenance_margin is greater than or equal to min_initial_margin<br>
<strong><code>ValueError</code></strong>: If min_maintenance_margin_short is greater than or equal to min_initial_margin_short
</p></div>
<h3>Static methods</h3>
<dl>
<dt id="backtest.engine.broker.Broker.compute_dividend_payout"><code class="name flex">
<span>def <span class="ident">compute_dividend_payout</span></span>(<span>position: <a title="backtest.engine.portfolio.Position" href="portfolio.html#backtest.engine.portfolio.Position">Position</a>, div_freq: <a title="backtest.engine.tsData.DividendFrequency" href="tsData.html#backtest.engine.tsData.DividendFrequency">DividendFrequency</a>, dividends: float) ‑> float</span>
</code></dt>
<dd>
<div class="desc"><p>Compute the dividend payout of a long position</p>
<h2 id="args">Args:</h2>
<p><strong><code>position</code></strong>: The position to calculate dividend payout<br>
<strong><code>div_freq</code></strong>: The frequency that the security is paying dividends.<br>
<strong><code>dividends</code></strong>: The actual dividends payout for 1 share and for the period in div_freq.
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>Dividend payout</dd>
</dl>
<h2 id="raises">Raises:</h2>
<p><strong><code>RuntimeError</code></strong>: If the position is not long
</p></div>
</dd>
<dt id="backtest.engine.broker.Broker.load_state"><code class="name flex">
<span>def <span class="ident">load_state</span></span>(<span>data: dict, account: <a title="backtest.engine.account.Account" href="account.html#backtest.engine.account.Account">Account</a>)</span>
</code></dt>
<dd>
<div class="desc"><p>Load a broker from a state dictionary</p>
<h2 id="args">Args:</h2>
<p><strong><code>data</code></strong>: The state dictionary<br>
<strong><code>account</code></strong>: The account to which the broker is linked (Loaded by the BacktestResult object)
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The broker</dd>
</dl></div>
</dd>
</dl>
<h3>Instance variables</h3>
<dl>
<dt id="backtest.engine.broker.Broker.pending_orders"><code class="name">var <span class="ident">pending_orders</span> : List[<a title="backtest.engine.trade.TradeOrder" href="trade.html#backtest.engine.trade.TradeOrder">TradeOrder</a>]</code></dt>
<dd>
<div class="desc"><p>Return a copy of the pending orders</p></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="backtest.engine.broker.Broker.buy_long"><code class="name flex">
<span>def <span class="ident">buy_long</span></span>(<span>self, ticker: str, amount: int, amount_borrowed: int = 0, expiry: Optional[datetime.datetime] = None, price_limit: Tuple[Optional[float], Optional[float]] = (None, None))</span>
</code></dt>
<dd>
<div class="desc"><p>The strategy calls this method to open a long position.
The position can be bought on margin.</p>
<h2 id="args">Args:</h2>
<p><strong><code>ticker</code></strong>: The ticker of the security to buy<br>
<strong><code>amount</code></strong>: The amount of shares to buy<br>
<strong><code>amount_borrowed</code></strong>: The amount of shares to buy on margin.
(Won't be charged in the account)<br>
<strong><code>expiry</code></strong>: The expiry date of the order.
If the order is not executed before the expiry date, it is
automatically cancelled.
If the expiry date is None, the order is never cancelled.<br>
<strong><code>price_limit</code></strong>: The price limit of the order.
The first value of the tuple is the maximum price to buy.Meaning the order will be executed if the price is lower or equal to the limit.
The second value is the minimumprice to buy.
Meaning the order will be executed if the price is higher or equal to the limit.
If the limit is(None, None) the order will be executed at the next open price.
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>None</dd>
</dl></div>
</dd>
<dt id="backtest.engine.broker.Broker.buy_short"><code class="name flex">
<span>def <span class="ident">buy_short</span></span>(<span>self, ticker: str, amount_borrowed: int = 0, expiry: Optional[datetime.datetime] = None, price_limit: Tuple[Optional[float], Optional[float]] = (None, None))</span>
</code></dt>
<dd>
<div class="desc"><p>The strategy calls this method to close a short position.</p>
<h2 id="args">Args:</h2>
<p><strong><code>ticker</code></strong>: The ticker of the security to buy<br>
<strong><code>amount_borrowed</code></strong>: The amount of shares to buy back.<br>
<strong><code>expiry</code></strong>: The expiry date of the order.
If the order is not executed before the expiry date, it is
automatically cancelled.
If the expiry date is None, the order is never cancelled.<br>
<strong><code>price_limit</code></strong>: The price limit of the order.
The first value of the tuple is the maximum price to buy.Meaning the order will be executed if the price is lower or equal to the limit.
The second value is the minimumprice to buy.
Meaning the order will be executed if the price is higher or equal to the limit.
If the limit is(None, None) the order will be executed at the next open price.
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>None</dd>
</dl></div>
</dd>
<dt id="backtest.engine.broker.Broker.get_state"><code class="name flex">
<span>def <span class="ident">get_state</span></span>(<span>self) ‑> dict</span>
</code></dt>
<dd>
<div class="desc"><p>Get the current state of the broker as a JSONable dictionary (deepcopy</p>
<h2 id="note">Note</h2>
<ul>
<li>It doesn't include the account's state.</li>
</ul>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The broker's state as a dictionary</dd>
</dl></div>
</dd>
<dt id="backtest.engine.broker.Broker.get_worth"><code class="name flex">
<span>def <span class="ident">get_worth</span></span>(<span>self, security_names: List[str], current_tick_data: numpy.ndarray) ‑> float</span>
</code></dt>
<dd>
<div class="desc"><p>Get the worth of the portfolio.
(Doesn't include the transaction cost as if we would sell the positions)</p>
<h2 id="formula">Formula</h2>
<p>worth = cash + sum(long_positions) - sum(short_positions)</p>
<p>where:
long_positions = sum(long_position_amount * close_price - debt)
short_positions = sum(short_position_amount * close_price)
cash: The total cash in portfolio excluding all collateral.</p>
<h2 id="args">Args:</h2>
<p><strong><code>security_names</code></strong>: A list of all securities where the index of each ticker is the index of the data of the
corresponding security in the 'current_tick_data' parameter along the first axis (axis=0).<br>
<strong><code>current_tick_data</code></strong>: An array containing prices of each security for the current step shape(n_securities, 4)
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>worth in dollars</dd>
</dl></div>
</dd>
<dt id="backtest.engine.broker.Broker.make_trade"><code class="name flex">
<span>def <span class="ident">make_trade</span></span>(<span>self, order: <a title="backtest.engine.trade.TradeOrder" href="trade.html#backtest.engine.trade.TradeOrder">TradeOrder</a>, security_price: Tuple[float, float, float, float, float], timestamp: datetime.datetime, marginable: bool, shortable: bool) ‑> bool</span>
</code></dt>
<dd>
<div class="desc"><p>This method is call to make trades (convert tradeOrders to trade).
Make the trade if price is within limits</p>
<h2 id="args">Args:</h2>
<p><strong><code>order</code></strong>: TradeOrder<br>
<strong><code>security_price</code></strong>: The security price (Open, High, Low, Close, Splits)<br>
<strong><code>timestamp</code></strong>: The time where securities will be bought (Usually the next step)<br>
<strong><code>marginable</code></strong>: If the security is marginable.<br>
<strong><code>shortable</code></strong>: If the security is shortable.
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>True if the trade was successful (Needs to remove from pending trades) And False otherwise</dd>
</dl>
<h2 id="raises">Raises:</h2>
<p><strong><code>RuntimeError</code></strong>: If the trade cannot be executed because of margin or cash issues.
</p></div>
</dd>
<dt id="backtest.engine.broker.Broker.new_margin_call"><code class="name flex">
<span>def <span class="ident">new_margin_call</span></span>(<span>self, value: float, message: str = 'missing_funds')</span>
</code></dt>
<dd>
<div class="desc"><p>Create a new margin call and appends it to the other margin calls.
Do not forget to remove money from
account if necessary.
It also add the value to the debt record.</p>
<h2 id="args">Args:</h2>
<p><strong><code>value</code></strong>: The value that needs to be added to the account to cover margin call
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>None</dd>
</dl></div>
</dd>
<dt id="backtest.engine.broker.Broker.remove_margin_call"><code class="name flex">
<span>def <span class="ident">remove_margin_call</span></span>(<span>self, key: str)</span>
</code></dt>
<dd>
<div class="desc"><p>Remove a margin call from the list of margin calls.
It also removed the debt in the debt record.</p>
<h2 id="args">Args:</h2>
<p><strong><code>key</code></strong>: The key of the margin call to remove
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>None</dd>
</dl></div>
</dd>
<dt id="backtest.engine.broker.Broker.sell_long"><code class="name flex">
<span>def <span class="ident">sell_long</span></span>(<span>self, ticker: str, amount: int, expiry: Optional[datetime.datetime] = None, price_limit: Tuple[Optional[float], Optional[float]] = (None, None))</span>
</code></dt>
<dd>
<div class="desc"><p>The strategy calls this method to close a long position.</p>
<h2 id="args">Args:</h2>
<p><strong><code>ticker</code></strong>: The ticker of the security to sell<br>
<strong><code>amount</code></strong>: The amount of shares to sell<br>
<strong><code>expiry</code></strong>: The expiry date of the order.
If the order is not executed before the expiry date, it is
automatically cancelled.
If the expiry date is None, the order is never cancelled.<br>
<strong><code>price_limit</code></strong>: The price limit of the order.
The first value of the tuple is the minimum price to sell(Stop loss). Meaning the order will be executed if the price is lower or equal to the limit.
The second valueis the maximum price to sell.
Meaning the order will be executed if the price is higher or equal to the limit.If the limit is (None, None) the order will be executed at the next open price.
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>None</dd>
</dl></div>
</dd>
<dt id="backtest.engine.broker.Broker.sell_short"><code class="name flex">
<span>def <span class="ident">sell_short</span></span>(<span>self, ticker: str, amount_borrowed: int = 0, expiry: Optional[datetime.datetime] = None, price_limit: Tuple[Optional[float], Optional[float]] = (None, None))</span>
</code></dt>
<dd>
<div class="desc"><p>The strategy calls this method to open a short position.</p>
<h2 id="args">Args:</h2>
<p><strong><code>ticker</code></strong>: The ticker of the security to sell<br>
<strong><code>amount_borrowed</code></strong>: The amount of shares to sell short.<br>
<strong><code>expiry</code></strong>: The expiry date of the order.
If the order is not executed before the expiry date, it is
automatically cancelled.
If the expiry date is None, the order is never cancelled.<br>
<strong><code>price_limit</code></strong>: The price limit of the order.
The first value of the tuple is the minimum price to sell.Meaning the order will be executed if the price is lower or equal to the limit.
The second value is the maximum price to sell.
Meaning the order will be executed if the price is higher or equal to the limit.If the limit is (None, None) the order will be executed at the next open price.
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>None</dd>
</dl></div>
</dd>
<dt id="backtest.engine.broker.Broker.tick"><code class="name flex">
<span>def <span class="ident">tick</span></span>(<span>self, timestamp: datetime.datetime, next_timestamp, security_names: List[str], current_tick_data: numpy.ndarray, next_tick_data: numpy.ndarray, marginables: numpy.ndarray[typing.Any, numpy.dtype[bool]], dividends: numpy.ndarray[typing.Any, numpy.dtype[numpy.float32]], div_freq: List[<a title="backtest.engine.tsData.DividendFrequency" href="tsData.html#backtest.engine.tsData.DividendFrequency">DividendFrequency</a>], short_rates: numpy.ndarray[typing.Any, numpy.dtype[numpy.float32]], last_tick: bool = False)</span>
</code></dt>
<dd>
<div class="desc"><p>The simulation calls this method after the strategy has run.
It will calculate interests and margin call if
applicable.
It will do trades that can be done in the trade queue at the next open.</p>
<h2 id="args">Args:</h2>
<p><strong><code>timestamp</code></strong>: The date and time of the current step<br>
<strong><code>next_timestamp</code></strong>: The date and time of the next step where orders will be evaluated/bought<br>
<strong><code>security_names</code></strong>: A list of all securities where the index of each ticker is the index of the data of the
corresponding security in the 'next_tick_data' parameter along the first axis (axis=0).<br>
<strong><code>current_tick_data</code></strong>: An array of prices of each security for the current step(n_securities, 4)
The 4 columns of the array are: Open, High, Low, Close of the next step.<br>
<strong><code>next_tick_data</code></strong>: An array containing prices of each security for the next step shape(n_securities, 4)
The 5 columns of the array are: Open, High, Low, Close and Stock Splits of the next step.<br>
<strong><code>marginables</code></strong>: A boolean array of shape (n_securities, 2) [Marginable, Shortable) where True means that
the security can be bought on margin / sold short and False means that it cannot be bought on
margin / sold short.<br>
<strong><code>dividends</code></strong>: A float array of shape (n_securities, ) containing the dividends of each security for the
current step.<br>
<strong><code>div_freq</code></strong>: The frequency that the security is paying dividends.<br>
<strong><code>short_rates</code></strong>: The interest rates for each security that the user held overnight.
Shape(n_securities, )<br>
<strong><code>last_tick</code></strong>: Whether it is the last tick of the simulation.
If it is, the broker will liquidate all
positions and charge interests.
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>None</dd>
</dl></div>
</dd>
</dl>
</dd>
<dt id="backtest.engine.broker.BrokerState"><code class="flex name class">
<span>class <span class="ident">BrokerState</span></span>
<span>(</span><span>margin_calls: Dict[str, <a title="backtest.engine.broker.MarginCall" href="broker.html#backtest.engine.broker.MarginCall">MarginCall</a>], bankruptcy: bool, bankruptcy_amount: float = 0)</span>
</code></dt>
<dd>
<div class="desc"><p>Data class to store message from broker to strategy</p></div>
<h3>Static methods</h3>
<dl>
<dt id="backtest.engine.broker.BrokerState.load"><code class="name flex">
<span>def <span class="ident">load</span></span>(<span>data: dict)</span>
</code></dt>
<dd>
<div class="desc"><p>This method load a broker state object from a dictionary.</p>
<h2 id="args">Args:</h2>
<p><strong><code>data</code></strong>: The dictionary containing the object state
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The object state as a dictionary</dd>
</dl></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="backtest.engine.broker.BrokerState.export"><code class="name flex">
<span>def <span class="ident">export</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>This method export the broker state object to a JSONable dictionary.</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The object state as a dictionary</dd>
</dl></div>
</dd>
</dl>
</dd>
<dt id="backtest.engine.broker.MarginCall"><code class="flex name class">
<span>class <span class="ident">MarginCall</span></span>
<span>(</span><span>time_remaining: int, amount: float)</span>
</code></dt>
<dd>
<div class="desc"><p>Data class to store info about margin calls</p>
<h2 id="args">Args:</h2>
<p><strong><code>time_remaining</code></strong>: Time remaining in number of steps until liquidation<br>
<strong><code>amount</code></strong>: Amount in $ that needs to be added to account to come out of margin call
</p></div>
<h3>Static methods</h3>
<dl>
<dt id="backtest.engine.broker.MarginCall.load"><code class="name flex">
<span>def <span class="ident">load</span></span>(<span>data: dict)</span>
</code></dt>
<dd>
<div class="desc"><p>This method load a margin call object from a dictionary.</p>
<h2 id="args">Args:</h2>
<p><strong><code>data</code></strong>: The dictionary containing the object state
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The object state as a dictionary</dd>
</dl></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="backtest.engine.broker.MarginCall.export"><code class="name flex">
<span>def <span class="ident">export</span></span>(<span>self) ‑> dict</span>
</code></dt>
<dd>
<div class="desc"><p>This method export the margin call object to a JSONable dictionary.</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The object state as a dictionary</dd>
</dl></div>
</dd>
</dl>
</dd>
<dt id="backtest.engine.broker.StepState"><code class="flex name class">
<span>class <span class="ident">StepState</span></span>
<span>(</span><span>timestamp: datetime.datetime, worth: float, pending_orders: List[<a title="backtest.engine.trade.TradeOrder" href="trade.html#backtest.engine.trade.TradeOrder">TradeOrder</a>], filled_orders: List[<a title="backtest.engine.trade.TradeOrder" href="trade.html#backtest.engine.trade.TradeOrder">TradeOrder</a>], margin_calls: Dict[str, <a title="backtest.engine.broker.MarginCall" href="broker.html#backtest.engine.broker.MarginCall">MarginCall</a>])</span>
</code></dt>
<dd>
<div class="desc"><p>Record the state of the broker at each steps for easier strategy debugging</p>
<h2 id="args">Args:</h2>
<p><strong><code>timestamp</code></strong>: The date and time of the current step<br>
<strong><code>worth</code></strong>: The worth of the portfolio<br>
<strong><code>pending_orders</code></strong>: The pending orders that were not executed<br>
<strong><code>filled_orders</code></strong>: The orders that were executed at the current step<br>
<strong><code>margin_calls</code></strong>: The margin calls active at the current step
</p></div>
<h3>Static methods</h3>
<dl>
<dt id="backtest.engine.broker.StepState.load"><code class="name flex">
<span>def <span class="ident">load</span></span>(<span>data: dict)</span>
</code></dt>
<dd>
<div class="desc"><p>This method load a step state object from a dictionary.</p>
<h2 id="args">Args:</h2>
<p><strong><code>data</code></strong>: The dictionary containing the object state
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The object state as a dictionary</dd>
</dl></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="backtest.engine.broker.StepState.export"><code class="name flex">
<span>def <span class="ident">export</span></span>(<span>self) ‑> dict</span>
</code></dt>
<dd>
<div class="desc"><p>This method export the step state object to a JSONable dictionary.</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The object state as a dictionary</dd>
</dl></div>
</dd>
</dl>
</dd>
<dt id="backtest.engine.cashController.CashControllerBase"><code class="flex name class">
<span>class <span class="ident">CashControllerBase</span></span>
</code></dt>
<dd>
<div class="desc"><p>Children of this class are used to control the money flow in and out of the account during the backtest.
Each method are called at the beginning of the time period (day, week, month, year) and the user can decide to
deposit or withdraw money from the account.
For example, If I want to deposit 1000$ every month, I would do it in
the every_month method and 1000$ would be deposited at the beginning of every month.
To access the account, just use the self.account attribute.
However, you must not modify the account in any way.
To add or remove money from the account, make your overriden method return the amount of money added(Positive) or
removed(Negative) from the account.
For example, if you want to deposit 1000$ every month, you would do:
override the every_month method and return 1000.
If you want to withdraw 1000$ every month, you would do the same
thing but return -1000 instead.
If you want to do your deposit/withdrawal based on information from your portfolio or your broker, use the
attributes: self.broker.portfolio or self.broker.</p>
<p>You also need to return a comment on the transaction that can be None.
Check the example below for more
information.</p>
<p><strong>Again, if you use the broker, the account or the strategy, Make sure that they aren't modified in any way!</strong></p>
<p>DO NOT override the 'init' method. Instead, override the <strong>init</strong> method if you need to initialize some variables.</p>
<h2 id="attributes">Attributes</h2>
<dl>
<dt><strong><code>broker</code></strong></dt>
<dd>The broker object</dd>
<dt><strong><code>account</code></strong></dt>
<dd>The account object</dd>
<dt><strong><code>strategy</code></strong></dt>
<dd>The strategy object</dd>
<dt><strong><code>transactions</code></strong></dt>
<dd>A list of all transactions made by the cash controller</dd>
<dt><strong><code>total_deposited</code></strong></dt>
<dd>The total amount of money deposited in the account by the cash controller</dd>
</dl>
<h2 id="example">Example</h2>
<pre><code class="language-python-repl">&gt;&gt;&gt; from backtest.engine import CashControllerBase
&gt;&gt;&gt; # Deposit 1000$ in the account if the available cash is below 1000$ (Check every month)
&gt;&gt;&gt; class MyCashController(CashControllerBase):
...     def every_month(self, timestamp: datetime) -&gt; Tuple[float, Optional[str]]:
...         if self.account.available_cash &lt; 1000:
...             return 1000, &quot;Fund deposit&quot;
...
</code></pre></div>
<h3>Parent</h3>
<ul class="hlist">
<li>abc.ABC</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="backtest.engine.cashController.CashControllerBase.every_day"><code class="name flex">
<span>def <span class="ident">every_day</span></span>(<span>self, timestamp: datetime.datetime) ‑> Tuple[float, Optional[str]]</span>
</code></dt>
<dd>
<div class="desc"><p>This method is called every day during the backtest.</p></div>
</dd>
<dt id="backtest.engine.cashController.CashControllerBase.every_month"><code class="name flex">
<span>def <span class="ident">every_month</span></span>(<span>self, timestamp: datetime.datetime) ‑> Tuple[float, Optional[str]]</span>
</code></dt>
<dd>
<div class="desc"><p>This method is called every month during the backtest.</p></div>
</dd>
<dt id="backtest.engine.cashController.CashControllerBase.every_week"><code class="name flex">
<span>def <span class="ident">every_week</span></span>(<span>self, timestamp: datetime.datetime) ‑> Tuple[float, Optional[str]]</span>
</code></dt>
<dd>
<div class="desc"><p>This method is called every week during the backtest.</p></div>
</dd>
<dt id="backtest.engine.cashController.CashControllerBase.every_year"><code class="name flex">
<span>def <span class="ident">every_year</span></span>(<span>self, timestamp: datetime.datetime) ‑> Tuple[float, Optional[str]]</span>
</code></dt>
<dd>
<div class="desc"><p>This method is called every year during the backtest.</p></div>
</dd>
<dt id="backtest.engine.cashController.CashControllerBase.init"><code class="name flex">
<span>def <span class="ident">init</span></span>(<span>self, account: <a title="backtest.engine.account.Account" href="account.html#backtest.engine.account.Account">Account</a>, broker: <a title="backtest.engine.broker.Broker" href="broker.html#backtest.engine.broker.Broker">Broker</a>, strategy: <a title="backtest.engine.strategy.Strategy" href="strategy.html#backtest.engine.strategy.Strategy">Strategy</a>)</span>
</code></dt>
<dd>
<div class="desc"><h2 id="args">Args:</h2>
<p><strong><code>account</code></strong>: The account<br>
<strong><code>broker</code></strong>: The broker [Shoudl not be modified!!]
</p></div>
</dd>
</dl>
</dd>
<dt id="backtest.engine.cashController.SimpleCashController"><code class="flex name class">
<span>class <span class="ident">SimpleCashController</span></span>
<span>(</span><span>every_day: float = 0.0, every_week: float = 0.0, every_month: float = 0.0, every_year: float = 0.0)</span>
</code></dt>
<dd>
<div class="desc"><p>This class is a simple cash controller that will deposit ow withdraw a fixed amount of money at the beginning of
every period.
If a period's amount is 0 (Default), it won't deposit or withdraw funds.</p></div>
<h3>Parent</h3>
<ul class="hlist">
<li><a title="backtest.engine.cashController.CashControllerBase" href="cashController.html#backtest.engine.cashController.CashControllerBase">CashControllerBase</a></li>
</ul>
</dd>
<dt id="backtest.engine.metadata.Metadata"><code class="flex name class">
<span>class <span class="ident">Metadata</span></span>
<span>(</span><span>strategy_name: Optional[str] = None, description: Optional[str] = None, author: Optional[str] = None, version: Optional[str] = None, time_res: Optional[datetime.timedelta] = None, save_code: bool = True, hash_only: bool = True, file_blacklist: Optional[Iterable[str]] = (), code_path: Optional[str] = None)</span>
</code></dt>
<dd>
<div class="desc"><p>This class is meant to contain all the information needed to reproduce the results of the backtest of a startegy
Usually, the dataset must be big, so it is recomended to write in the description how to acquire the dataset,or
make a script that download it and save the script.</p>
<p>This class contains the metadata of the strategy.</p>
<h2 id="args">Args:</h2>
<p><strong><code>strategy_name</code></strong>: The name of the strategy.
If None, the name of the class will be used.<br>
<strong><code>description</code></strong>: The description of the strategy.
It is strongly recommended to write steps on how to
reproduce the results here.
If description is None, the docstring of the strategy will be
used.<br>
<strong><code>author</code></strong>: The author of the strategy.
If None, the git author will be used.<br>
<strong><code>version</code></strong>: The version of the strategy.
If None, the git commit hash will be used.
If no git
repository, it will be "Unknown"<br>
<strong><code>time_res</code></strong>: The time resolution.
If None, the automatically found time resolution will be saved. It is
the task of the broker to provide the time resolution.
(Not handled in this class)<br>
<strong><code>save_code</code></strong>: Whether to save the code of the strategy.
If True, the code will be saved.<br>
<strong><code>hash_only</code></strong>: Only used if save_code is True.
If True, only the hash of the code will be saved.
(It can spare storage space)<br>
<strong><code>file_blacklist</code></strong>: Files to not include in the code saved.
It is a list of strings with the file paths
relative to the current working directory.<br>
<strong><code>code_path</code></strong>: The path to the root folder where to search for the code.
Default is the current working
directory (If None).
If no '*' is present in the path, it will be added at the end to
search for py files.
</p></div>
<h3>Static methods</h3>
<dl>
<dt id="backtest.engine.metadata.Metadata.get_git_author"><code class="name flex">
<span>def <span class="ident">get_git_author</span></span>(<span>) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>This method return the git author name.</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>git author name</dd>
</dl></div>
</dd>
<dt id="backtest.engine.metadata.Metadata.load"><code class="name flex">
<span>def <span class="ident">load</span></span>(<span>data: dict)</span>
</code></dt>
<dd>
<div class="desc"><p>This method load the metadata from a dictionary.</p>
<h2 id="note">Note</h2>
<p>The file_blacklist parameter is not loaded (and not saved) for privacy purposes.</p>
<h2 id="args">Args:</h2>
<p><strong><code>data</code></strong>: The dictionary to load the metadata from.
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The metadata object</dd>
</dl></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="backtest.engine.metadata.Metadata.export"><code class="name flex">
<span>def <span class="ident">export</span></span>(<span>self) ‑> dict</span>
</code></dt>
<dd>
<div class="desc"><p>This method export the metadata to a JSONable dictionary.</p>
<h2 id="note">Note</h2>
<p>The file_blacklist parameter is not saved (and not loaded) for privacy purposes.</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The state of the object as a dictionary</dd>
</dl></div>
</dd>
<dt id="backtest.engine.metadata.Metadata.get_git_commit"><code class="name flex">
<span>def <span class="ident">get_git_commit</span></span>(<span>self) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>This method return the git commit hash.</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>git commit hash</dd>
</dl></div>
</dd>
<dt id="backtest.engine.metadata.Metadata.init"><code class="name flex">
<span>def <span class="ident">init</span></span>(<span>self, strategy: <a title="backtest.engine.strategy.Strategy" href="strategy.html#backtest.engine.strategy.Strategy">Strategy</a>, backtest_parameters: Optional[dict] = None, tickers: Optional[List[str]] = None, features: Optional[List[str]] = None, run_duration: Optional[float] = None)</span>
</code></dt>
<dd>
<div class="desc"><p>This method is used to initialize the metadata object from the Backtest object (When the simulation has started)</p>
<h2 id="args">Args:</h2>
<p><strong><code>strategy</code></strong>: The strategy object.
(Used to get its name<br>
<strong><code>backtest_parameters</code></strong>: The parameters of the backtest object (Init paraeters)<br>
<strong><code>tickers</code></strong>: The tickers used in the backtest<br>
<strong><code>features</code></strong>: The features used in the backtest (Columns)<br>
<strong><code>run_duration</code></strong>: The duration of the backtest (in seconds)
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>None</dd>
</dl></div>
</dd>
<dt id="backtest.engine.metadata.Metadata.load_code"><code class="name flex">
<span>def <span class="ident">load_code</span></span>(<span>self, checksum: bool = True, ignore: Iterable[str] = (), path: str = './**/*.py') ‑> Dict[str, Dict[str, Optional[str]]]</span>
</code></dt>
<dd>
<div class="desc"><p>This method load the code of the strategy.</p>
<h2 id="args">Args:</h2>
<p><strong><code>path</code></strong>: The path to search for the code.
Default is the current working directory. (And ignore venv)<br>
<strong><code>checksum</code></strong>: Whether to return only the checksum of each file.<br>
<strong><code>ignore</code></strong>: Files to ignore when loading the code.
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The code of the strategy</dd>
</dl></div>
</dd>
</dl>
</dd>
<dt id="backtest.engine.portfolio.Portfolio"><code class="flex name class">
<span>class <span class="ident">Portfolio</span></span>
<span>(</span><span>transaction_cost: float = 10.0, transaction_relative: bool = False, debt_record: Optional[Dict[str, float]] = None)</span>
</code></dt>
<dd>
<div class="desc"><p>This
class will have two sub portfolios: long and short.
When 'trade' is called, it will add or remove in the
appropriate portfolio the security.
It will also remember each trades (in a list) to recover the state at each
days (For debugging purpose).</p>
<h2 id="args">Args:</h2>
<p><strong><code>transaction_cost</code></strong>: The cost of a transaction (buy or sell) in $ or in %<br>
<strong><code>transaction_relative</code></strong>: Whether the transaction cost is in percentage relative to transaction cost or fix price<br>
<strong><code>debt_record</code></strong>: The amount of debt used to buy securities: {security: amount}.
Passed by reference from broker.
</p></div>
<h3>Static methods</h3>
<dl>
<dt id="backtest.engine.portfolio.Portfolio.load_state"><code class="name flex">
<span>def <span class="ident">load_state</span></span>(<span>data: dict, debt_record: Dict[str, float])</span>
</code></dt>
<dd>
<div class="desc"><p>Load the state of the portfolio from a dictionary</p>
<h2 id="args">Args:</h2>
<p><strong><code>data</code></strong>: The dictionary to load from<br>
<strong><code>debt_record</code></strong>: The amount of debt used to buy securities: {security: amount}.
Passed by reference from broker.
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The portfolio object</dd>
</dl></div>
</dd>
</dl>
<h3>Instance variables</h3>
<dl>
<dt id="backtest.engine.portfolio.Portfolio.long"><code class="name">var <span class="ident">long</span> : Dict[str, <a title="backtest.engine.portfolio.Position" href="portfolio.html#backtest.engine.portfolio.Position">Position</a>]</code></dt>
<dd>
<div class="desc"><p>Return the long positions that are not empty (amount &gt; 0)</p></div>
</dd>
<dt id="backtest.engine.portfolio.Portfolio.short"><code class="name">var <span class="ident">short</span> : Dict[str, <a title="backtest.engine.portfolio.Position" href="portfolio.html#backtest.engine.portfolio.Position">Position</a>]</code></dt>
<dd>
<div class="desc"><p>Return the short positions that are not empty (amount &gt; 0)</p></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="backtest.engine.portfolio.Portfolio.empty"><code class="name flex">
<span>def <span class="ident">empty</span></span>(<span>self) ‑> bool</span>
</code></dt>
<dd>
<div class="desc"><p>To check if the portfolio is empty</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>True if the portfolio is empty, False otherwise</dd>
</dl></div>
</dd>
<dt id="backtest.engine.portfolio.Portfolio.estimateCost"><code class="name flex">
<span>def <span class="ident">estimateCost</span></span>(<span>self, price: float, amount: int, sell: bool = False) ‑> float</span>
</code></dt>
<dd>
<div class="desc"><p>This method can e used by external classes such as Borker to estimate the cost of a trade.</p>
<h2 id="args">Args:</h2>
<p><strong><code>price</code></strong>: The price of the security<br>
<strong><code>amount</code></strong>: The amount of security in the transaction (Trade)<br>
<strong><code>sell</code></strong>: Whether the trade is a sell or not.
If sell, we subtract the transaction cost from the worth.
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>Worth of transaction - transaction cost</dd>
</dl></div>
</dd>
<dt id="backtest.engine.portfolio.Portfolio.getLong"><code class="name flex">
<span>def <span class="ident">getLong</span></span>(<span>self) ‑> Dict[str, <a title="backtest.engine.portfolio.Position" href="portfolio.html#backtest.engine.portfolio.Position">Position</a>]</span>
</code></dt>
<dd>
<div class="desc"><p>To get what securities are bought long to later calculate interests (When using margin)</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>Dictionary[security, amount]</dd>
</dl></div>
</dd>
<dt id="backtest.engine.portfolio.Portfolio.getLongProfit"><code class="name flex">
<span>def <span class="ident">getLongProfit</span></span>(<span>self, average_buy_price: float, average_sell_price: float, qty: int, ratio_owned: float, debt: float, number_of_entry: int) ‑> Tuple[float, float]</span>
</code></dt>
<dd>
<div class="desc"><p>Calculate the profit made on a long trade</p>
<h2 id="args">Args:</h2>
<p><strong><code>average_buy_price</code></strong>: The price at which the security was bought<br>
<strong><code>average_sell_price</code></strong>: The price at which the security was sold<br>
<strong><code>qty</code></strong>: The number of shares in the trade<br>
<strong><code>ratio_owned</code></strong>: The ratio of the security held in account that are owned by the investor.
(not bought on
margin)<br>
<strong><code>debt</code></strong>: The amount of debt used to buy the security<br>
<strong><code>number_of_entry</code></strong>: The number of time the position was entered.
(Used only if transaction cost is absolute)
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The profit (positive) or loss (negative) made on the trade, relative profit in percentage</dd>
</dl></div>
</dd>
<dt id="backtest.engine.portfolio.Portfolio.getShort"><code class="name flex">
<span>def <span class="ident">getShort</span></span>(<span>self) ‑> Dict[str, <a title="backtest.engine.portfolio.Position" href="portfolio.html#backtest.engine.portfolio.Position">Position</a>]</span>
</code></dt>
<dd>
<div class="desc"><p>To get what securities are sold short to later calculate interests</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>Dictionary[security, amount]</dd>
</dl></div>
</dd>
<dt id="backtest.engine.portfolio.Portfolio.getShortProfit"><code class="name flex">
<span>def <span class="ident">getShortProfit</span></span>(<span>self, average_sell_price: float, average_buy_price: float, qty: int) ‑> Tuple[float, float]</span>
</code></dt>
<dd>
<div class="desc"><p>Calculate the profit made on a short trade</p>
<h2 id="args">Args:</h2>
<p><strong><code>average_sell_price</code></strong>: The price at which the security was sold<br>
<strong><code>average_buy_price</code></strong>: The price at which the security was bought<br>
<strong><code>qty</code></strong>: The number of shares in the trade
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The profit (positive) or loss (negative) made on the trade, relative profit</dd>
</dl></div>
</dd>
<dt id="backtest.engine.portfolio.Portfolio.get_state"><code class="name flex">
<span>def <span class="ident">get_state</span></span>(<span>self) ‑> dict</span>
</code></dt>
<dd>
<div class="desc"><p>Return the state of the portfolio.
(Make a deep copy)</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The state of the portfolio as a dict</dd>
</dl></div>
</dd>
<dt id="backtest.engine.portfolio.Portfolio.get_trade_count"><code class="name flex">
<span>def <span class="ident">get_trade_count</span></span>(<span>self, exit_only: bool = True, cutoff: Optional[datetime.datetime] = None) ‑> int</span>
</code></dt>
<dd>
<div class="desc"><p>To get the number of trades made.</p>
<h2 id="args">Args:</h2>
<p><strong><code>exit_only</code></strong>: If True, Only the trade that exit a position are counted
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The number of trades</dd>
</dl></div>
</dd>
<dt id="backtest.engine.portfolio.Portfolio.get_trade_stats"><code class="name flex">
<span>def <span class="ident">get_trade_stats</span></span>(<span>self, cutoff: Optional[datetime.datetime] = None) ‑> dict</span>
</code></dt>
<dd>
<div class="desc"><p>To get the stats for each trade.
(Make a deep copy)</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The dictionary of trades: {
"best_trade": float,
# In percentage
"worst_trade": float,
# In percentage
"win_rate": float,
# In percentage
"avg_trade": float,
# In percentage
"max_trade_duration": float,
# In days
"min_trade_duration": float,
# In days
"avg_trade_duration": float,
# In days
"profit_factor": float, # Total gains / Total losses
"SQN": float,
# System Quality Number}</dd>
</dl></div>
</dd>
<dt id="backtest.engine.portfolio.Portfolio.get_trades"><code class="name flex">
<span>def <span class="ident">get_trades</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>To get the list of trades.
(Make a deep copy)</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>the list of rades</dd>
</dl></div>
</dd>
<dt id="backtest.engine.portfolio.Portfolio.split"><code class="name flex">
<span>def <span class="ident">split</span></span>(<span>self, ticker: str, ratio: float)</span>
</code></dt>
<dd>
<div class="desc"><p>Call this method when a stock split occurs.
It will update the average price and the amount of the position.</p>
<h2 id="args">Args:</h2>
<p><strong><code>ticker</code></strong>: The ticker of the security<br>
<strong><code>ratio</code></strong>: The ratio of the split. let's say it is 7:1, then the ratio is 7, 2:3, then the ratio is 2/3
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>None</dd>
</dl></div>
</dd>
<dt id="backtest.engine.portfolio.Portfolio.trade"><code class="name flex">
<span>def <span class="ident">trade</span></span>(<span>self, trade: <a title="backtest.engine.trade.Trade" href="trade.html#backtest.engine.trade.Trade">Trade</a>, *, correction: float = 0.0) ‑> float</span>
</code></dt>
<dd>
<div class="desc"><p>Make a trade and add it to the portfolio.</p>
<h2 id="note">Note</h2>
<p>This class will handle the debt record.
It will add the amount borrowed to the debt record when buying long
and remove it when selling long.</p>
<h2 id="args">Args:</h2>
<p><strong><code>trade</code></strong>: Can be BuyLong, SellLong, SellShort, BuyShort<br>
<strong><code>correction</code></strong>: The correction to apply to the price of the trade.
It is used to correct the price onlywhile logging the transaction.
It could be used when a split happens at the next tick.
If the correction is 0,it is ignored.
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The cash change in account.
If negative, withdraw.
If positive, deposit.</dd>
</dl>
<h2 id="raises">Raises:</h2>
<p><strong><code>RuntimeError</code></strong>: If the transaction ID is already used
</p></div>
</dd>
<dt id="backtest.engine.portfolio.Portfolio.update_time_stock_idx"><code class="name flex">
<span>def <span class="ident">update_time_stock_idx</span></span>(<span>self, timestep_elapsed: int = 1)</span>
</code></dt>
<dd>
<div class="desc"><p>Call this method to update the time_stock_idx for each position.
It will be used to calculate the dividends due
to the shareholders.</p>
<h2 id="args">Args:</h2>
<p><strong><code>timestep_elapsed</code></strong>: The number of timestep elapsed since the last call to this method
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>None</dd>
</dl></div>
</dd>
</dl>
</dd>
<dt id="backtest.engine.portfolio.Position"><code class="flex name class">
<span>class <span class="ident">Position</span></span>
<span>(</span><span>ticker: str, amount: int, long: bool, average_price: float, average_filled_time: datetime.datetime, ratio_owned: float = 1.0)</span>
</code></dt>
<dd>
<div class="desc"><p>Data class holding info about a position</p></div>
<h3>Static methods</h3>
<dl>
<dt id="backtest.engine.portfolio.Position.load"><code class="name flex">
<span>def <span class="ident">load</span></span>(<span>data: dict)</span>
</code></dt>
<dd>
<div class="desc"><p>Load the object from a dictionary</p>
<h2 id="args">Args:</h2>
<p><strong><code>data</code></strong>: The dictionary to load from
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The object</dd>
</dl></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="backtest.engine.portfolio.Position.dividends_got_paid"><code class="name flex">
<span>def <span class="ident">dividends_got_paid</span></span>(<span>self, timestamp: datetime.datetime)</span>
</code></dt>
<dd>
<div class="desc"><p>Call this method to reset last dividends date.
Useful when calculating how much dividends the user should have</p>
<h2 id="args">Args:</h2>
<p><strong><code>timestamp</code></strong>: The timestamp of dividend payment
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>None</dd>
</dl></div>
</dd>
<dt id="backtest.engine.portfolio.Position.export"><code class="name flex">
<span>def <span class="ident">export</span></span>(<span>self) ‑> dict</span>
</code></dt>
<dd>
<div class="desc"><p>Export the position to a dictionary JSONable</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The object as a dictionary</dd>
</dl></div>
</dd>
<dt id="backtest.engine.portfolio.Position.split"><code class="name flex">
<span>def <span class="ident">split</span></span>(<span>self, ratio: float) ‑> None</span>
</code></dt>
<dd>
<div class="desc"><p>Call this method when a stock split occurs.
It will update the average price and the amount.</p>
<ul>
<li>$new_price = old_price / ratio$</li>
<li>$new_amount = old_amount * ratio$</li>
</ul>
<h2 id="args">Args:</h2>
<p><strong><code>ratio</code></strong>: The ratio of the split. let's say it is 7:1, then the ratio is 7, 2:3, then the ratio is 2/3
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The two new positions</dd>
</dl></div>
</dd>
<dt id="backtest.engine.portfolio.Position.update_time_stock_idx"><code class="name flex">
<span>def <span class="ident">update_time_stock_idx</span></span>(<span>self, timestep_elapsed: int = 1)</span>
</code></dt>
<dd>
<div class="desc"><p>Call this method to update the time_stock_idx.
It will be used to calculate the dividends due to the shareholders.
Call this method at the end of each day.</p>
<h2 id="args">Args:</h2>
<p><strong><code>timestep_elapsed</code></strong>: The number of seconds elapsed since the last call to this method
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>None</dd>
</dl></div>
</dd>
</dl>
</dd>
<dt id="backtest.engine.portfolio.TradeStats"><code class="flex name class">
<span>class <span class="ident">TradeStats</span></span>
<span>(</span><span>trade: <a title="backtest.engine.trade.Trade" href="trade.html#backtest.engine.trade.Trade">Trade</a>, duration: datetime.timedelta, profit: float, rel_profit: float, ratio_owned)</span>
</code></dt>
<dd>
<div class="desc"><p>This class will hold the stats for a given trade.
It will be used to calculate the stats for the whole portfolio</p>
<h2 id="args">Args:</h2>
<p><strong><code>trade</code></strong>: The trade object (SellLong or BuyShort)<br>
<strong><code>duration</code></strong>: The duration of the trade<br>
<strong><code>profit</code></strong>: The profit made on the trade<br>
<strong><code>rel_profit</code></strong>: The profit made on the trade relative to the amount invested NOT IN PERCENTAGE<br>
<strong><code>ratio_owned</code></strong>: The ratio of the security held in account that are owned by the investor.
(not bought on
margin)
</p>
<h2 id="raises">Raises:</h2>
<p><strong><code>ValueError</code></strong>: If the trade type is not SellLong or BuyShort (Doesn't exit a position)
</p></div>
<h3>Static methods</h3>
<dl>
<dt id="backtest.engine.portfolio.TradeStats.load"><code class="name flex">
<span>def <span class="ident">load</span></span>(<span>data: dict)</span>
</code></dt>
<dd>
<div class="desc"><p>Load the object from a dictionary</p>
<h2 id="args">Args:</h2>
<p><strong><code>data</code></strong>: The dictionary to load from
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The object</dd>
</dl></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="backtest.engine.portfolio.TradeStats.export"><code class="name flex">
<span>def <span class="ident">export</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Export the object to a JSONable dictionary
Note: The duration is saved in seconds</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>A dictionary corresponding top the object's state</dd>
</dl></div>
</dd>
</dl>
</dd>
<dt id="backtest.engine.record.Record"><code class="flex name class">
<span>class <span class="ident">Record</span></span>
<span>(</span><span>chart: Optional[pandas.core.frame.DataFrame], ticker: str, time_res: int, marginable: bool, shortable: bool, div_freq: <a title="backtest.engine.tsData.DividendFrequency" href="tsData.html#backtest.engine.tsData.DividendFrequency">DividendFrequency</a>, short_rate: float, next_tick: Optional[pandas.core.series.Series] = None)</span>
</code></dt>
<dd>
<div class="desc"><p>This class contains information about a stock and is pass to the strategy.</p>
<h2 id="args">Args:</h2>
<p><strong><code>chart</code></strong>: The prepared chart of the stock<br>
<strong><code>ticker</code></strong>: The ticker of the stock<br>
<strong><code>time_res</code></strong>: The idx in the list of resolution of the backtest object of the time resolution of the record.<br>
<strong><code>marginable</code></strong>: Whether the stock is marginable<br>
<strong><code>shortable</code></strong>: Whether the stock is shortable<br>
<strong><code>div_freq</code></strong>: The dividend frequency of the stock<br>
<strong><code>short_rate</code></strong>: The short rate of the stock<br>
<strong><code>next_tick</code></strong>: The next tick of the stock
</p></div>
<h3>Instance variables</h3>
<dl>
<dt id="backtest.engine.record.Record.next_tick"><code class="name">var <span class="ident">next_tick</span></code></dt>
<dd>
<div class="desc"><p>This method is used to get the next tick of the stock.</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The next tick of the stock</dd>
</dl></div>
</dd>
</dl>
</dd>
<dt id="backtest.engine.record.Records"><code class="flex name class">
<span>class <span class="ident">Records</span></span>
<span>(</span><span>records: Union[List[<a title="backtest.engine.record.Record" href="record.html#backtest.engine.record.Record">Record</a>], Dict[str, <a title="backtest.engine.record.Record" href="record.html#backtest.engine.record.Record">Record</a>]], time_res: datetime.timedelta, time_res_idx: int, window: int)</span>
</code></dt>
<dd>
<div class="desc"><p>Class containing multiple records for a given time resolution.
You can access the record like a list with the
index of the record being the index of the ticker in the list of tickers.
You can also access the record by the
string of the ticker like a dictionary.
You can iterate over the records like a dictionary (ticker, record).
Finally, you can check if a ticker is in the records like a dictionary.</p>
<h2 id="attributes">Attributes</h2>
<dl>
<dt><strong><code>records</code></strong></dt>
<dd>The records.
The keys are the tickers of the securities.</dd>
<dt><strong><code>tickers</code></strong></dt>
<dd>The tickers of the securities in the same order as the records attribute.</dd>
<dt><strong><code>features</code></strong></dt>
<dd>The features of the records.
It is the columns of the charts.</dd>
<dt><strong><code>time_res</code></strong></dt>
<dd>The time resolution</dd>
<dt><strong><code>time_res_idx</code></strong></dt>
<dd>The index of the time resolution in the available_time_res attribute of the backtest object</dd>
<dt><strong><code>window</code></strong></dt>
<dd>The window size (lookback period) of the records.
Used when exporting to numpy.</dd>
</dl>
<h2 id="implements">Implements</h2>
<p><strong>getitem</strong>, <strong>setitem</strong>, <strong>iter</strong>, <strong>contains</strong></p>
<h2 id="args">Args:</h2>
<p><strong><code>records</code></strong>: The records.
If a list, it will be converted to a dictionary internally.
If a dictionary, the
keys will be the tickers of the securities.<br>
<strong><code>time_res</code></strong>: The time resolution<br>
<strong><code>time_res_idx</code></strong>: The index of the time resolution in the available_time_res attribute of the backtest object<br>
<strong><code>window</code></strong>: The window size (lookback period) of the records.
Used when exporting to numpy.
</p></div>
<h3>Methods</h3>
<dl>
<dt id="backtest.engine.record.Records.numpy"><code class="name flex">
<span>def <span class="ident">numpy</span></span>(<span>self) ‑> numpy.ndarray[typing.Any, numpy.dtype[numpy.float64]]</span>
</code></dt>
<dd>
<div class="desc"><p>This method will return the charts as a numpy array.
The array might contain nan values if the chart is not
long enough to fill the window.</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>A numpy array of the shape (n, w, p) where n is the number of securities, w is the window size and p is
the number of features.</dd>
</dl></div>
</dd>
<dt id="backtest.engine.record.Records.to_list"><code class="name flex">
<span>def <span class="ident">to_list</span></span>(<span>self) ‑> List[<a title="backtest.engine.record.Record" href="record.html#backtest.engine.record.Record">Record</a>]</span>
</code></dt>
<dd>
<div class="desc"><p>Convert the Records object to a list of Record</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>A list of Record</dd>
</dl></div>
</dd>
<dt id="backtest.engine.record.Records.update_features"><code class="name flex">
<span>def <span class="ident">update_features</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>This method will update the features attribute to the new features set based on the columns of the charts.
Assuming all the charts have the same features.</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>None</dd>
</dl></div>
</dd>
</dl>
</dd>
<dt id="backtest.engine.record.RecordsBucket"><code class="flex name class">
<span>class <span class="ident">RecordsBucket</span></span>
<span>(</span><span>records: Union[List[<a title="backtest.engine.record.Records" href="record.html#backtest.engine.record.Records">Records</a>], List[Iterable[<a title="backtest.engine.record.Record" href="record.html#backtest.engine.record.Record">Record</a>]]], available_time_res: List[datetime.timedelta], main_timestep: int, window: Optional[int] = None)</span>
</code></dt>
<dd>
<div class="desc"><p>Class containing multiple Records objects for all time resolutions. You can access each Records object by their
corresponding time resolution or their index in the available_time_res attribute of the backtest object.
You can
also iterate over the Records objects like a dictionary (time resolution, Records object).
To simplify the access
of the Records object associated with the main time resolution, you can use the main attribute.</p>
<h2 id="attributes">Attributes</h2>
<dl>
<dt><strong><code>records</code></strong></dt>
<dd>The Records objects.
The keys are the time resolutions.</dd>
<dt><strong><code>available_time_res</code></strong></dt>
<dd>The available time resolutions</dd>
<dt><strong><code>main_timestep</code></strong></dt>
<dd>The index of the main time resolution in the available_time_res attribute of the backtest object</dd>
</dl>
<h2 id="args">Args:</h2>
<p><strong><code>records</code></strong>: The records<br>
<strong><code>available_time_res</code></strong>: The available time resolutions
</p></div>
<h3>Instance variables</h3>
<dl>
<dt id="backtest.engine.record.RecordsBucket.main"><code class="name">var <span class="ident">main</span> : <a title="backtest.engine.record.Records" href="record.html#backtest.engine.record.Records">Records</a></code></dt>
<dd>
<div class="desc"><p>Get the main timestep set of records</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The main timestep set of records</dd>
</dl></div>
</dd>
</dl>
</dd>
<dt id="backtest.engine.strategy.Strategy"><code class="flex name class">
<span>class <span class="ident">Strategy</span></span>
</code></dt>
<dd>
<div class="desc"><p>This is the base class of strategies.
To create a strategy, you should inherit from this class and implement the
run method.
The run method is called at each time step to compute the strategy.
You can also override the <strong>init</strong>
method to add attributes to the strategy.
If you do so, you should also override the save and load methods to save
the strategy in a different format (by default it is pickle).</p>
<h2 id="warning">Warning</h2>
<p>You should not override the init and the <strong>call</strong> method.
The init, and notice it doesn't have
the underscores like <strong>init</strong>, is used to bind the strategy to the backtest object.
This is done under the
hood.
The <strong>call</strong> method is used to dispatch the data to the run method.
Overriding it might ignore some
safety checks or statistics calculations.</p>
<p><strong>While implementing the run method:</strong></p>
<p>You SHOULD NOT change the state of the account, the portfolio or the broker with the exception of calling the
methods below on the broker object.
If you modify the state of one of these objects, you could encounter bugs
and false backtest results.
The only methods you should call on the broker object are:
- broker.buy_long(&hellip;)
- broker.sell_long(&hellip;)
- broker.buy_short(&hellip;)
- broker.sell_short(&hellip;)</p>
<h2 id="attributes">Attributes</h2>
<dl>
<dt><strong><code>account</code></strong></dt>
<dd>The account object</dd>
<dt><strong><code>broker</code></strong></dt>
<dd>The broker object</dd>
<dt><strong><code>available_time_res</code></strong></dt>
<dd>The available time resolutions</dd>
<dt><strong><code>portfolio</code></strong></dt>
<dd>The portfolio object (Alias of broker.portfolio)</dd>
</dl>
<h2 id="example">Example</h2>
<pre><code class="language-python-repl">&gt;&gt;&gt; class MyStrategy(Strategy):
... def run(self, data, timestep):
...    for ticker in data.main.tickers:
...        chart = data.main[ticker].chart
...        if len(chart) &gt; 2 and F.crossover(chart[&quot;MACD&quot;], chart[&quot;MACD_SIGNAL&quot;]) and chart[&quot;MACD&quot;].iloc[-1] &lt; 0:
...            if ticker not in self.broker.portfolio.long:
...                self.broker.buy_long(ticker, 500)
...        if ticker in self.broker.portfolio.long and F.crossunder(chart[&quot;MACD&quot;], chart[&quot;MACD_SIGNAL&quot;]):
...            self.broker.sell_long(ticker, 500)
...
</code></pre></div>
<h3>Parent</h3>
<ul class="hlist">
<li>abc.ABC</li>
</ul>
<h3>Static methods</h3>
<dl>
<dt id="backtest.engine.strategy.Strategy.load"><code class="name flex">
<span>def <span class="ident">load</span></span>(<span>path: pathlib.PurePath)</span>
</code></dt>
<dd>
<div class="desc"><p>This method is used to load the state of a strategy from a file.
If you would like to save in an other format,
you can override this method and the save method.</p>
<h2 id="args">Args:</h2>
<p><strong><code>path</code></strong>: The path to load the strategy from.
(.pkl)
</p></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="backtest.engine.strategy.Strategy.init"><code class="name flex">
<span>def <span class="ident">init</span></span>(<span>self, account: <a title="backtest.engine.account.Account" href="account.html#backtest.engine.account.Account">Account</a>, broker: <a title="backtest.engine.broker.Broker" href="broker.html#backtest.engine.broker.Broker">Broker</a>, available_time_res: List[datetime.timedelta])</span>
</code></dt>
<dd>
<div class="desc"><p>YOU SHOULD NOT OVERRIDE THIS METHOD</p>
<h2 id="args">Args:</h2>
<p><strong><code>account</code></strong>: The account object<br>
<strong><code>broker</code></strong>: The broker object<br>
<strong><code>available_time_res</code></strong>: The available time resolutions
</p></div>
</dd>
<dt id="backtest.engine.strategy.Strategy.run"><code class="name flex">
<span>def <span class="ident">run</span></span>(<span>self, data: <a title="backtest.engine.record.RecordsBucket" href="record.html#backtest.engine.record.RecordsBucket">RecordsBucket</a>, timestep: datetime.datetime)</span>
</code></dt>
<dd>
<div class="desc"><p>This method is used to compute the strategy at each time step.
It is in this method that the strategy logic is
implemented.</p>
<h2 id="args">Args:</h2>
<p><strong><code>data</code></strong>: The data to use for the strategy<br>
<strong><code>timestep</code></strong>: The current time step
</p></div>
</dd>
<dt id="backtest.engine.strategy.Strategy.save"><code class="name flex">
<span>def <span class="ident">save</span></span>(<span>self, path: pathlib.PurePath)</span>
</code></dt>
<dd>
<div class="desc"><p>This method is used to save the state of the strategy to a file.
If you would like to save in another format,
you can override this method and the load method.</p>
<h2 id="note">Note</h2>
<p>To avoid saving things twice, we set the account, broker and available_time_res to None before saving.
Only the other attributes will be saved.
(If any)</p>
<h2 id="args">Args:</h2>
<p><strong><code>path</code></strong>: The path to save the strategy (.pkl)
</p></div>
</dd>
</dl>
</dd>
<dt id="backtest.engine.time_resolution_extenders.BasicExtender"><code class="flex name class">
<span>class <span class="ident">BasicExtender</span></span>
<span>(</span><span>period: Union[<a title="backtest.engine.time_resolution_extenders.TimePeriod" href="time_resolution_extenders.html#backtest.engine.time_resolution_extenders.TimePeriod">TimePeriod</a>, str])</span>
</code></dt>
<dd>
<div class="desc"><p>This class provide an easy top implement extender for basic time resolutions such as 30 minutes, 1 hour,
4 hours, 1 day, 1 week, and 1 month.
It assumes to have has main timestep (In the backtest object) a time
resolution smaller than the value chose.
For example, if the main timestep is 1 day, it will not work to
extend the data to 30 minutes or 4h.
If you have multiple static timestep that you want to extend, you can
override the extend method to handle this case, or directly derive a new class from TimeResExtender.</p>
<h2 id="example">Example</h2>
<pre><code class="language-python-repl">&gt;&gt;&gt; extender = BasicExtender(TimePeriod.ONE_DAY) + BasicExtender(&quot;1w&quot;)
&gt;&gt;&gt; # Given that the main timeresolution of the static data is smaller than one day.  Ex: 30 minutes
&gt;&gt;&gt; # The data will have a time resolution of 30 minutes, 1 day and 1 week.
&gt;&gt;&gt; data: List[Dict[str, TSData]] = ...
&gt;&gt;&gt; data += extender.extend(data)
</code></pre></div>
<h3>Parent</h3>
<ul class="hlist">
<li><a title="backtest.engine.time_resolution_extenders.TimeResExtender" href="time_resolution_extenders.html#backtest.engine.time_resolution_extenders.TimeResExtender">TimeResExtender</a></li>
</ul>
</dd>
<dt id="backtest.engine.time_resolution_extenders.TimePeriod"><code class="flex name class">
<span>class <span class="ident">TimePeriod</span></span>
<span>(</span><span>*args, **kwds)</span>
</code></dt>
<dd>
<div class="desc"><p>Create a collection of name/value pairs.</p>
<p>Example enumeration:</p>
<pre><code class="language-python-repl">&gt;&gt;&gt; class Color(Enum):
...     RED = 1
...     BLUE = 2
...     GREEN = 3
</code></pre>
<p>Access them by:</p>
<ul>
<li>attribute access:</li>
</ul>
<blockquote>
<blockquote>
<blockquote>
<p>Color.RED
<Color.RED: 1></p>
</blockquote>
</blockquote>
</blockquote>
<ul>
<li>value lookup:</li>
</ul>
<blockquote>
<blockquote>
<blockquote>
<p>Color(1)
<Color.RED: 1></p>
</blockquote>
</blockquote>
</blockquote>
<ul>
<li>name lookup:</li>
</ul>
<blockquote>
<blockquote>
<blockquote>
<p>Color['RED']
<Color.RED: 1></p>
</blockquote>
</blockquote>
</blockquote>
<p>Enumerations can be iterated over, and know how many members they have:</p>
<pre><code class="language-python-repl">&gt;&gt;&gt; len(Color)
3
</code></pre>
<pre><code class="language-python-repl">&gt;&gt;&gt; list(Color)
[&lt;Color.RED: 1&gt;, &lt;Color.BLUE: 2&gt;, &lt;Color.GREEN: 3&gt;]
</code></pre>
<p>Methods can be added to enumerations, and members can have their own
attributes &ndash; see the documentation for details.</p></div>
<h3>Parent</h3>
<ul class="hlist">
<li>enum.Enum</li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="backtest.engine.time_resolution_extenders.TimePeriod.FOUR_HOURS"><code class="name">var <span class="ident">FOUR_HOURS</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtest.engine.time_resolution_extenders.TimePeriod.ONE_DAY"><code class="name">var <span class="ident">ONE_DAY</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtest.engine.time_resolution_extenders.TimePeriod.ONE_HOUR"><code class="name">var <span class="ident">ONE_HOUR</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtest.engine.time_resolution_extenders.TimePeriod.ONE_MONTH"><code class="name">var <span class="ident">ONE_MONTH</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtest.engine.time_resolution_extenders.TimePeriod.ONE_WEEK"><code class="name">var <span class="ident">ONE_WEEK</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtest.engine.time_resolution_extenders.TimePeriod.THIRTY_MINUTES"><code class="name">var <span class="ident">THIRTY_MINUTES</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
<dt id="backtest.engine.time_resolution_extenders.TimeResExtender"><code class="flex name class">
<span>class <span class="ident">TimeResExtender</span></span>
</code></dt>
<dd>
<div class="desc"><p>Helper class that provides a standard way to create an ABC using
inheritance.</p></div>
<h3>Parent</h3>
<ul class="hlist">
<li>abc.ABC</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="backtest.engine.time_resolution_extenders.TimeResExtender.extend"><code class="name flex">
<span>def <span class="ident">extend</span></span>(<span>self, data: List[Dict[str, <a title="backtest.engine.tsData.TSData" href="tsData.html#backtest.engine.tsData.TSData">TSData</a>]], main_timestep: int = 0) ‑> List[Dict[str, <a title="backtest.engine.tsData.TSData" href="tsData.html#backtest.engine.tsData.TSData">TSData</a>]]</span>
</code></dt>
<dd>
<div class="desc"><p>Extend the data with new time resolutions.
By default, it uses the single_extend method to extend each
timeseries data independently.
However, it is possible to override this method and bypass the single_extend
method to extend the data in a more complex way or to optimize the process.</p>
<h2 id="args">Args:</h2>
<p><strong><code>data</code></strong>: The current data statically acquired.
(Fetch from sources)<br>
<strong><code>main_timestep</code></strong>: The index of the timeseries data in data list to use as the main series.
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The new data with the new time resolutions.
(Do not mutate the original data)</dd>
</dl></div>
</dd>
<dt id="backtest.engine.time_resolution_extenders.TimeResExtender.single_extend"><code class="name flex">
<span>def <span class="ident">single_extend</span></span>(<span>self, data: <a title="backtest.engine.tsData.TSData" href="tsData.html#backtest.engine.tsData.TSData">TSData</a>) ‑> Tuple[pandas.core.frame.DataFrame]</span>
</code></dt>
<dd>
<div class="desc"><p>Extend a single timeseries data with new time resolutions.
Override this method</p>
<h2 id="args">Args:</h2>
<p><strong><code>data</code></strong>: The current data statically acquired.
(Fetch from sources)
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The new data with the new time resolutions.
(Do not mutate the original data)</dd>
</dl></div>
</dd>
</dl>
</dd>
<dt id="backtest.engine.trade.Trade"><code class="flex name class">
<span>class <span class="ident">Trade</span></span>
<span>(</span><span>security: str, security_price: float, amount: int, amount_borrowed: int, transaction_id: str, timestamp: datetime.datetime, trade_type: <a title="backtest.engine.trade.TradeType" href="trade.html#backtest.engine.trade.TradeType">TradeType</a>, order: <a title="backtest.engine.trade.TradeOrder" href="trade.html#backtest.engine.trade.TradeOrder">TradeOrder</a>)</span>
</code></dt>
<dd>
<div class="desc"><p>Helper class that provides a standard way to create an ABC using
inheritance.</p></div>
<h3>Parent</h3>
<ul class="hlist">
<li>abc.ABC</li>
</ul>
<h3>Static methods</h3>
<dl>
<dt id="backtest.engine.trade.Trade.load"><code class="name flex">
<span>def <span class="ident">load</span></span>(<span>data: dict)</span>
</code></dt>
<dd>
<div class="desc"><p>This method loads a trade object from a dictionary.</p>
<h2 id="args">Args:</h2>
<p><strong><code>data</code></strong>: The dictionary containing the object state
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The object</dd>
</dl></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="backtest.engine.trade.Trade.export"><code class="name flex">
<span>def <span class="ident">export</span></span>(<span>self) ‑> dict</span>
</code></dt>
<dd>
<div class="desc"><p>This method export the trade object to a JSONable dictionary.</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The object state as a dictionary</dd>
</dl></div>
</dd>
<dt id="backtest.engine.trade.Trade.getCost"><code class="name flex">
<span>def <span class="ident">getCost</span></span>(<span>self) ‑> float</span>
</code></dt>
<dd>
<div class="desc"><p>This method calculates the upfront cost of the trade.
It ignores the cost of borrowing the securities.</p>
<h2 id="note">Note</h2>
<p>It doesn't include transaction costs nor the cost of borrowing the securities.</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The upfront cost of the trade</dd>
</dl></div>
</dd>
</dl>
</dd>
<dt id="backtest.engine.trade.TradeOrder"><code class="flex name class">
<span>class <span class="ident">TradeOrder</span></span>
<span>(</span><span>timestamp: datetime.datetime, security: str, security_price_limit: Tuple[Optional[float], Optional[float]], amount: int, amount_borrowed: int, trade_type: <a title="backtest.engine.trade.TradeType" href="trade.html#backtest.engine.trade.TradeType">TradeType</a>, expiry: Optional[datetime.datetime])</span>
</code></dt>
<dd>
<div class="desc"><p>Helper class that provides a standard way to create an ABC using
inheritance.</p></div>
<h3>Parent</h3>
<ul class="hlist">
<li>abc.ABC</li>
</ul>
<h3>Static methods</h3>
<dl>
<dt id="backtest.engine.trade.TradeOrder.load"><code class="name flex">
<span>def <span class="ident">load</span></span>(<span>data: dict)</span>
</code></dt>
<dd>
<div class="desc"><p>This method loads a trade order object from a dictionary.</p>
<h2 id="args">Args:</h2>
<p><strong><code>data</code></strong>: The dictionary containing the object state
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The object</dd>
</dl></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="backtest.engine.trade.TradeOrder.export"><code class="name flex">
<span>def <span class="ident">export</span></span>(<span>self) ‑> dict</span>
</code></dt>
<dd>
<div class="desc"><p>This method export the trade order object to a JSONable dictionary.</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The object state as a dictionary</dd>
</dl></div>
</dd>
</dl>
</dd>
<dt id="backtest.engine.trade.TradeType"><code class="flex name class">
<span>class <span class="ident">TradeType</span></span>
<span>(</span><span>*args, **kwds)</span>
</code></dt>
<dd>
<div class="desc"><p>Create a collection of name/value pairs.</p>
<p>Example enumeration:</p>
<pre><code class="language-python-repl">&gt;&gt;&gt; class Color(Enum):
...     RED = 1
...     BLUE = 2
...     GREEN = 3
</code></pre>
<p>Access them by:</p>
<ul>
<li>attribute access:</li>
</ul>
<blockquote>
<blockquote>
<blockquote>
<p>Color.RED
<Color.RED: 1></p>
</blockquote>
</blockquote>
</blockquote>
<ul>
<li>value lookup:</li>
</ul>
<blockquote>
<blockquote>
<blockquote>
<p>Color(1)
<Color.RED: 1></p>
</blockquote>
</blockquote>
</blockquote>
<ul>
<li>name lookup:</li>
</ul>
<blockquote>
<blockquote>
<blockquote>
<p>Color['RED']
<Color.RED: 1></p>
</blockquote>
</blockquote>
</blockquote>
<p>Enumerations can be iterated over, and know how many members they have:</p>
<pre><code class="language-python-repl">&gt;&gt;&gt; len(Color)
3
</code></pre>
<pre><code class="language-python-repl">&gt;&gt;&gt; list(Color)
[&lt;Color.RED: 1&gt;, &lt;Color.BLUE: 2&gt;, &lt;Color.GREEN: 3&gt;]
</code></pre>
<p>Methods can be added to enumerations, and members can have their own
attributes &ndash; see the documentation for details.</p></div>
<h3>Parent</h3>
<ul class="hlist">
<li>enum.Enum</li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="backtest.engine.trade.TradeType.BuyLong"><code class="name">var <span class="ident">BuyLong</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtest.engine.trade.TradeType.BuyShort"><code class="name">var <span class="ident">BuyShort</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtest.engine.trade.TradeType.SellLong"><code class="name">var <span class="ident">SellLong</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtest.engine.trade.TradeType.SellShort"><code class="name">var <span class="ident">SellShort</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Static methods</h3>
<dl>
<dt id="backtest.engine.trade.TradeType.available"><code class="name flex">
<span>def <span class="ident">available</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
<dt id="backtest.engine.transaction.Transaction"><code class="flex name class">
<span>class <span class="ident">Transaction</span></span>
<span>(</span><span>amount: float, T: <a title="backtest.engine.transaction.TransactionType" href="transaction.html#backtest.engine.transaction.TransactionType">TransactionType</a>, dt: datetime.datetime, transaction_id: str = None, comment: str = None)</span>
</code></dt>
<dd>
<div class="desc"><p>Data class</p></div>
<h3>Static methods</h3>
<dl>
<dt id="backtest.engine.transaction.Transaction.load"><code class="name flex">
<span>def <span class="ident">load</span></span>(<span>data: dict)</span>
</code></dt>
<dd>
<div class="desc"><p>This method load a Transaction object from a dictionary.</p>
<h2 id="args">Args:</h2>
<p><strong><code>data</code></strong>: The dictionary to load from
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The Transaction object</dd>
</dl></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="backtest.engine.transaction.Transaction.export"><code class="name flex">
<span>def <span class="ident">export</span></span>(<span>self) ‑> dict</span>
</code></dt>
<dd>
<div class="desc"><p>This method export the trade order object to a JSONable dictionary.</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The object's state as a dictionary</dd>
</dl></div>
</dd>
</dl>
</dd>
<dt id="backtest.engine.transaction.TransactionType"><code class="flex name class">
<span>class <span class="ident">TransactionType</span></span>
<span>(</span><span>*args, **kwds)</span>
</code></dt>
<dd>
<div class="desc"><p>Create a collection of name/value pairs.</p>
<p>Example enumeration:</p>
<pre><code class="language-python-repl">&gt;&gt;&gt; class Color(Enum):
...     RED = 1
...     BLUE = 2
...     GREEN = 3
</code></pre>
<p>Access them by:</p>
<ul>
<li>attribute access:</li>
</ul>
<blockquote>
<blockquote>
<blockquote>
<p>Color.RED
<Color.RED: 1></p>
</blockquote>
</blockquote>
</blockquote>
<ul>
<li>value lookup:</li>
</ul>
<blockquote>
<blockquote>
<blockquote>
<p>Color(1)
<Color.RED: 1></p>
</blockquote>
</blockquote>
</blockquote>
<ul>
<li>name lookup:</li>
</ul>
<blockquote>
<blockquote>
<blockquote>
<p>Color['RED']
<Color.RED: 1></p>
</blockquote>
</blockquote>
</blockquote>
<p>Enumerations can be iterated over, and know how many members they have:</p>
<pre><code class="language-python-repl">&gt;&gt;&gt; len(Color)
3
</code></pre>
<pre><code class="language-python-repl">&gt;&gt;&gt; list(Color)
[&lt;Color.RED: 1&gt;, &lt;Color.BLUE: 2&gt;, &lt;Color.GREEN: 3&gt;]
</code></pre>
<p>Methods can be added to enumerations, and members can have their own
attributes &ndash; see the documentation for details.</p></div>
<h3>Parent</h3>
<ul class="hlist">
<li>enum.Enum</li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="backtest.engine.transaction.TransactionType.DEPOSIT"><code class="name">var <span class="ident">DEPOSIT</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtest.engine.transaction.TransactionType.WITHDRAWAL"><code class="name">var <span class="ident">WITHDRAWAL</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Static methods</h3>
<dl>
<dt id="backtest.engine.transaction.TransactionType.from_str"><code class="name flex">
<span>def <span class="ident">from_str</span></span>(<span>string: str)</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
<dt id="backtest.engine.tsData.DividendFrequency"><code class="flex name class">
<span>class <span class="ident">DividendFrequency</span></span>
<span>(</span><span>*args, **kwds)</span>
</code></dt>
<dd>
<div class="desc"><p>Create a collection of name/value pairs.</p>
<p>Example enumeration:</p>
<pre><code class="language-python-repl">&gt;&gt;&gt; class Color(Enum):
...     RED = 1
...     BLUE = 2
...     GREEN = 3
</code></pre>
<p>Access them by:</p>
<ul>
<li>attribute access:</li>
</ul>
<blockquote>
<blockquote>
<blockquote>
<p>Color.RED
<Color.RED: 1></p>
</blockquote>
</blockquote>
</blockquote>
<ul>
<li>value lookup:</li>
</ul>
<blockquote>
<blockquote>
<blockquote>
<p>Color(1)
<Color.RED: 1></p>
</blockquote>
</blockquote>
</blockquote>
<ul>
<li>name lookup:</li>
</ul>
<blockquote>
<blockquote>
<blockquote>
<p>Color['RED']
<Color.RED: 1></p>
</blockquote>
</blockquote>
</blockquote>
<p>Enumerations can be iterated over, and know how many members they have:</p>
<pre><code class="language-python-repl">&gt;&gt;&gt; len(Color)
3
</code></pre>
<pre><code class="language-python-repl">&gt;&gt;&gt; list(Color)
[&lt;Color.RED: 1&gt;, &lt;Color.BLUE: 2&gt;, &lt;Color.GREEN: 3&gt;]
</code></pre>
<p>Methods can be added to enumerations, and members can have their own
attributes &ndash; see the documentation for details.</p></div>
<h3>Parent</h3>
<ul class="hlist">
<li>enum.Enum</li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="backtest.engine.tsData.DividendFrequency.BIANNUALLY"><code class="name">var <span class="ident">BIANNUALLY</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtest.engine.tsData.DividendFrequency.MONTHLY"><code class="name">var <span class="ident">MONTHLY</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtest.engine.tsData.DividendFrequency.NO_DIVIDENDS"><code class="name">var <span class="ident">NO_DIVIDENDS</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtest.engine.tsData.DividendFrequency.QUARTERLY"><code class="name">var <span class="ident">QUARTERLY</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtest.engine.tsData.DividendFrequency.YEARLY"><code class="name">var <span class="ident">YEARLY</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Static methods</h3>
<dl>
<dt id="backtest.engine.tsData.DividendFrequency.from_delta"><code class="name flex">
<span>def <span class="ident">from_delta</span></span>(<span>days: float)</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtest.engine.tsData.DividendFrequency.nearest"><code class="name flex">
<span>def <span class="ident">nearest</span></span>(<span>value: float, available_values: numpy.ndarray) ‑> int</span>
</code></dt>
<dd>
<div class="desc"><p>Get the nearest value in available_values.
(Kinda like a custom round())</p>
<h2 id="args">Args:</h2>
<p><strong><code>value</code></strong>: The value to approximate<br>
<strong><code>available_values</code></strong>: The available values to approximate to
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The approximation (nearest value)</dd>
</dl></div>
</dd>
</dl>
</dd>
</dl>
</section>
</div>
</article>
<nav id="sidebar">
<form>
<input id="lunr-search" name="q" placeholder="🔎 Search ..." aria-label="Search"
disabled minlength="2">
</form>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/tingle/0.15.3/tingle.min.css" integrity="sha512-j1u8eUJ4f23xPPxwOrLUPQaCD2dwzNqqmDDcWS4deWsMv2ohLqmXXuP3hU7g8TyzbMSakP/mMqoNBYWj8AEIFg==" crossorigin>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tingle/0.15.3/tingle.min.js" integrity="sha512-plGUER9JkeEWPPqQBE4sdLqBoQug5Ap+BCGMc7bJ8BXkm+VVj6QzkpBz5Yv2yPkkq+cqg9IpkBaGCas6uDbW8g==" crossorigin></script>
<style>
.modal-box iframe {
width: 100vw;
height: calc(100vh - 80px);
}
@media screen and (min-width: 700px) {
.modal-box iframe {
width: 70vw;
height: 80vh;
}
}
.modal-box .tingle-modal-box {width: auto;}
.modal-box .tingle-modal-box__content {padding: 0;}
</style>
<script>
const input = document.getElementById('lunr-search');
input.disabled = false;
input.form.addEventListener('submit', (ev) => {
ev.preventDefault();
const url = new URL(window.location);
url.searchParams.set('q', input.value);
history.replaceState({}, null, url.toString());
search(input.value);
});
const query = new URL(window.location).searchParams.get('q');
if (query)
search(query);
function search(query) {
const url = '../../doc-search.html#' + encodeURIComponent(query);
new tingle.modal({
cssClass: ['modal-box'],
onClose: () => {
const url = new URL(window.location);
url.searchParams.delete('q');
history.replaceState({}, null, url.toString());
setTimeout(() => input.focus(), 100);
}
}).setContent('<div class="embed-responsive embed-responsive-16by9"><iframe class="embed-responsive-item" src="' + url + '"></iframe></div>').open();
}
</script>
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Path</h3>
<ul>
<li><code><div><a title="backtest" href="../index.html">backtest</a>.<a title="backtest.engine" href="#backtest.engine">engine</a></div></code></li>
</ul>
</li>
<li><h3><a href="#header-submodules">Sub-modules</a></h3>
<ul>
<li><code><a title="backtest.engine.account" href="account.html">backtest.engine.account</a></code></li>
<li><code><a title="backtest.engine.analyser" href="analyser.html">backtest.engine.analyser</a></code></li>
<li><code><a title="backtest.engine.backtest" href="backtest.html">backtest.engine.backtest</a></code></li>
<li><code><a title="backtest.engine.backtestResult" href="backtestResult.html">backtest.engine.backtestResult</a></code></li>
<li><code><a title="backtest.engine.broker" href="broker.html">backtest.engine.broker</a></code></li>
<li><code><a title="backtest.engine.cashController" href="cashController.html">backtest.engine.cashController</a></code></li>
<li><code><a title="backtest.engine.functional" href="functional.html">backtest.engine.functional</a></code></li>
<li><code><a title="backtest.engine.metadata" href="metadata.html">backtest.engine.metadata</a></code></li>
<li><code><a title="backtest.engine.portfolio" href="portfolio.html">backtest.engine.portfolio</a></code></li>
<li><code><a title="backtest.engine.record" href="record.html">backtest.engine.record</a></code></li>
<li><code><a title="backtest.engine.strategy" href="strategy.html">backtest.engine.strategy</a></code></li>
<li><code><a title="backtest.engine.time_resolution_extenders" href="time_resolution_extenders.html">backtest.engine.time_resolution_extenders</a></code></li>
<li><code><a title="backtest.engine.trade" href="trade.html">backtest.engine.trade</a></code></li>
<li><code><a title="backtest.engine.transaction" href="transaction.html">backtest.engine.transaction</a></code></li>
<li><code><a title="backtest.engine.tsData" href="tsData.html">backtest.engine.tsData</a></code></li>
<li><code><a title="backtest.engine.utils" href="utils.html">backtest.engine.utils</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<div class="accordion" id="classes-accordion">
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.engine.account.Account%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.engine.account.Account%27%3E" onclick="navigateToUrl('account.html#backtest.engine.account.Account')">
<code>Account</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.engine.account.Account%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="two-column">
<li><code><a title="backtest.engine.account.Account.add_collateral" href="account.html#backtest.engine.account.Account.add_collateral">add_collateral</a></code></li>
<li><code><a title="backtest.engine.account.Account.get_cash" href="account.html#backtest.engine.account.Account.get_cash">get_cash</a></code></li>
<li><code><a title="backtest.engine.account.Account.get_state" href="account.html#backtest.engine.account.Account.get_state">get_state</a></code></li>
<li><code><a title="backtest.engine.account.Account.get_total_cash" href="account.html#backtest.engine.account.Account.get_total_cash">get_total_cash</a></code></li>
<li><code><a title="backtest.engine.account.Account.get_transactions" href="account.html#backtest.engine.account.Account.get_transactions">get_transactions</a></code></li>
<li><code><a title="backtest.engine.account.Account.load_state" href="account.html#backtest.engine.account.Account.load_state">load_state</a></code></li>
<li><code><a title="backtest.engine.account.Account.remove_collateral" href="account.html#backtest.engine.account.Account.remove_collateral">remove_collateral</a></code></li>
<li><code><a title="backtest.engine.account.Account.update_collateral" href="account.html#backtest.engine.account.Account.update_collateral">update_collateral</a></code></li>
</ul>
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.engine.account.CollateralUpdate%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.engine.account.CollateralUpdate%27%3E" onclick="navigateToUrl('account.html#backtest.engine.account.CollateralUpdate')">
<code>CollateralUpdate</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.engine.account.CollateralUpdate%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="">
<li><code><a title="backtest.engine.account.CollateralUpdate.export" href="account.html#backtest.engine.account.CollateralUpdate.export">export</a></code></li>
<li><code><a title="backtest.engine.account.CollateralUpdate.load" href="account.html#backtest.engine.account.CollateralUpdate.load">load</a></code></li>
</ul>
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.engine.account.CollateralUpdateType%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.engine.account.CollateralUpdateType%27%3E" onclick="navigateToUrl('account.html#backtest.engine.account.CollateralUpdateType')">
<code>CollateralUpdateType</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.engine.account.CollateralUpdateType%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="">
<li><code><a title="backtest.engine.account.CollateralUpdateType.ADD" href="account.html#backtest.engine.account.CollateralUpdateType.ADD">ADD</a></code></li>
<li><code><a title="backtest.engine.account.CollateralUpdateType.REMOVE" href="account.html#backtest.engine.account.CollateralUpdateType.REMOVE">REMOVE</a></code></li>
<li><code><a title="backtest.engine.account.CollateralUpdateType.UPDATE" href="account.html#backtest.engine.account.CollateralUpdateType.UPDATE">UPDATE</a></code></li>
</ul>
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.engine.backtest.Backtest%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.engine.backtest.Backtest%27%3E" onclick="navigateToUrl('backtest.html#backtest.engine.backtest.Backtest')">
<code>Backtest</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.engine.backtest.Backtest%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="">
<li><code><a title="backtest.engine.backtest.Backtest.apply_indicators" href="backtest.html#backtest.engine.backtest.Backtest.apply_indicators">apply_indicators</a></code></li>
<li><code><a title="backtest.engine.backtest.Backtest.default_forge_last_candle" href="backtest.html#backtest.engine.backtest.Backtest.default_forge_last_candle">default_forge_last_candle</a></code></li>
<li><code><a title="backtest.engine.backtest.Backtest.forge_last_candle" href="backtest.html#backtest.engine.backtest.Backtest.forge_last_candle">forge_last_candle</a></code></li>
<li><code><a title="backtest.engine.backtest.Backtest.run" href="backtest.html#backtest.engine.backtest.Backtest.run">run</a></code></li>
<li><code><a title="backtest.engine.backtest.Backtest.run_indicator" href="backtest.html#backtest.engine.backtest.Backtest.run_indicator">run_indicator</a></code></li>
<li><code><a title="backtest.engine.backtest.Backtest.stadardize_timesteps" href="backtest.html#backtest.engine.backtest.Backtest.stadardize_timesteps">stadardize_timesteps</a></code></li>
</ul>
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.engine.backtestResult.BackTestResult%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.engine.backtestResult.BackTestResult%27%3E" onclick="navigateToUrl('backtestResult.html#backtest.engine.backtestResult.BackTestResult')">
<code>BackTestResult</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.engine.backtestResult.BackTestResult%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="">
<li><code><a title="backtest.engine.backtestResult.BackTestResult.compute_calmar_ratio" href="backtestResult.html#backtest.engine.backtestResult.BackTestResult.compute_calmar_ratio">compute_calmar_ratio</a></code></li>
<li><code><a title="backtest.engine.backtestResult.BackTestResult.compute_sharp_ratio" href="backtestResult.html#backtest.engine.backtestResult.BackTestResult.compute_sharp_ratio">compute_sharp_ratio</a></code></li>
<li><code><a title="backtest.engine.backtestResult.BackTestResult.compute_sortino_ratio" href="backtestResult.html#backtest.engine.backtestResult.BackTestResult.compute_sortino_ratio">compute_sortino_ratio</a></code></li>
<li><code><a title="backtest.engine.backtestResult.BackTestResult.get_drawdown" href="backtestResult.html#backtest.engine.backtestResult.BackTestResult.get_drawdown">get_drawdown</a></code></li>
<li><code><a title="backtest.engine.backtestResult.BackTestResult.get_ohlc" href="backtestResult.html#backtest.engine.backtestResult.BackTestResult.get_ohlc">get_ohlc</a></code></li>
<li><code><a title="backtest.engine.backtestResult.BackTestResult.load" href="backtestResult.html#backtest.engine.backtestResult.BackTestResult.load">load</a></code></li>
<li><code><a title="backtest.engine.backtestResult.BackTestResult.load_state" href="backtestResult.html#backtest.engine.backtestResult.BackTestResult.load_state">load_state</a></code></li>
<li><code><a title="backtest.engine.backtestResult.BackTestResult.save" href="backtestResult.html#backtest.engine.backtestResult.BackTestResult.save">save</a></code></li>
<li><code><a title="backtest.engine.backtestResult.BackTestResult.strided_arr" href="backtestResult.html#backtest.engine.backtestResult.BackTestResult.strided_arr">strided_arr</a></code></li>
<li><code><a title="backtest.engine.backtestResult.BackTestResult.toAnalyser" href="backtestResult.html#backtest.engine.backtestResult.BackTestResult.toAnalyser">toAnalyser</a></code></li>
</ul>
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.engine.broker.Broker%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.engine.broker.Broker%27%3E" onclick="navigateToUrl('broker.html#backtest.engine.broker.Broker')">
<code>Broker</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.engine.broker.Broker%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="">
<li><code><a title="backtest.engine.broker.Broker.buy_long" href="broker.html#backtest.engine.broker.Broker.buy_long">buy_long</a></code></li>
<li><code><a title="backtest.engine.broker.Broker.buy_short" href="broker.html#backtest.engine.broker.Broker.buy_short">buy_short</a></code></li>
<li><code><a title="backtest.engine.broker.Broker.compute_dividend_payout" href="broker.html#backtest.engine.broker.Broker.compute_dividend_payout">compute_dividend_payout</a></code></li>
<li><code><a title="backtest.engine.broker.Broker.get_state" href="broker.html#backtest.engine.broker.Broker.get_state">get_state</a></code></li>
<li><code><a title="backtest.engine.broker.Broker.get_worth" href="broker.html#backtest.engine.broker.Broker.get_worth">get_worth</a></code></li>
<li><code><a title="backtest.engine.broker.Broker.load_state" href="broker.html#backtest.engine.broker.Broker.load_state">load_state</a></code></li>
<li><code><a title="backtest.engine.broker.Broker.make_trade" href="broker.html#backtest.engine.broker.Broker.make_trade">make_trade</a></code></li>
<li><code><a title="backtest.engine.broker.Broker.new_margin_call" href="broker.html#backtest.engine.broker.Broker.new_margin_call">new_margin_call</a></code></li>
<li><code><a title="backtest.engine.broker.Broker.pending_orders" href="broker.html#backtest.engine.broker.Broker.pending_orders">pending_orders</a></code></li>
<li><code><a title="backtest.engine.broker.Broker.remove_margin_call" href="broker.html#backtest.engine.broker.Broker.remove_margin_call">remove_margin_call</a></code></li>
<li><code><a title="backtest.engine.broker.Broker.sell_long" href="broker.html#backtest.engine.broker.Broker.sell_long">sell_long</a></code></li>
<li><code><a title="backtest.engine.broker.Broker.sell_short" href="broker.html#backtest.engine.broker.Broker.sell_short">sell_short</a></code></li>
<li><code><a title="backtest.engine.broker.Broker.tick" href="broker.html#backtest.engine.broker.Broker.tick">tick</a></code></li>
</ul>
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.engine.broker.BrokerState%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.engine.broker.BrokerState%27%3E" onclick="navigateToUrl('broker.html#backtest.engine.broker.BrokerState')">
<code>BrokerState</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.engine.broker.BrokerState%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="">
<li><code><a title="backtest.engine.broker.BrokerState.export" href="broker.html#backtest.engine.broker.BrokerState.export">export</a></code></li>
<li><code><a title="backtest.engine.broker.BrokerState.load" href="broker.html#backtest.engine.broker.BrokerState.load">load</a></code></li>
</ul>
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.engine.broker.MarginCall%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.engine.broker.MarginCall%27%3E" onclick="navigateToUrl('broker.html#backtest.engine.broker.MarginCall')">
<code>MarginCall</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.engine.broker.MarginCall%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="">
<li><code><a title="backtest.engine.broker.MarginCall.export" href="broker.html#backtest.engine.broker.MarginCall.export">export</a></code></li>
<li><code><a title="backtest.engine.broker.MarginCall.load" href="broker.html#backtest.engine.broker.MarginCall.load">load</a></code></li>
</ul>
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.engine.broker.StepState%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.engine.broker.StepState%27%3E" onclick="navigateToUrl('broker.html#backtest.engine.broker.StepState')">
<code>StepState</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.engine.broker.StepState%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="">
<li><code><a title="backtest.engine.broker.StepState.export" href="broker.html#backtest.engine.broker.StepState.export">export</a></code></li>
<li><code><a title="backtest.engine.broker.StepState.load" href="broker.html#backtest.engine.broker.StepState.load">load</a></code></li>
</ul>
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.engine.cashController.CashControllerBase%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.engine.cashController.CashControllerBase%27%3E" onclick="navigateToUrl('cashController.html#backtest.engine.cashController.CashControllerBase')">
<code>CashControllerBase</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.engine.cashController.CashControllerBase%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="">
<li><code><a title="backtest.engine.cashController.CashControllerBase.every_day" href="cashController.html#backtest.engine.cashController.CashControllerBase.every_day">every_day</a></code></li>
<li><code><a title="backtest.engine.cashController.CashControllerBase.every_month" href="cashController.html#backtest.engine.cashController.CashControllerBase.every_month">every_month</a></code></li>
<li><code><a title="backtest.engine.cashController.CashControllerBase.every_week" href="cashController.html#backtest.engine.cashController.CashControllerBase.every_week">every_week</a></code></li>
<li><code><a title="backtest.engine.cashController.CashControllerBase.every_year" href="cashController.html#backtest.engine.cashController.CashControllerBase.every_year">every_year</a></code></li>
<li><code><a title="backtest.engine.cashController.CashControllerBase.init" href="cashController.html#backtest.engine.cashController.CashControllerBase.init">init</a></code></li>
</ul>
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.engine.cashController.SimpleCashController%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.engine.cashController.SimpleCashController%27%3E" onclick="navigateToUrl('cashController.html#backtest.engine.cashController.SimpleCashController')">
<code>SimpleCashController</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.engine.cashController.SimpleCashController%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.engine.metadata.Metadata%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.engine.metadata.Metadata%27%3E" onclick="navigateToUrl('metadata.html#backtest.engine.metadata.Metadata')">
<code>Metadata</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.engine.metadata.Metadata%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="two-column">
<li><code><a title="backtest.engine.metadata.Metadata.export" href="metadata.html#backtest.engine.metadata.Metadata.export">export</a></code></li>
<li><code><a title="backtest.engine.metadata.Metadata.get_git_author" href="metadata.html#backtest.engine.metadata.Metadata.get_git_author">get_git_author</a></code></li>
<li><code><a title="backtest.engine.metadata.Metadata.get_git_commit" href="metadata.html#backtest.engine.metadata.Metadata.get_git_commit">get_git_commit</a></code></li>
<li><code><a title="backtest.engine.metadata.Metadata.init" href="metadata.html#backtest.engine.metadata.Metadata.init">init</a></code></li>
<li><code><a title="backtest.engine.metadata.Metadata.load" href="metadata.html#backtest.engine.metadata.Metadata.load">load</a></code></li>
<li><code><a title="backtest.engine.metadata.Metadata.load_code" href="metadata.html#backtest.engine.metadata.Metadata.load_code">load_code</a></code></li>
</ul>
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.engine.portfolio.Portfolio%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.engine.portfolio.Portfolio%27%3E" onclick="navigateToUrl('portfolio.html#backtest.engine.portfolio.Portfolio')">
<code>Portfolio</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.engine.portfolio.Portfolio%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="">
<li><code><a title="backtest.engine.portfolio.Portfolio.empty" href="portfolio.html#backtest.engine.portfolio.Portfolio.empty">empty</a></code></li>
<li><code><a title="backtest.engine.portfolio.Portfolio.estimateCost" href="portfolio.html#backtest.engine.portfolio.Portfolio.estimateCost">estimateCost</a></code></li>
<li><code><a title="backtest.engine.portfolio.Portfolio.getLong" href="portfolio.html#backtest.engine.portfolio.Portfolio.getLong">getLong</a></code></li>
<li><code><a title="backtest.engine.portfolio.Portfolio.getLongProfit" href="portfolio.html#backtest.engine.portfolio.Portfolio.getLongProfit">getLongProfit</a></code></li>
<li><code><a title="backtest.engine.portfolio.Portfolio.getShort" href="portfolio.html#backtest.engine.portfolio.Portfolio.getShort">getShort</a></code></li>
<li><code><a title="backtest.engine.portfolio.Portfolio.getShortProfit" href="portfolio.html#backtest.engine.portfolio.Portfolio.getShortProfit">getShortProfit</a></code></li>
<li><code><a title="backtest.engine.portfolio.Portfolio.get_state" href="portfolio.html#backtest.engine.portfolio.Portfolio.get_state">get_state</a></code></li>
<li><code><a title="backtest.engine.portfolio.Portfolio.get_trade_count" href="portfolio.html#backtest.engine.portfolio.Portfolio.get_trade_count">get_trade_count</a></code></li>
<li><code><a title="backtest.engine.portfolio.Portfolio.get_trade_stats" href="portfolio.html#backtest.engine.portfolio.Portfolio.get_trade_stats">get_trade_stats</a></code></li>
<li><code><a title="backtest.engine.portfolio.Portfolio.get_trades" href="portfolio.html#backtest.engine.portfolio.Portfolio.get_trades">get_trades</a></code></li>
<li><code><a title="backtest.engine.portfolio.Portfolio.load_state" href="portfolio.html#backtest.engine.portfolio.Portfolio.load_state">load_state</a></code></li>
<li><code><a title="backtest.engine.portfolio.Portfolio.long" href="portfolio.html#backtest.engine.portfolio.Portfolio.long">long</a></code></li>
<li><code><a title="backtest.engine.portfolio.Portfolio.short" href="portfolio.html#backtest.engine.portfolio.Portfolio.short">short</a></code></li>
<li><code><a title="backtest.engine.portfolio.Portfolio.split" href="portfolio.html#backtest.engine.portfolio.Portfolio.split">split</a></code></li>
<li><code><a title="backtest.engine.portfolio.Portfolio.trade" href="portfolio.html#backtest.engine.portfolio.Portfolio.trade">trade</a></code></li>
<li><code><a title="backtest.engine.portfolio.Portfolio.update_time_stock_idx" href="portfolio.html#backtest.engine.portfolio.Portfolio.update_time_stock_idx">update_time_stock_idx</a></code></li>
</ul>
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.engine.portfolio.Position%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.engine.portfolio.Position%27%3E" onclick="navigateToUrl('portfolio.html#backtest.engine.portfolio.Position')">
<code>Position</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.engine.portfolio.Position%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="">
<li><code><a title="backtest.engine.portfolio.Position.dividends_got_paid" href="portfolio.html#backtest.engine.portfolio.Position.dividends_got_paid">dividends_got_paid</a></code></li>
<li><code><a title="backtest.engine.portfolio.Position.export" href="portfolio.html#backtest.engine.portfolio.Position.export">export</a></code></li>
<li><code><a title="backtest.engine.portfolio.Position.load" href="portfolio.html#backtest.engine.portfolio.Position.load">load</a></code></li>
<li><code><a title="backtest.engine.portfolio.Position.split" href="portfolio.html#backtest.engine.portfolio.Position.split">split</a></code></li>
<li><code><a title="backtest.engine.portfolio.Position.update_time_stock_idx" href="portfolio.html#backtest.engine.portfolio.Position.update_time_stock_idx">update_time_stock_idx</a></code></li>
</ul>
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.engine.portfolio.TradeStats%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.engine.portfolio.TradeStats%27%3E" onclick="navigateToUrl('portfolio.html#backtest.engine.portfolio.TradeStats')">
<code>TradeStats</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.engine.portfolio.TradeStats%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="">
<li><code><a title="backtest.engine.portfolio.TradeStats.export" href="portfolio.html#backtest.engine.portfolio.TradeStats.export">export</a></code></li>
<li><code><a title="backtest.engine.portfolio.TradeStats.load" href="portfolio.html#backtest.engine.portfolio.TradeStats.load">load</a></code></li>
</ul>
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.engine.record.Record%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.engine.record.Record%27%3E" onclick="navigateToUrl('record.html#backtest.engine.record.Record')">
<code>Record</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.engine.record.Record%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="">
<li><code><a title="backtest.engine.record.Record.next_tick" href="record.html#backtest.engine.record.Record.next_tick">next_tick</a></code></li>
</ul>
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.engine.record.Records%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.engine.record.Records%27%3E" onclick="navigateToUrl('record.html#backtest.engine.record.Records')">
<code>Records</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.engine.record.Records%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="">
<li><code><a title="backtest.engine.record.Records.numpy" href="record.html#backtest.engine.record.Records.numpy">numpy</a></code></li>
<li><code><a title="backtest.engine.record.Records.to_list" href="record.html#backtest.engine.record.Records.to_list">to_list</a></code></li>
<li><code><a title="backtest.engine.record.Records.update_features" href="record.html#backtest.engine.record.Records.update_features">update_features</a></code></li>
</ul>
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.engine.record.RecordsBucket%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.engine.record.RecordsBucket%27%3E" onclick="navigateToUrl('record.html#backtest.engine.record.RecordsBucket')">
<code>RecordsBucket</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.engine.record.RecordsBucket%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="">
<li><code><a title="backtest.engine.record.RecordsBucket.main" href="record.html#backtest.engine.record.RecordsBucket.main">main</a></code></li>
</ul>
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.engine.strategy.Strategy%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.engine.strategy.Strategy%27%3E" onclick="navigateToUrl('strategy.html#backtest.engine.strategy.Strategy')">
<code>Strategy</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.engine.strategy.Strategy%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="">
<li><code><a title="backtest.engine.strategy.Strategy.init" href="strategy.html#backtest.engine.strategy.Strategy.init">init</a></code></li>
<li><code><a title="backtest.engine.strategy.Strategy.load" href="strategy.html#backtest.engine.strategy.Strategy.load">load</a></code></li>
<li><code><a title="backtest.engine.strategy.Strategy.run" href="strategy.html#backtest.engine.strategy.Strategy.run">run</a></code></li>
<li><code><a title="backtest.engine.strategy.Strategy.save" href="strategy.html#backtest.engine.strategy.Strategy.save">save</a></code></li>
</ul>
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.engine.time_resolution_extenders.BasicExtender%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.engine.time_resolution_extenders.BasicExtender%27%3E" onclick="navigateToUrl('time_resolution_extenders.html#backtest.engine.time_resolution_extenders.BasicExtender')">
<code>BasicExtender</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.engine.time_resolution_extenders.BasicExtender%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.engine.time_resolution_extenders.TimePeriod%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.engine.time_resolution_extenders.TimePeriod%27%3E" onclick="navigateToUrl('time_resolution_extenders.html#backtest.engine.time_resolution_extenders.TimePeriod')">
<code>TimePeriod</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.engine.time_resolution_extenders.TimePeriod%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="two-column">
<li><code><a title="backtest.engine.time_resolution_extenders.TimePeriod.FOUR_HOURS" href="time_resolution_extenders.html#backtest.engine.time_resolution_extenders.TimePeriod.FOUR_HOURS">FOUR_HOURS</a></code></li>
<li><code><a title="backtest.engine.time_resolution_extenders.TimePeriod.ONE_DAY" href="time_resolution_extenders.html#backtest.engine.time_resolution_extenders.TimePeriod.ONE_DAY">ONE_DAY</a></code></li>
<li><code><a title="backtest.engine.time_resolution_extenders.TimePeriod.ONE_HOUR" href="time_resolution_extenders.html#backtest.engine.time_resolution_extenders.TimePeriod.ONE_HOUR">ONE_HOUR</a></code></li>
<li><code><a title="backtest.engine.time_resolution_extenders.TimePeriod.ONE_MONTH" href="time_resolution_extenders.html#backtest.engine.time_resolution_extenders.TimePeriod.ONE_MONTH">ONE_MONTH</a></code></li>
<li><code><a title="backtest.engine.time_resolution_extenders.TimePeriod.ONE_WEEK" href="time_resolution_extenders.html#backtest.engine.time_resolution_extenders.TimePeriod.ONE_WEEK">ONE_WEEK</a></code></li>
<li><code><a title="backtest.engine.time_resolution_extenders.TimePeriod.THIRTY_MINUTES" href="time_resolution_extenders.html#backtest.engine.time_resolution_extenders.TimePeriod.THIRTY_MINUTES">THIRTY_MINUTES</a></code></li>
</ul>
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.engine.time_resolution_extenders.TimeResExtender%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.engine.time_resolution_extenders.TimeResExtender%27%3E" onclick="navigateToUrl('time_resolution_extenders.html#backtest.engine.time_resolution_extenders.TimeResExtender')">
<code>TimeResExtender</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.engine.time_resolution_extenders.TimeResExtender%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="">
<li><code><a title="backtest.engine.time_resolution_extenders.TimeResExtender.extend" href="time_resolution_extenders.html#backtest.engine.time_resolution_extenders.TimeResExtender.extend">extend</a></code></li>
<li><code><a title="backtest.engine.time_resolution_extenders.TimeResExtender.single_extend" href="time_resolution_extenders.html#backtest.engine.time_resolution_extenders.TimeResExtender.single_extend">single_extend</a></code></li>
</ul>
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.engine.trade.Trade%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.engine.trade.Trade%27%3E" onclick="navigateToUrl('trade.html#backtest.engine.trade.Trade')">
<code>Trade</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.engine.trade.Trade%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="">
<li><code><a title="backtest.engine.trade.Trade.export" href="trade.html#backtest.engine.trade.Trade.export">export</a></code></li>
<li><code><a title="backtest.engine.trade.Trade.getCost" href="trade.html#backtest.engine.trade.Trade.getCost">getCost</a></code></li>
<li><code><a title="backtest.engine.trade.Trade.load" href="trade.html#backtest.engine.trade.Trade.load">load</a></code></li>
</ul>
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.engine.trade.TradeOrder%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.engine.trade.TradeOrder%27%3E" onclick="navigateToUrl('trade.html#backtest.engine.trade.TradeOrder')">
<code>TradeOrder</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.engine.trade.TradeOrder%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="">
<li><code><a title="backtest.engine.trade.TradeOrder.export" href="trade.html#backtest.engine.trade.TradeOrder.export">export</a></code></li>
<li><code><a title="backtest.engine.trade.TradeOrder.load" href="trade.html#backtest.engine.trade.TradeOrder.load">load</a></code></li>
</ul>
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.engine.trade.TradeType%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.engine.trade.TradeType%27%3E" onclick="navigateToUrl('trade.html#backtest.engine.trade.TradeType')">
<code>TradeType</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.engine.trade.TradeType%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="">
<li><code><a title="backtest.engine.trade.TradeType.BuyLong" href="trade.html#backtest.engine.trade.TradeType.BuyLong">BuyLong</a></code></li>
<li><code><a title="backtest.engine.trade.TradeType.BuyShort" href="trade.html#backtest.engine.trade.TradeType.BuyShort">BuyShort</a></code></li>
<li><code><a title="backtest.engine.trade.TradeType.SellLong" href="trade.html#backtest.engine.trade.TradeType.SellLong">SellLong</a></code></li>
<li><code><a title="backtest.engine.trade.TradeType.SellShort" href="trade.html#backtest.engine.trade.TradeType.SellShort">SellShort</a></code></li>
<li><code><a title="backtest.engine.trade.TradeType.available" href="trade.html#backtest.engine.trade.TradeType.available">available</a></code></li>
</ul>
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.engine.transaction.Transaction%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.engine.transaction.Transaction%27%3E" onclick="navigateToUrl('transaction.html#backtest.engine.transaction.Transaction')">
<code>Transaction</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.engine.transaction.Transaction%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="">
<li><code><a title="backtest.engine.transaction.Transaction.export" href="transaction.html#backtest.engine.transaction.Transaction.export">export</a></code></li>
<li><code><a title="backtest.engine.transaction.Transaction.load" href="transaction.html#backtest.engine.transaction.Transaction.load">load</a></code></li>
</ul>
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.engine.transaction.TransactionType%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.engine.transaction.TransactionType%27%3E" onclick="navigateToUrl('transaction.html#backtest.engine.transaction.TransactionType')">
<code>TransactionType</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.engine.transaction.TransactionType%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="">
<li><code><a title="backtest.engine.transaction.TransactionType.DEPOSIT" href="transaction.html#backtest.engine.transaction.TransactionType.DEPOSIT">DEPOSIT</a></code></li>
<li><code><a title="backtest.engine.transaction.TransactionType.WITHDRAWAL" href="transaction.html#backtest.engine.transaction.TransactionType.WITHDRAWAL">WITHDRAWAL</a></code></li>
<li><code><a title="backtest.engine.transaction.TransactionType.from_str" href="transaction.html#backtest.engine.transaction.TransactionType.from_str">from_str</a></code></li>
</ul>
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.engine.tsData.DividendFrequency%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.engine.tsData.DividendFrequency%27%3E" onclick="navigateToUrl('tsData.html#backtest.engine.tsData.DividendFrequency')">
<code>DividendFrequency</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.engine.tsData.DividendFrequency%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="two-column">
<li><code><a title="backtest.engine.tsData.DividendFrequency.BIANNUALLY" href="tsData.html#backtest.engine.tsData.DividendFrequency.BIANNUALLY">BIANNUALLY</a></code></li>
<li><code><a title="backtest.engine.tsData.DividendFrequency.MONTHLY" href="tsData.html#backtest.engine.tsData.DividendFrequency.MONTHLY">MONTHLY</a></code></li>
<li><code><a title="backtest.engine.tsData.DividendFrequency.NO_DIVIDENDS" href="tsData.html#backtest.engine.tsData.DividendFrequency.NO_DIVIDENDS">NO_DIVIDENDS</a></code></li>
<li><code><a title="backtest.engine.tsData.DividendFrequency.QUARTERLY" href="tsData.html#backtest.engine.tsData.DividendFrequency.QUARTERLY">QUARTERLY</a></code></li>
<li><code><a title="backtest.engine.tsData.DividendFrequency.YEARLY" href="tsData.html#backtest.engine.tsData.DividendFrequency.YEARLY">YEARLY</a></code></li>
<li><code><a title="backtest.engine.tsData.DividendFrequency.from_delta" href="tsData.html#backtest.engine.tsData.DividendFrequency.from_delta">from_delta</a></code></li>
<li><code><a title="backtest.engine.tsData.DividendFrequency.nearest" href="tsData.html#backtest.engine.tsData.DividendFrequency.nearest">nearest</a></code></li>
</ul>
</div>
</div>
</div>
</div>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<div id="footer_container">
<p><b>Author</b>: Anthony Lavertu (2024)</p>
<p><b>Generated by</b> <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</div>
</footer>
</body>
</html>
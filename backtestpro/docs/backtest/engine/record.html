<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<link rel="icon" type="image/x-icon" href="/backtestpro/assets/favicon.ico">
<link href='/backtestpro/assets/bootstrap.min.css' rel='stylesheet', type='text/css'>
<link href="/backtestpro/assets/style.css" rel="stylesheet" type="text/css">
<script src="/backtestpro/assets/bootstrap.min.js"></script>
<script>
function navigateToUrl(url) {
// Navigate to the URL
window.location.href = url;
}
</script>
<title>backtest.engine.record API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}#lunr-search{width:100%;font-size:1em;padding:6px 9px 5px 9px;border:1px solid silver}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right;margin-top:4em}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){.module-list{min-height:100vh}#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:80px}.content-container{min-height:100vh}#content{width:70%;max-width:100ch;padding:3em 4em;margin-top:20px;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<nav class="navbar navbar-light navbar-expand bg-light fixed-top shadow-sm" id="navbar-main">
<div class="navbar-container" style="padding-left: 20px">
<a class="navbar-brand logo" href="/backtestpro">
<img alt="Logo image" class="logo__image only-light" src="/backtestpro/assets/logo_light.svg">
</a>
<div class="col-lg-9 navbar">
<div class="mr-auto" id="navbar-center">
<div class="navbar-center-item">
<ul class="navbar-nav" id="navbar-main-elements">
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="/backtestpro">
Home
</a>
</li>
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="/backtestpro/get_started.html">
Get Started
</a>
</li>
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="/backtestpro/tutorials">
Tutorials
</a>
</li>
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link active" href="/backtestpro/docs/backtest">
Documentation
</a>
</li>
<li class="nav-item">
<a class="nav-link nav-external" href="/backtestpro/about.html">About</a>
</li>
</ul>
</div>
</div>
<div id="navbar-end">
<div class="navbar-end-item">
<code class="navbar-version">v0.1.0</code>
</div>
<div class="navbar-end-item">
<ul aria-label="Icon Links" class="navbar-nav" id="navbar-icon-links">
<li class="nav-item">
<a class="nav-link" href="https://github.com/anthol42/backtestPro" rel="noopener" target="_blank"
title="GitHub"><img alt="GitHub" class="icon-link" src="/backtestpro/assets/github-mark.svg"
style="height: 1.2em; margin: 0px; padding: 0px;"></a>
</li>
</ul>
</div>
</div>
</div>
</div>
</nav>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>engine</code></h1>
</header>
<div class="content-container">
<section id="section-intro">
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="backtest.engine.record.Record"><code class="flex name class">
<span>class <span class="ident">Record</span></span>
<span>(</span><span>chart: Optional[pandas.core.frame.DataFrame], ticker: str, time_res: int, marginable: bool, shortable: bool, div_freq: <a title="backtest.engine.tsData.DividendFrequency" href="tsData.html#backtest.engine.tsData.DividendFrequency">DividendFrequency</a>, short_rate: float, next_tick: Optional[pandas.core.series.Series] = None)</span>
</code></dt>
<dd>
<div class="desc"><p>This class contains information about a stock and is pass to the strategy.</p>
<h2 id="args">Args:</h2>
<p><strong><code>chart</code></strong>: The prepared chart of the stock<br>
<strong><code>ticker</code></strong>: The ticker of the stock<br>
<strong><code>time_res</code></strong>: The idx in the list of resolution of the backtest object of the time resolution of the record.<br>
<strong><code>marginable</code></strong>: Whether the stock is marginable<br>
<strong><code>shortable</code></strong>: Whether the stock is shortable<br>
<strong><code>div_freq</code></strong>: The dividend frequency of the stock<br>
<strong><code>short_rate</code></strong>: The short rate of the stock<br>
<strong><code>next_tick</code></strong>: The next tick of the stock
</p></div>
<h3>Instance variables</h3>
<dl>
<dt id="backtest.engine.record.Record.next_tick"><code class="name">var <span class="ident">next_tick</span></code></dt>
<dd>
<div class="desc"><p>This method is used to get the next tick of the stock.</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The next tick of the stock</dd>
</dl></div>
</dd>
</dl>
</dd>
<dt id="backtest.engine.record.Records"><code class="flex name class">
<span>class <span class="ident">Records</span></span>
<span>(</span><span>records: Union[List[<a title="backtest.engine.record.Record" href="#backtest.engine.record.Record">Record</a>], Dict[str, <a title="backtest.engine.record.Record" href="#backtest.engine.record.Record">Record</a>]], time_res: datetime.timedelta, time_res_idx: int, window: int)</span>
</code></dt>
<dd>
<div class="desc"><p>Class containing multiple records for a given time resolution.
You can access the record like a list with the
index of the record being the index of the ticker in the list of tickers.
You can also access the record by the
string of the ticker like a dictionary.
You can iterate over the records like a dictionary (ticker, record).
Finally, you can check if a ticker is in the records like a dictionary.</p>
<h2 id="attributes">Attributes</h2>
<dl>
<dt><strong><code>records</code></strong></dt>
<dd>The records.
The keys are the tickers of the securities.</dd>
<dt><strong><code>tickers</code></strong></dt>
<dd>The tickers of the securities in the same order as the records attribute.</dd>
<dt><strong><code>features</code></strong></dt>
<dd>The features of the records.
It is the columns of the charts.</dd>
<dt><strong><code>time_res</code></strong></dt>
<dd>The time resolution</dd>
<dt><strong><code>time_res_idx</code></strong></dt>
<dd>The index of the time resolution in the available_time_res attribute of the backtest object</dd>
<dt><strong><code>window</code></strong></dt>
<dd>The window size (lookback period) of the records.
Used when exporting to numpy.</dd>
</dl>
<h2 id="implements">Implements</h2>
<p><strong>getitem</strong>, <strong>setitem</strong>, <strong>iter</strong>, <strong>contains</strong></p>
<h2 id="args">Args:</h2>
<p><strong><code>records</code></strong>: The records.
If a list, it will be converted to a dictionary internally.
If a dictionary, the
keys will be the tickers of the securities.<br>
<strong><code>time_res</code></strong>: The time resolution<br>
<strong><code>time_res_idx</code></strong>: The index of the time resolution in the available_time_res attribute of the backtest object<br>
<strong><code>window</code></strong>: The window size (lookback period) of the records.
Used when exporting to numpy.
</p></div>
<h3>Methods</h3>
<dl>
<dt id="backtest.engine.record.Records.numpy"><code class="name flex">
<span>def <span class="ident">numpy</span></span>(<span>self) ‑> numpy.ndarray[typing.Any, numpy.dtype[numpy.float64]]</span>
</code></dt>
<dd>
<div class="desc"><p>This method will return the charts as a numpy array.
The array might contain nan values if the chart is not
long enough to fill the window.</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>A numpy array of the shape (n, w, p) where n is the number of securities, w is the window size and p is
the number of features.</dd>
</dl></div>
</dd>
<dt id="backtest.engine.record.Records.to_list"><code class="name flex">
<span>def <span class="ident">to_list</span></span>(<span>self) ‑> List[<a title="backtest.engine.record.Record" href="#backtest.engine.record.Record">Record</a>]</span>
</code></dt>
<dd>
<div class="desc"><p>Convert the Records object to a list of Record</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>A list of Record</dd>
</dl></div>
</dd>
<dt id="backtest.engine.record.Records.update_features"><code class="name flex">
<span>def <span class="ident">update_features</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>This method will update the features attribute to the new features set based on the columns of the charts.
Assuming all the charts have the same features.</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>None</dd>
</dl></div>
</dd>
</dl>
</dd>
<dt id="backtest.engine.record.RecordsBucket"><code class="flex name class">
<span>class <span class="ident">RecordsBucket</span></span>
<span>(</span><span>records: Union[List[<a title="backtest.engine.record.Records" href="#backtest.engine.record.Records">Records</a>], List[Iterable[<a title="backtest.engine.record.Record" href="#backtest.engine.record.Record">Record</a>]]], available_time_res: List[datetime.timedelta], main_timestep: int, window: Optional[int] = None)</span>
</code></dt>
<dd>
<div class="desc"><p>Class containing multiple Records objects for all time resolutions. You can access each Records object by their
corresponding time resolution or their index in the available_time_res attribute of the backtest object.
You can
also iterate over the Records objects like a dictionary (time resolution, Records object).
To simplify the access
of the Records object associated with the main time resolution, you can use the main attribute.</p>
<h2 id="attributes">Attributes</h2>
<dl>
<dt><strong><code>records</code></strong></dt>
<dd>The Records objects.
The keys are the time resolutions.</dd>
<dt><strong><code>available_time_res</code></strong></dt>
<dd>The available time resolutions</dd>
<dt><strong><code>main_timestep</code></strong></dt>
<dd>The index of the main time resolution in the available_time_res attribute of the backtest object</dd>
</dl>
<h2 id="args">Args:</h2>
<p><strong><code>records</code></strong>: The records<br>
<strong><code>available_time_res</code></strong>: The available time resolutions
</p></div>
<h3>Instance variables</h3>
<dl>
<dt id="backtest.engine.record.RecordsBucket.main"><code class="name">var <span class="ident">main</span> : <a title="backtest.engine.record.Records" href="#backtest.engine.record.Records">Records</a></code></dt>
<dd>
<div class="desc"><p>Get the main timestep set of records</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The main timestep set of records</dd>
</dl></div>
</dd>
</dl>
</dd>
</dl>
</section>
</div>
</article>
<nav id="sidebar">
<form>
<input id="lunr-search" name="q" placeholder="🔎 Search ..." aria-label="Search"
disabled minlength="2">
</form>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/tingle/0.15.3/tingle.min.css" integrity="sha512-j1u8eUJ4f23xPPxwOrLUPQaCD2dwzNqqmDDcWS4deWsMv2ohLqmXXuP3hU7g8TyzbMSakP/mMqoNBYWj8AEIFg==" crossorigin>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tingle/0.15.3/tingle.min.js" integrity="sha512-plGUER9JkeEWPPqQBE4sdLqBoQug5Ap+BCGMc7bJ8BXkm+VVj6QzkpBz5Yv2yPkkq+cqg9IpkBaGCas6uDbW8g==" crossorigin></script>
<style>
.modal-box iframe {
width: 100vw;
height: calc(100vh - 80px);
}
@media screen and (min-width: 700px) {
.modal-box iframe {
width: 70vw;
height: 80vh;
}
}
.modal-box .tingle-modal-box {width: auto;}
.modal-box .tingle-modal-box__content {padding: 0;}
</style>
<script>
const input = document.getElementById('lunr-search');
input.disabled = false;
input.form.addEventListener('submit', (ev) => {
ev.preventDefault();
const url = new URL(window.location);
url.searchParams.set('q', input.value);
history.replaceState({}, null, url.toString());
search(input.value);
});
const query = new URL(window.location).searchParams.get('q');
if (query)
search(query);
function search(query) {
const url = '../../doc-search.html#' + encodeURIComponent(query);
new tingle.modal({
cssClass: ['modal-box'],
onClose: () => {
const url = new URL(window.location);
url.searchParams.delete('q');
history.replaceState({}, null, url.toString());
setTimeout(() => input.focus(), 100);
}
}).setContent('<div class="embed-responsive embed-responsive-16by9"><iframe class="embed-responsive-item" src="' + url + '"></iframe></div>').open();
}
</script>
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Path</h3>
<ul>
<li><code><div><a title="backtest" href="../index.html">backtest</a>.<a title="backtest.engine" href="index.html">engine</a>.<a title="backtest.engine.record" href="#backtest.engine.record">record</a></div></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<div class="accordion" id="classes-accordion">
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.engine.record.Record%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.engine.record.Record%27%3E" onclick="navigateToUrl('#backtest.engine.record.Record')">
<code>Record</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.engine.record.Record%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="">
<li><code><a title="backtest.engine.record.Record.next_tick" href="#backtest.engine.record.Record.next_tick">next_tick</a></code></li>
</ul>
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.engine.record.Records%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.engine.record.Records%27%3E" onclick="navigateToUrl('#backtest.engine.record.Records')">
<code>Records</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.engine.record.Records%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="">
<li><code><a title="backtest.engine.record.Records.numpy" href="#backtest.engine.record.Records.numpy">numpy</a></code></li>
<li><code><a title="backtest.engine.record.Records.to_list" href="#backtest.engine.record.Records.to_list">to_list</a></code></li>
<li><code><a title="backtest.engine.record.Records.update_features" href="#backtest.engine.record.Records.update_features">update_features</a></code></li>
</ul>
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.engine.record.RecordsBucket%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.engine.record.RecordsBucket%27%3E" onclick="navigateToUrl('#backtest.engine.record.RecordsBucket')">
<code>RecordsBucket</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.engine.record.RecordsBucket%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="">
<li><code><a title="backtest.engine.record.RecordsBucket.main" href="#backtest.engine.record.RecordsBucket.main">main</a></code></li>
</ul>
</div>
</div>
</div>
</div>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<div id="footer_container">
<p><b>Author</b>: Anthony Lavertu (2024)</p>
<p><b>Generated by</b> <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</div>
</footer>
</body>
</html>
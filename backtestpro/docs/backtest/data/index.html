<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<link rel="icon" type="image/x-icon" href="/backtestpro/assets/favicon.ico">
<link href='/backtestpro/assets/bootstrap.min.css' rel='stylesheet', type='text/css'>
<link href="/backtestpro/assets/style.css" rel="stylesheet" type="text/css">
<script src="/backtestpro/assets/bootstrap.min.js"></script>
<script>
function navigateToUrl(url) {
// Navigate to the URL
window.location.href = url;
}
</script>
<title>backtest.data API documentation</title>
<meta name="description" content="Module to manage complex data pipelines." />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}#lunr-search{width:100%;font-size:1em;padding:6px 9px 5px 9px;border:1px solid silver}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right;margin-top:4em}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){.module-list{min-height:100vh}#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:80px}.content-container{min-height:100vh}#content{width:70%;max-width:100ch;padding:3em 4em;margin-top:20px;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<nav class="navbar navbar-light navbar-expand bg-light fixed-top shadow-sm" id="navbar-main">
<div class="navbar-container" style="padding-left: 20px">
<a class="navbar-brand logo" href="/backtestpro">
<img alt="Logo image" class="logo__image only-light" src="/backtestpro/assets/logo_light.svg">
</a>
<div class="col-lg-9 navbar">
<div class="mr-auto" id="navbar-center">
<div class="navbar-center-item">
<ul class="navbar-nav" id="navbar-main-elements">
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="/backtestpro">
Home
</a>
</li>
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="/backtestpro/get_started.html">
Get Started
</a>
</li>
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="/backtestpro/tutorials">
Tutorials
</a>
</li>
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link active" href="/backtestpro/docs/backtest">
Documentation
</a>
</li>
<li class="nav-item">
<a class="nav-link nav-external" href="/backtestpro/about.html">About</a>
</li>
</ul>
</div>
</div>
<div id="navbar-end">
<div class="navbar-end-item">
<code class="navbar-version">v0.1.0</code>
</div>
<div class="navbar-end-item">
<ul aria-label="Icon Links" class="navbar-nav" id="navbar-icon-links">
<li class="nav-item">
<a class="nav-link" href="https://github.com/anthol42/backtestPro" rel="noopener" target="_blank"
title="GitHub"><img alt="GitHub" class="icon-link" src="/backtestpro/assets/github-mark.svg"
style="height: 1.2em; margin: 0px; padding: 0px;"></a>
</li>
</ul>
</div>
</div>
</div>
</div>
</nav>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>data</code></h1>
</header>
<div class="content-container">
<section id="section-intro">
<p>Module to manage complex data pipelines.</p>
</section>
<section>
<h2 class="section-title" id="header-submodules">Sub-modules</h2>
<dl>
<dt><code class="name"><a title="backtest.data.datapipe" href="datapipe.html">backtest.data.datapipe</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt><code class="name"><a title="backtest.data.json_extension" href="json_extension.html">backtest.data.json_extension</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt><code class="name"><a title="backtest.data.pipes" href="pipes.html">backtest.data.pipes</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt><code class="name"><a title="backtest.data.utils" href="utils.html">backtest.data.utils</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="backtest.data.utils.CausalImpute"><code class="name flex">
<span>def <span class="ident">CausalImpute</span></span>(<span>frm: datetime.datetime, to: datetime.datetime, *args, po: <a title="backtest.data.datapipe.PipeOutput" href="datapipe.html#backtest.data.datapipe.PipeOutput">PipeOutput</a>[typing.Dict[str, pandas.core.frame.DataFrame]], **kwargs) ‑> Dict[str, pandas.core.frame.DataFrame]</span>
</code></dt>
<dd>
<div class="desc"><p>This pipe will impute the missing values in the time series data using the causal imputation method. (It will copy
the last time step value to the missing values)</p>
<h2 id="example">Example</h2>
<p>a = [1, 2, 3, nan, 5, 6, nan, 8, 9]
causal_impute(a) -&gt; [1, 2, 3, 3, 5, 6, 6, 8, 9]</p>
<p><strong>IN: dict[str, pd.Dataframe]</strong> where the values are the charts as Dataframe and the keys are the tickers</p>
<p><strong>OUT: dict[str, TSData]</strong> where the values are the TSData and the keys are the tickers</p>
<h2 id="args">Args:</h2>
<p><strong><code>frm</code></strong>: From datetime<br>
<strong><code>to</code></strong>: to datetime<br>
<strong><code>args</code></strong>: Args passed to the pipe<br>
<strong><code>po</code></strong>: Previous Pipe output<br>
<strong><code>kwargs</code></strong>: The keyword arguments passed to the pipe
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>pd.DataFrame</dd>
</dl></div>
</dd>
<dt id="backtest.data.utils.FilterNoneCharts"><code class="name flex">
<span>def <span class="ident">FilterNoneCharts</span></span>(<span>frm: datetime.datetime, to: datetime.datetime, *args, po: <a title="backtest.data.datapipe.PipeOutput" href="datapipe.html#backtest.data.datapipe.PipeOutput">PipeOutput</a>[typing.Dict[str, Optional[pandas.core.frame.DataFrame]]], **kwargs) ‑> Dict[str, pandas.core.frame.DataFrame]</span>
</code></dt>
<dd>
<div class="desc"><p>This pipe will filter out the tickers that doesn't have a chart.
(Chart is None)</p>
<p><strong>IN: dict[str, Optional[pd.DataFrame]]</strong> where the values are the charts and the keys are the tickers</p>
<p><strong>OUT: dict[str, pd.DataFrame]</strong> where the values are the charts and the keys are the tickers</p>
<h2 id="args">Args:</h2>
<p><strong><code>frm</code></strong>: From datetime<br>
<strong><code>to</code></strong>: to datetime<br>
<strong><code>args</code></strong>: Args passed to the pipe<br>
<strong><code>po</code></strong>: Previous Pipe output<br>
<strong><code>kwargs</code></strong>: The keyword arguments passed to the pipe
</p>
<h2 id="returns">Returns:</h2>
<p>:</p></div>
</dd>
<dt id="backtest.data.utils.PadNan"><code class="name flex">
<span>def <span class="ident">PadNan</span></span>(<span>frm: datetime.datetime, to: datetime.datetime, *args, po: <a title="backtest.data.datapipe.PipeOutput" href="datapipe.html#backtest.data.datapipe.PipeOutput">PipeOutput</a>[typing.Dict[str, Optional[pandas.core.frame.DataFrame]]], **kwargs) ‑> Dict[str, Optional[pandas.core.frame.DataFrame]]</span>
</code></dt>
<dd>
<div class="desc"><p>This pipe will pad the charts (dataframes) with NaNs.
It will reindex them with the longest index found in the
data.
The index will be the same for all the charts.</p>
<p><strong>IN: dict[str, Optional[pd.DataFrame]]</strong> where the values are the charts and the keys are the tickers</p>
<p><strong>OUT: dict[str, pd.DataFrame]</strong> where the values are the charts and the keys are the tickers, but the charts are
all the same length, and padded with Nans.</p>
<h2 id="args">Args:</h2>
<p><strong><code>frm</code></strong>: From datetime<br>
<strong><code>to</code></strong>: to datetime<br>
<strong><code>args</code></strong>: Args passed to the pipe<br>
<strong><code>po</code></strong>: Previous Pipe output. Must be a dictionary of charts (ticker, pd.DataFrame)<br>
<strong><code>kwargs</code></strong>: The keyword arguments passed to the pipe
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>pd.DataFrame</dd>
</dl></div>
</dd>
<dt id="backtest.data.utils.ToTSData"><code class="name flex">
<span>def <span class="ident">ToTSData</span></span>(<span>frm: datetime.datetime, to: datetime.datetime, *args, po: <a title="backtest.data.datapipe.PipeOutput" href="datapipe.html#backtest.data.datapipe.PipeOutput">PipeOutput</a>[typing.Dict[str, pandas.core.frame.DataFrame]], **kwargs) ‑> List[Dict[str, <a title="backtest.engine.tsData.TSData" href="../engine/tsData.html#backtest.engine.tsData.TSData">TSData</a>]]</span>
</code></dt>
<dd>
<div class="desc"><p>This pipe will convert the charts into a time series object (TSData).</p>
<p><strong>IN: dict[str, pd.DataFrame]</strong> where the values are the charts and the keys are the tickers</p>
<p><strong>OUT: list[dict[str, TSData]]</strong> where the values are the TSData and the keys are the tickers (len of list = 1)</p>
<h2 id="args">Args:</h2>
<p><strong><code>frm</code></strong>: From datetime<br>
<strong><code>to</code></strong>: to datetime<br>
<strong><code>args</code></strong>: Args passed to the pipe<br>
<strong><code>po</code></strong>: Previous Pipe output<br>
<strong><code>kwargs</code></strong>: The keyword arguments passed to the pipe
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>pd.DataFrame</dd>
</dl></div>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="backtest.data.datapipe.CacheObject"><code class="flex name class">
<span>class <span class="ident">CacheObject</span></span>
<span>(</span><span>value: Any, pipe_id: int, pipe_hash: str, next_revalidate: Optional[datetime.datetime] = None, max_request: Optional[int] = None, current_n_requests: int = 0)</span>
</code></dt>
<dd>
<div class="desc"><p>This class holds a the output of a pipe and some metadata to be able to revalidate the cache.</p>
<h2 id="args">Args:</h2>
<p><strong><code>value</code></strong>: The output of the pipe<br>
<strong><code>pipe_id</code></strong>: The pipe_id of the pipe that generated the cache<br>
<strong><code>pipe_hash</code></strong>: Used to check if the pipe structure has changed<br>
<strong><code>next_revalidate</code></strong>: The next time the cache should be revalidated<br>
<strong><code>max_request</code></strong>: The maximum number of requests that can be made before revalidating the cache<br>
<strong><code>current_n_requests</code></strong>: The current number of requests made to the cache
</p></div>
<h3>Static methods</h3>
<dl>
<dt id="backtest.data.datapipe.CacheObject.load"><code class="name flex">
<span>def <span class="ident">load</span></span>(<span>pipe_id: int) ‑> <a title="backtest.data.datapipe.CacheObject" href="datapipe.html#backtest.data.datapipe.CacheObject">CacheObject</a></span>
</code></dt>
<dd>
<div class="desc"><p>Call this method to load a cache from the .cache folder.</p>
<h2 id="args">Args:</h2>
<p><strong><code>pipe_id</code></strong>: The pipe_id that stored the cache
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The cache object if it exists else None.
(This function doesn't check if the cache valid)</dd>
</dl></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="backtest.data.datapipe.CacheObject.store"><code class="name flex">
<span>def <span class="ident">store</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Call this method to store the cache to the .cache folder.
The cache file has the pipe_id as its name.
This
is why it is strongly recommended to delete the .cache folder when changing the pipeline structure, to avoid
unexpected behavior.</p></div>
</dd>
</dl>
</dd>
<dt id="backtest.data.datapipe.DataPipe"><code class="flex name class">
<span>class <span class="ident">DataPipe</span></span>
<span>(</span><span>T: <a title="backtest.data.datapipe.DataPipeType" href="datapipe.html#backtest.data.datapipe.DataPipeType">DataPipeType</a>, name: Optional[str] = None)</span>
</code></dt>
<dd>
<div class="desc"><p>The base element of the data module api.
This object can represent the four types of pipes (Fetch, Process, Cache,
and Collate).
It is a recursive object that can be used to build complex pipelines.
The pipeline is built using
the pipe operator (|).
Once the pipeline is built, it is run by calling the get method.
To make custom pipes, you need to inherit from this class and implement one of the three methods (fetch, process,
collate). If you want to implement a cache pipe, you need to implement the load, cache and revalidate methods.
Do not forget to call the super().<strong>init</strong> method in the <strong>init</strong> method of your custom pipe and pass the
appropriate DataPipeType.
You can also pass a name to the pipe to make the pipeline more readable.</p>
<h2 id="args">Args:</h2>
<p><strong><code>T</code></strong>: The pipe type (Fetch, Process, Cache, Collate)<br>
<strong><code>name</code></strong>: The pipe name.
If None, the name of the class is used
</p></div>
<h3>Parent</h3>
<ul class="hlist">
<li>abc.ABC</li>
</ul>
<h3>Static methods</h3>
<dl>
<dt id="backtest.data.datapipe.DataPipe.Collate"><code class="name flex">
<span>def <span class="ident">Collate</span></span>(<span>pipe1: <a title="backtest.data.datapipe.DataPipe" href="datapipe.html#backtest.data.datapipe.DataPipe">DataPipe</a>, pipe2: <a title="backtest.data.datapipe.DataPipe" href="datapipe.html#backtest.data.datapipe.DataPipe">DataPipe</a>) ‑> <a title="backtest.data.datapipe.DataPipe" href="datapipe.html#backtest.data.datapipe.DataPipe">DataPipe</a></span>
</code></dt>
<dd>
<div class="desc"><p>This method is used to build a collate pipe from two pipes.
It is used top merge two branches of a pipeline.</p>
<h2 id="args">Args:</h2>
<p><strong><code>pipe1</code></strong>: The first pipeline (or pipe if there is only one)<br>
<strong><code>pipe2</code></strong>: The second pipeline (or pipe if there is only one)
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>A new pipe that is the result of the concatenation of the two pipes.
(Multiple pipes makes a pipeline)</dd>
</dl></div>
</dd>
</dl>
<h3>Instance variables</h3>
<dl>
<dt id="backtest.data.datapipe.DataPipe.pipe_id"><code class="name">var <span class="ident">pipe_id</span> : int</code></dt>
<dd>
<div class="desc"><p>Get the pipe_id (Identifier unique to each pipe in the pipeline).
It is given at built time and is deterministic.
This means that each time the pipeline is built, the pipe_id will be the same for each pipe, given that the
pipeline structure is the same.</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The pipe_id</dd>
</dl></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="backtest.data.datapipe.DataPipe.cache"><code class="name flex">
<span>def <span class="ident">cache</span></span>(<span>self, frm: datetime.datetime, to: datetime.datetime, *args, po: <a title="backtest.data.datapipe.PipeOutput" href="datapipe.html#backtest.data.datapipe.PipeOutput">PipeOutput</a>[typing.Any], **kwargs) ‑> None</span>
</code></dt>
<dd>
<div class="desc"><p>This method is called to cache the output of the pipeline.
It is called by the _run method when the pipe is a
cache pipe.</p>
<h2 id="args">Args:</h2>
<p><strong><code>frm</code></strong>: From datetime<br>
<strong><code>to</code></strong>: To datetime<br>
<strong><code>args</code></strong>: Any args passed to the get method<br>
<strong><code>po</code></strong>: The pipe output of the previous pipe<br>
<strong><code>kwargs</code></strong>: Any keyword args passed to the get method
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>None</dd>
</dl></div>
</dd>
<dt id="backtest.data.datapipe.DataPipe.collate"><code class="name flex">
<span>def <span class="ident">collate</span></span>(<span>self, frm: datetime.datetime, to: datetime.datetime, *args, po1: <a title="backtest.data.datapipe.PipeOutput" href="datapipe.html#backtest.data.datapipe.PipeOutput">PipeOutput</a>[typing.Any], po2: <a title="backtest.data.datapipe.PipeOutput" href="datapipe.html#backtest.data.datapipe.PipeOutput">PipeOutput</a>[typing.Any], **kwargs) ‑> <a title="backtest.data.datapipe.PipeOutput" href="datapipe.html#backtest.data.datapipe.PipeOutput">PipeOutput</a></span>
</code></dt>
<dd>
<div class="desc"><p>This method is called to merge the output of two pipes.
It is called by the _run method when the pipe is a
collate pipe.</p>
<h2 id="args">Args:</h2>
<p><strong><code>frm</code></strong>: From datetime<br>
<strong><code>to</code></strong>: To datetime<br>
<strong><code>args</code></strong>: any args passed to the get method<br>
<strong><code>po1</code></strong>: The output of the first pipeline (left)<br>
<strong><code>po2</code></strong>: The output of the second pipeline (right)<br>
<strong><code>kwargs</code></strong>: Any keyword args passed to the get method
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>A pipe output object that holds the output of the pipe and some metadata</dd>
</dl></div>
</dd>
<dt id="backtest.data.datapipe.DataPipe.fetch"><code class="name flex">
<span>def <span class="ident">fetch</span></span>(<span>self, frm: datetime.datetime, to: datetime.datetime, *args, po: Optional[<a title="backtest.data.datapipe.PipeOutput" href="datapipe.html#backtest.data.datapipe.PipeOutput">PipeOutput</a>[typing.Any]], **kwargs) ‑> <a title="backtest.data.datapipe.PipeOutput" href="datapipe.html#backtest.data.datapipe.PipeOutput">PipeOutput</a></span>
</code></dt>
<dd>
<div class="desc"><p>This method is called to fetch the data from an external source.
It is called by the _run method when the pipe
is a fetch pipe.</p>
<h2 id="args">Args:</h2>
<p><strong><code>frm</code></strong>: From datetime<br>
<strong><code>to</code></strong>: To datetime<br>
<strong><code>args</code></strong>: Any args passed to the get method<br>
<strong><code>po</code></strong>: The pipe output of the previous pipe<br>
<strong><code>kwargs</code></strong>: Any keyword args passed to the get method
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>A pipe output object that holds the output of the pipe and some metadata</dd>
</dl></div>
</dd>
<dt id="backtest.data.datapipe.DataPipe.get"><code class="name flex">
<span>def <span class="ident">get</span></span>(<span>self, frm: datetime.datetime, to: datetime.datetime, *args, **kwargs) ‑> Any</span>
</code></dt>
<dd>
<div class="desc"><p>Run the pipeline from the beginning to the end and return the output of the pipeline.</p>
<h2 id="args">Args:</h2>
<p><strong><code>frm</code></strong>: From datetime, this is passed to all pipes and is used to fetch the data from this date to the 'to'date.<br>
<strong><code>to</code></strong>: The end datetime, this is passed to all pipes and is used to fetch the data from the 'frm' date tothis date.<br>
<strong><code>args</code></strong>: any args that needs to be passed to the subsequent pipes<br>
<strong><code>kwargs</code></strong>: any keyword args that needs to be passed to the subsequent pipes
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The output of the pipeline</dd>
</dl></div>
</dd>
<dt id="backtest.data.datapipe.DataPipe.hash"><code class="name flex">
<span>def <span class="ident">hash</span></span>(<span>self) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>Make a hash that is consistent across runs and is deterministic given the object.</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The hash.</dd>
</dl></div>
</dd>
<dt id="backtest.data.datapipe.DataPipe.load"><code class="name flex">
<span>def <span class="ident">load</span></span>(<span>self) ‑> Optional[<a title="backtest.data.datapipe.CacheObject" href="datapipe.html#backtest.data.datapipe.CacheObject">CacheObject</a>]</span>
</code></dt>
<dd>
<div class="desc"><p>This method is called to load the cache from the disk.
It is called by the _load_cache method when the pipe is
a cache pipe.
It will return the loaded cache object if found.
Otherwise, it will return None.</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>CacheObject if found else None</dd>
</dl></div>
</dd>
<dt id="backtest.data.datapipe.DataPipe.process"><code class="name flex">
<span>def <span class="ident">process</span></span>(<span>self, frm: datetime.datetime, to: datetime.datetime, *args, po: <a title="backtest.data.datapipe.PipeOutput" href="datapipe.html#backtest.data.datapipe.PipeOutput">PipeOutput</a>[typing.Any], **kwargs) ‑> <a title="backtest.data.datapipe.PipeOutput" href="datapipe.html#backtest.data.datapipe.PipeOutput">PipeOutput</a></span>
</code></dt>
<dd>
<div class="desc"><p>This method is called to process and transform the data.
It is called by the _run method when the pipe is a
process pipe.</p>
<h2 id="args">Args:</h2>
<p><strong><code>frm</code></strong>: From datetime<br>
<strong><code>to</code></strong>: To datetime<br>
<strong><code>args</code></strong>: Any args passed to the get method<br>
<strong><code>po</code></strong>: The pipe output of the previous pipe<br>
<strong><code>kwargs</code></strong>: Any keyword args passed to the get method
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>A pipe output object that holds the output of the pipe and some metadata</dd>
</dl></div>
</dd>
<dt id="backtest.data.datapipe.DataPipe.render"><code class="name flex">
<span>def <span class="ident">render</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>This method is used to render the pipeline as a string.
It renders the pipe structure as a tree with each node
being the name of the pipe.
It is used by the <strong>str</strong> method to render the pipeline as a tree.</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The rendered pipeline as a string</dd>
</dl></div>
</dd>
<dt id="backtest.data.datapipe.DataPipe.revalidate"><code class="name flex">
<span>def <span class="ident">revalidate</span></span>(<span>self, frm: datetime.datetime, to: datetime.datetime, *args, po: <a title="backtest.data.datapipe.PipeOutput" href="datapipe.html#backtest.data.datapipe.PipeOutput">PipeOutput</a>, **kwargs) ‑> <a title="backtest.data.datapipe.RevalidateAction" href="datapipe.html#backtest.data.datapipe.RevalidateAction">RevalidateAction</a></span>
</code></dt>
<dd>
<div class="desc"><p>This method is called to revalidate the cache.
It is called by the _run method when the pipe is a cache pipe.</p>
<h2 id="args">Args:</h2>
<p><strong><code>frm</code></strong>: From datetime<br>
<strong><code>to</code></strong>: To datetime<br>
<strong><code>args</code></strong>: Any args passed to the get method<br>
<strong><code>po</code></strong>: The pipe output of the previous pipe<br>
<strong><code>kwargs</code></strong>: Any keyword args passed to the get method
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>A pipe output object that holds the output of the pipe and some metadata</dd>
</dl></div>
</dd>
<dt id="backtest.data.datapipe.DataPipe.set_id"><code class="name flex">
<span>def <span class="ident">set_id</span></span>(<span>self, pipe_id: int)</span>
</code></dt>
<dd>
<div class="desc"><p>With this method, it is possible to manually set the pipe_id of the pipe.
It is recommended to call this method
only on the top-level pipes, and before running the pipeline with get.
If the pipe is not the top-level pipe,
its pipe_id may change, and you might run in unexpected behaviors.
By running this method only before running
the get method, this ensures that the pipe will have the same pipe_id if the pipeline structure is the same.
This is due to the fact that pipe_ids are dynamically assigned at build time.
However, when the pipe is run,
the pipe becomes forged and no changes are allowed.
This ensures that the pipe ids stays the same.
When this method is called, it acts as if the pipe was run, and the pipe_ids are frozen.
This means that the
ids aren't verified.
Make sure that the pipe_id given are unique to avoid conflicts.
Note: The passed pipe_id will be assigned to the lowes-level pipe.
The current pipe will have the highest
pipe_id</p>
<h2 id="args">Args:</h2>
<p><strong><code>pipe_id</code></strong>: The pipe_id to assign to the pipe.
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>None</dd>
</dl></div>
</dd>
</dl>
</dd>
<dt id="backtest.data.datapipe.DataPipeType"><code class="flex name class">
<span>class <span class="ident">DataPipeType</span></span>
<span>(</span><span>*args, **kwds)</span>
</code></dt>
<dd>
<div class="desc"><p>[Enum] - An enumeration representing the four types of pipes that can be used in the pipeline.</p>
<ul>
<li>FETCH: Fetch data from an external source (Web, DB, file, API, etc.).</li>
<li>PROCESS: Process and transform the data (Filter, transform, etc.).</li>
<li>CACHE: Cache the output of the pipeline to avoid repeating previous steps on each run.</li>
<li>COLLATE: Collate the output of two pipes (This is a special case, used to merge two pipelines).</li>
</ul></div>
<h3>Parent</h3>
<ul class="hlist">
<li>enum.Enum</li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="backtest.data.datapipe.DataPipeType.CACHE"><code class="name">var <span class="ident">CACHE</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtest.data.datapipe.DataPipeType.COLLATE"><code class="name">var <span class="ident">COLLATE</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtest.data.datapipe.DataPipeType.FETCH"><code class="name">var <span class="ident">FETCH</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtest.data.datapipe.DataPipeType.PROCESS"><code class="name">var <span class="ident">PROCESS</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
<dt id="backtest.data.datapipe.PipeOutput"><code class="flex name class">
<span>class <span class="ident">PipeOutput</span></span>
<span>(</span><span>value: ~T_, output_from: <a title="backtest.data.datapipe.DataPipe" href="datapipe.html#backtest.data.datapipe.DataPipe">DataPipe</a>, revalidate_action: Optional[ForwardRef('<a title="backtest.data.datapipe.RevalidateAction" href="datapipe.html#backtest.data.datapipe.RevalidateAction">RevalidateAction</a>')] = None, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>This class holds the output of a pipe and some metadata that are passed through out the pipeline.
This metadata is used for revalidation purpose.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>value</code></strong></dt>
<dd>The value</dd>
<dt><strong><code>output_from</code></strong></dt>
<dd>The output from the pipe</dd>
<dt><strong><code>revalidate_action</code></strong></dt>
<dd>The revalidate action</dd>
</dl>
<p>**kwargs:</p></div>
<h3>Parent</h3>
<ul class="hlist">
<li>typing.Generic</li>
</ul>
<h3>Instance variables</h3>
<dl>
<dt id="backtest.data.datapipe.PipeOutput.revalidate"><code class="name">var <span class="ident">revalidate</span></code></dt>
<dd>
<div class="desc"><p>Get the revalidate action of the pipe</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The revalidate action of the pipe</dd>
</dl></div>
</dd>
<dt id="backtest.data.datapipe.PipeOutput.value"><code class="name">var <span class="ident">value</span></code></dt>
<dd>
<div class="desc"><p>The output of the pipe</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The output value of the pipe</dd>
</dl></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="backtest.data.datapipe.PipeOutput.set_output_from"><code class="name flex">
<span>def <span class="ident">set_output_from</span></span>(<span>self, output_from: <a title="backtest.data.datapipe.DataPipe" href="datapipe.html#backtest.data.datapipe.DataPipe">DataPipe</a>)</span>
</code></dt>
<dd>
<div class="desc"><p>Set the output_from of the pipe.
Can be useful when a pip makes a copy of the output of another pipe.</p>
<h2 id="args">Args:</h2>
<p><strong><code>output_from</code></strong>: The pipe that generated the output
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>None</dd>
</dl></div>
</dd>
<dt id="backtest.data.datapipe.PipeOutput.set_revalidate"><code class="name flex">
<span>def <span class="ident">set_revalidate</span></span>(<span>self, action: <a title="backtest.data.datapipe.RevalidateAction" href="datapipe.html#backtest.data.datapipe.RevalidateAction">RevalidateAction</a>)</span>
</code></dt>
<dd>
<div class="desc"><p>Set the revalidate action of the pipe.</p>
<h2 id="args">Args:</h2>
<p><strong><code>action</code></strong>: The action to set
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>None</dd>
</dl></div>
</dd>
</dl>
</dd>
<dt id="backtest.data.datapipe.RevalidateAction"><code class="flex name class">
<span>class <span class="ident">RevalidateAction</span></span>
<span>(</span><span>*args, **kwds)</span>
</code></dt>
<dd>
<div class="desc"><p>The three possible revalidation action that a pipe can return.</p>
<ul>
<li>REVALIDATE: Revalidate the cache from the current position to the end of the pipeline</li>
<li>FULL_REVALIDATE: Revalidate the cache from the beginning to the end of the pipeline</li>
<li>NOOP: Do not revalidate the cache (The pipe will load from cache if it exists)</li>
</ul></div>
<h3>Parent</h3>
<ul class="hlist">
<li>enum.Enum</li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="backtest.data.datapipe.RevalidateAction.FULL_REVALIDATE"><code class="name">var <span class="ident">FULL_REVALIDATE</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtest.data.datapipe.RevalidateAction.NOOP"><code class="name">var <span class="ident">NOOP</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="backtest.data.datapipe.RevalidateAction.REVALIDATE"><code class="name">var <span class="ident">REVALIDATE</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
<dt id="backtest.data.pipes.Cache"><code class="flex name class">
<span>class <span class="ident">Cache</span></span>
<span>(</span><span>caching_cb: Callable[[datetime.datetime, datetime.datetime, ..., <a title="backtest.data.datapipe.PipeOutput" href="datapipe.html#backtest.data.datapipe.PipeOutput">PipeOutput</a>[Any], int, <a title="backtest.data.datapipe.DataPipe" href="datapipe.html#backtest.data.datapipe.DataPipe">DataPipe</a>, ...], None] = None, *, loading_cb: Callable[[int], <a title="backtest.data.datapipe.CacheObject" href="datapipe.html#backtest.data.datapipe.CacheObject">CacheObject</a>] = None, revalidate: Optional[datetime.datetime] = None, timeout: Optional[datetime.timedelta] = None, max_requests: Optional[int] = None, store: bool = True, revalidate_cb: Callable[[datetime.datetime, datetime.datetime, Tuple[Any, ...], <a title="backtest.data.datapipe.PipeOutput" href="datapipe.html#backtest.data.datapipe.PipeOutput">PipeOutput</a>[Any], dict[str, Any]], <a title="backtest.data.datapipe.RevalidateAction" href="datapipe.html#backtest.data.datapipe.RevalidateAction">RevalidateAction</a>] = None)</span>
</code></dt>
<dd>
<div class="desc"><p>Function decorator designed to make a Cache pipe out of a function.
The decorated function is expected to be the caching method.
When using this, it is recommended to pass a load
callback method to load the cache object from the storage.
The caching method should be able to store the cache
and load it from the storage.
The cache object should be a CacheObject instance.
It is also possible to pass a
revalidate callback method to define a dynamic revalidate action.
The revalidate action is a method that returns a
RevalidateAction enum value.
The revalidate action is used to determine if the cache should be revalidated or not.
If no revalidate method is passed, the default revalidate method check if the cache is expired given an expired
datetime, a timeout or a maximum number of requests.</p>
<h2 id="note">Note</h2>
<p><em>If timeout is None, max_requests is None and revalidate_cb is None, the cache will never be revalidated.</em>
<em>If the structure of the underlying pipe changes or the parameters of the underlying pipe changes, the whole
pipeline will be revalidated (full revalidation).
This means that every cache pipe will revalidate their cache,
not only the one that changed.</em></p>
<p>Examples:</p>
<pre><code class="language-python-repl">&gt;&gt;&gt; @Cache(loading_cb=JSON_load, store=True, timeout=timedelta(seconds=1))
... def MyCache(frm: datetime, to: datetime, *args, po: PipeOutput, pipe_id: int, revalidate: datetime,
...          timedelta, max_requests: int, n_requests: int, **kwargs):
...     value = {
...         &quot;data&quot;: po.value,
...         &quot;stored_dt&quot;: datetime.now().isoformat(),
...         &quot;revalidate&quot;: revalidate.isoformat(),
...         &quot;current_n_requests&quot;: n_requests,
...         &quot;timeout&quot;: timeout.total_seconds(),
...         &quot;max_requests&quot;: max_requests
...     }
...     if not os.path.exists(&quot;.cache&quot;):
...         os.mkdir(&quot;.cache&quot;)
...     with open(f&quot;.cache/{pipe_id}.json&quot;, &quot;w&quot;) as f:
...         json.dump(value, f)
&gt;&gt;&gt; # The cache pipe can also be used as is:
&gt;&gt;&gt; pipe = FetchN | Cache(timeout=timedelta(seconds=1))
</code></pre>
<h2 id="args">Args:</h2>
<p><strong><code>caching_cb</code></strong>: The callback that is called after the pipeline wrapped by the Cache pipe is executed.
It is used to store the cache.<br>
<strong><code>loading_cb</code></strong>: The callback used to load the cache from the disk.<br>
<strong><code>revalidate</code></strong>: The next datetime to revalidate the cache.<br>
<strong><code>timeout</code></strong>: A timedelta object representing the max age of the cache before revalidating it.
If it is oneday, the cache will be revalidated every day as opposed to the revalidate parameter, which revalidate only once.<br>
<strong><code>max_requests</code></strong>: The maximum number of request that hit the cache before revalidating it.<br>
<strong><code>store</code></strong>: Whether to store the cache on disk or keep it only in memory.<br>
<strong><code>revalidate_cb</code></strong>: A callback method that returns a RevalidateAction enum value.
It is used to determine ifthe cache should be revalidated or not. This callback can be provided for complex revalidation logic.
</p></div>
<h3>Parent</h3>
<ul class="hlist">
<li><a title="backtest.data.datapipe.DataPipe" href="datapipe.html#backtest.data.datapipe.DataPipe">DataPipe</a></li>
</ul>
</dd>
<dt id="backtest.data.pipes.Collate"><code class="flex name class">
<span>class <span class="ident">Collate</span></span>
<span>(</span><span>cb: Callable[[datetime.datetime, datetime.datetime, ..., <a title="backtest.data.datapipe.PipeOutput" href="datapipe.html#backtest.data.datapipe.PipeOutput">PipeOutput</a>[Any], <a title="backtest.data.datapipe.PipeOutput" href="datapipe.html#backtest.data.datapipe.PipeOutput">PipeOutput</a>, ...], Any])</span>
</code></dt>
<dd>
<div class="desc"><p>Function decorator designed to make a Collate pipe out of a function.
It is designed to collate data. The data can be combined, aggregated, concatenated, etc.
The pipe is named after the function name.</p>
<h2 id="args">Args:</h2>
<p><strong><code>cb</code></strong>: The collate callback method.
</p></div>
<h3>Parent</h3>
<ul class="hlist">
<li><a title="backtest.data.datapipe.DataPipe" href="datapipe.html#backtest.data.datapipe.DataPipe">DataPipe</a></li>
</ul>
</dd>
<dt id="backtest.data.pipes.Fetch"><code class="flex name class">
<span>class <span class="ident">Fetch</span></span>
<span>(</span><span>cb: Callable[[datetime.datetime, datetime.datetime, ..., Optional[<a title="backtest.data.datapipe.PipeOutput" href="datapipe.html#backtest.data.datapipe.PipeOutput">PipeOutput</a>[Any]], ...], Any])</span>
</code></dt>
<dd>
<div class="desc"><p>Function decorator designed to make a Fetch pipe out of a function.
It is designed to fetch data from a source. The source can be a database, a web API, a file, etc.
The pipe is named after the function name.</p>
<h2 id="args">Args:</h2>
<p><strong><code>cb</code></strong>: The fetch callback method.
</p></div>
<h3>Parent</h3>
<ul class="hlist">
<li><a title="backtest.data.datapipe.DataPipe" href="datapipe.html#backtest.data.datapipe.DataPipe">DataPipe</a></li>
</ul>
</dd>
<dt id="backtest.data.pipes.Process"><code class="flex name class">
<span>class <span class="ident">Process</span></span>
<span>(</span><span>cb: Callable[[datetime.datetime, datetime.datetime, ..., <a title="backtest.data.datapipe.PipeOutput" href="datapipe.html#backtest.data.datapipe.PipeOutput">PipeOutput</a>[Any], ...], Any])</span>
</code></dt>
<dd>
<div class="desc"><p>Function decorator designed to make a Process pipe out of a function.
It is designed to process data. The data can be transformed, cleaned, imputed, etc.
The pipe is named after the function name.</p>
<h2 id="args">Args:</h2>
<p><strong><code>cb</code></strong>: The process callback method.
</p></div>
<h3>Parent</h3>
<ul class="hlist">
<li><a title="backtest.data.datapipe.DataPipe" href="datapipe.html#backtest.data.datapipe.DataPipe">DataPipe</a></li>
</ul>
</dd>
<dt id="backtest.data.utils.FetchCharts"><code class="flex name class">
<span>class <span class="ident">FetchCharts</span></span>
<span>(</span><span>tickers=None, interval: str = '1d', progress: bool = False, throttle: float = 0.0, *args, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>This pipe will fetch the charts from Yahoo Finance.
It will fetch the charts for the specified tickers and
the specified interval.
The interval can be any interval supported by yfinance.
The data will be returned as a
dictionary of DataFrames where the keys are the tickers and the values are the DataFrames.
The columns of the
returned dataframes are the following: Open, High, Low, Close, Volume, Dividends, Stock Splits.
The index is named
"Date" for intervals of 1d and longer and "Datetime" for intervals shorter than 1d.
The index is a datetime index.
If the returned chart is empty, it will be returned as None.
Consider removing the None
charts in further
preprocessing steps.</p>
<h2 id="warning">Warning</h2>
<p>The returned index contains timezone information that might be inconsistent.
Consider removing them.</p>
<p><strong>IN: Optional[List[str]]:</strong> The list of tickers to fetch the charts for.
If provided, it will override the ticker
list passed during initialization.</p>
<p><strong>OUT: dict[str, Optional[pd.DataFrame]]</strong> where the values are the charts and the keys are the tickers</p>
<h2 id="args">Args:</h2>
<p><strong><code>T</code></strong>: The pipe type (Fetch, Process, Cache, Collate)<br>
<strong><code>name</code></strong>: The pipe name.
If None, the name of the class is used
</p></div>
<h3>Parent</h3>
<ul class="hlist">
<li><a title="backtest.data.datapipe.DataPipe" href="datapipe.html#backtest.data.datapipe.DataPipe">DataPipe</a></li>
</ul>
</dd>
<dt id="backtest.data.utils.JSONCache"><code class="flex name class">
<span>class <span class="ident">JSONCache</span></span>
<span>(</span><span>*, revalidate: Optional[datetime.datetime] = None, timeout: Optional[datetime.timedelta] = None, max_requests: Optional[int] = None, store: bool = True, revalidate_cb: Callable[[datetime.datetime, datetime.datetime, Tuple[Any, ...], <a title="backtest.data.datapipe.PipeOutput" href="datapipe.html#backtest.data.datapipe.PipeOutput">PipeOutput</a>, dict[str, Any]], <a title="backtest.data.datapipe.RevalidateAction" href="datapipe.html#backtest.data.datapipe.RevalidateAction">RevalidateAction</a>] = None, custom_types: Optional[dict[str, type]] = None)</span>
</code></dt>
<dd>
<div class="desc"><p>This pipe will cache the data as a JSON file instead of a pickle file.
This class uses an extended JSON encoder
and decoder to encode most datatypes.
However, the encoded version might be suboptimal.
To make objects
JSON serializable, you can add a <strong>tojson</strong> method that returns a JSONable dictionary to your object.
To make it
loadable, you can add a <strong>fromjson</strong> class method that takes a JSONable dictionary and returns an instance of your
object.</p>
<h2 id="args">Args:</h2>
<p><strong><code>revalidate</code></strong>: The datetime to revalidate the cache<br>
<strong><code>timeout</code></strong>: The timedelta at which the cache will expire and be revalidated periodically<br>
<strong><code>max_requests</code></strong>: The maximum number of request before revaidating the cache<br>
<strong><code>store</code></strong>: Whether to store on disk or only in memory<br>
<strong><code>revalidate_cb</code></strong>: A revalidate callback function to implement a custom revalidation mechanism<br>
<strong><code>custom_types</code></strong>: The custom types to add to the JSONEncoder and JSONDecoder to make them JSON serializableand loadable.
Every type that implemented the <strong>tojson</strong> and <strong>fromjson</strong> methods should be registered here.<class_name: class>
</p></div>
<h3>Parent</h3>
<ul class="hlist">
<li><a title="backtest.data.pipes.Cache" href="pipes.html#backtest.data.pipes.Cache">Cache</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="backtest.data.utils.JSONCache.cache"><code class="name flex">
<span>def <span class="ident">cache</span></span>(<span>self, frm: datetime.datetime, to: datetime.datetime, *args, po: <a title="backtest.data.datapipe.PipeOutput" href="datapipe.html#backtest.data.datapipe.PipeOutput">PipeOutput</a>[typing.Any], **kwargs) ‑> None</span>
</code></dt>
<dd>
<div class="desc"><p>This method is called to cache the data.
This emthod will cache the data to the json format, and save it
to the disk.
It will also save as pickle the automatically detected types.</p>
<h2 id="args">Args:</h2>
<p><strong><code>frm</code></strong>: Start Datetime<br>
<strong><code>to</code></strong>: End Datetime<br>
<strong><code>args</code></strong>: Any arguments passed to the pipeline<br>
<strong><code>po</code></strong>: The previous PipeOutput<br>
<strong><code>kwargs</code></strong>: Any keyword arguments passed to the pipeline
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>None</dd>
</dl></div>
</dd>
<dt id="backtest.data.utils.JSONCache.load"><code class="name flex">
<span>def <span class="ident">load</span></span>(<span>self) ‑> Optional[<a title="backtest.data.utils.JSONCacheObject" href="utils.html#backtest.data.utils.JSONCacheObject">JSONCacheObject</a>]</span>
</code></dt>
<dd>
<div class="desc"><p>This method is called to load the cache.
This method will load the cache from the disk, and return the
CacheObject.
If the cache is not found, it will return None.</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>JSONCacheObject if cache is found and None otherwise</dd>
</dl></div>
</dd>
</dl>
</dd>
</dl>
</section>
</div>
</article>
<nav id="sidebar">
<form>
<input id="lunr-search" name="q" placeholder="🔎 Search ..." aria-label="Search"
disabled minlength="2">
</form>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/tingle/0.15.3/tingle.min.css" integrity="sha512-j1u8eUJ4f23xPPxwOrLUPQaCD2dwzNqqmDDcWS4deWsMv2ohLqmXXuP3hU7g8TyzbMSakP/mMqoNBYWj8AEIFg==" crossorigin>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tingle/0.15.3/tingle.min.js" integrity="sha512-plGUER9JkeEWPPqQBE4sdLqBoQug5Ap+BCGMc7bJ8BXkm+VVj6QzkpBz5Yv2yPkkq+cqg9IpkBaGCas6uDbW8g==" crossorigin></script>
<style>
.modal-box iframe {
width: 100vw;
height: calc(100vh - 80px);
}
@media screen and (min-width: 700px) {
.modal-box iframe {
width: 70vw;
height: 80vh;
}
}
.modal-box .tingle-modal-box {width: auto;}
.modal-box .tingle-modal-box__content {padding: 0;}
</style>
<script>
const input = document.getElementById('lunr-search');
input.disabled = false;
input.form.addEventListener('submit', (ev) => {
ev.preventDefault();
const url = new URL(window.location);
url.searchParams.set('q', input.value);
history.replaceState({}, null, url.toString());
search(input.value);
});
const query = new URL(window.location).searchParams.get('q');
if (query)
search(query);
function search(query) {
const url = '../../doc-search.html#' + encodeURIComponent(query);
new tingle.modal({
cssClass: ['modal-box'],
onClose: () => {
const url = new URL(window.location);
url.searchParams.delete('q');
history.replaceState({}, null, url.toString());
setTimeout(() => input.focus(), 100);
}
}).setContent('<div class="embed-responsive embed-responsive-16by9"><iframe class="embed-responsive-item" src="' + url + '"></iframe></div>').open();
}
</script>
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Path</h3>
<ul>
<li><code><div><a title="backtest" href="../index.html">backtest</a>.<a title="backtest.data" href="#backtest.data">data</a></div></code></li>
</ul>
</li>
<li><h3><a href="#header-submodules">Sub-modules</a></h3>
<ul>
<li><code><a title="backtest.data.datapipe" href="datapipe.html">backtest.data.datapipe</a></code></li>
<li><code><a title="backtest.data.json_extension" href="json_extension.html">backtest.data.json_extension</a></code></li>
<li><code><a title="backtest.data.pipes" href="pipes.html">backtest.data.pipes</a></code></li>
<li><code><a title="backtest.data.utils" href="utils.html">backtest.data.utils</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="backtest.data.utils.CausalImpute" href="utils.html#backtest.data.utils.CausalImpute">CausalImpute</a></code></li>
<li><code><a title="backtest.data.utils.FilterNoneCharts" href="utils.html#backtest.data.utils.FilterNoneCharts">FilterNoneCharts</a></code></li>
<li><code><a title="backtest.data.utils.PadNan" href="utils.html#backtest.data.utils.PadNan">PadNan</a></code></li>
<li><code><a title="backtest.data.utils.ToTSData" href="utils.html#backtest.data.utils.ToTSData">ToTSData</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<div class="accordion" id="classes-accordion">
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.data.datapipe.CacheObject%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.data.datapipe.CacheObject%27%3E" onclick="navigateToUrl('datapipe.html#backtest.data.datapipe.CacheObject')">
<code>CacheObject</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.data.datapipe.CacheObject%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="">
<li><code><a title="backtest.data.datapipe.CacheObject.load" href="datapipe.html#backtest.data.datapipe.CacheObject.load">load</a></code></li>
<li><code><a title="backtest.data.datapipe.CacheObject.store" href="datapipe.html#backtest.data.datapipe.CacheObject.store">store</a></code></li>
</ul>
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.data.datapipe.DataPipe%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.data.datapipe.DataPipe%27%3E" onclick="navigateToUrl('datapipe.html#backtest.data.datapipe.DataPipe')">
<code>DataPipe</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.data.datapipe.DataPipe%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="two-column">
<li><code><a title="backtest.data.datapipe.DataPipe.Collate" href="datapipe.html#backtest.data.datapipe.DataPipe.Collate">Collate</a></code></li>
<li><code><a title="backtest.data.datapipe.DataPipe.cache" href="datapipe.html#backtest.data.datapipe.DataPipe.cache">cache</a></code></li>
<li><code><a title="backtest.data.datapipe.DataPipe.collate" href="datapipe.html#backtest.data.datapipe.DataPipe.collate">collate</a></code></li>
<li><code><a title="backtest.data.datapipe.DataPipe.fetch" href="datapipe.html#backtest.data.datapipe.DataPipe.fetch">fetch</a></code></li>
<li><code><a title="backtest.data.datapipe.DataPipe.get" href="datapipe.html#backtest.data.datapipe.DataPipe.get">get</a></code></li>
<li><code><a title="backtest.data.datapipe.DataPipe.hash" href="datapipe.html#backtest.data.datapipe.DataPipe.hash">hash</a></code></li>
<li><code><a title="backtest.data.datapipe.DataPipe.load" href="datapipe.html#backtest.data.datapipe.DataPipe.load">load</a></code></li>
<li><code><a title="backtest.data.datapipe.DataPipe.pipe_id" href="datapipe.html#backtest.data.datapipe.DataPipe.pipe_id">pipe_id</a></code></li>
<li><code><a title="backtest.data.datapipe.DataPipe.process" href="datapipe.html#backtest.data.datapipe.DataPipe.process">process</a></code></li>
<li><code><a title="backtest.data.datapipe.DataPipe.render" href="datapipe.html#backtest.data.datapipe.DataPipe.render">render</a></code></li>
<li><code><a title="backtest.data.datapipe.DataPipe.revalidate" href="datapipe.html#backtest.data.datapipe.DataPipe.revalidate">revalidate</a></code></li>
<li><code><a title="backtest.data.datapipe.DataPipe.set_id" href="datapipe.html#backtest.data.datapipe.DataPipe.set_id">set_id</a></code></li>
</ul>
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.data.datapipe.DataPipeType%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.data.datapipe.DataPipeType%27%3E" onclick="navigateToUrl('datapipe.html#backtest.data.datapipe.DataPipeType')">
<code>DataPipeType</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.data.datapipe.DataPipeType%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="">
<li><code><a title="backtest.data.datapipe.DataPipeType.CACHE" href="datapipe.html#backtest.data.datapipe.DataPipeType.CACHE">CACHE</a></code></li>
<li><code><a title="backtest.data.datapipe.DataPipeType.COLLATE" href="datapipe.html#backtest.data.datapipe.DataPipeType.COLLATE">COLLATE</a></code></li>
<li><code><a title="backtest.data.datapipe.DataPipeType.FETCH" href="datapipe.html#backtest.data.datapipe.DataPipeType.FETCH">FETCH</a></code></li>
<li><code><a title="backtest.data.datapipe.DataPipeType.PROCESS" href="datapipe.html#backtest.data.datapipe.DataPipeType.PROCESS">PROCESS</a></code></li>
</ul>
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.data.datapipe.PipeOutput%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.data.datapipe.PipeOutput%27%3E" onclick="navigateToUrl('datapipe.html#backtest.data.datapipe.PipeOutput')">
<code>PipeOutput</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.data.datapipe.PipeOutput%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="">
<li><code><a title="backtest.data.datapipe.PipeOutput.revalidate" href="datapipe.html#backtest.data.datapipe.PipeOutput.revalidate">revalidate</a></code></li>
<li><code><a title="backtest.data.datapipe.PipeOutput.set_output_from" href="datapipe.html#backtest.data.datapipe.PipeOutput.set_output_from">set_output_from</a></code></li>
<li><code><a title="backtest.data.datapipe.PipeOutput.set_revalidate" href="datapipe.html#backtest.data.datapipe.PipeOutput.set_revalidate">set_revalidate</a></code></li>
<li><code><a title="backtest.data.datapipe.PipeOutput.value" href="datapipe.html#backtest.data.datapipe.PipeOutput.value">value</a></code></li>
</ul>
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.data.datapipe.RevalidateAction%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.data.datapipe.RevalidateAction%27%3E" onclick="navigateToUrl('datapipe.html#backtest.data.datapipe.RevalidateAction')">
<code>RevalidateAction</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.data.datapipe.RevalidateAction%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="">
<li><code><a title="backtest.data.datapipe.RevalidateAction.FULL_REVALIDATE" href="datapipe.html#backtest.data.datapipe.RevalidateAction.FULL_REVALIDATE">FULL_REVALIDATE</a></code></li>
<li><code><a title="backtest.data.datapipe.RevalidateAction.NOOP" href="datapipe.html#backtest.data.datapipe.RevalidateAction.NOOP">NOOP</a></code></li>
<li><code><a title="backtest.data.datapipe.RevalidateAction.REVALIDATE" href="datapipe.html#backtest.data.datapipe.RevalidateAction.REVALIDATE">REVALIDATE</a></code></li>
</ul>
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.data.pipes.Cache%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.data.pipes.Cache%27%3E" onclick="navigateToUrl('pipes.html#backtest.data.pipes.Cache')">
<code>Cache</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.data.pipes.Cache%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.data.pipes.Collate%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.data.pipes.Collate%27%3E" onclick="navigateToUrl('pipes.html#backtest.data.pipes.Collate')">
<code>Collate</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.data.pipes.Collate%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.data.pipes.Fetch%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.data.pipes.Fetch%27%3E" onclick="navigateToUrl('pipes.html#backtest.data.pipes.Fetch')">
<code>Fetch</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.data.pipes.Fetch%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.data.pipes.Process%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.data.pipes.Process%27%3E" onclick="navigateToUrl('pipes.html#backtest.data.pipes.Process')">
<code>Process</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.data.pipes.Process%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.data.utils.FetchCharts%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.data.utils.FetchCharts%27%3E" onclick="navigateToUrl('utils.html#backtest.data.utils.FetchCharts')">
<code>FetchCharts</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.data.utils.FetchCharts%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
</div>
</div>
</div>
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.data.utils.JSONCache%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.data.utils.JSONCache%27%3E" onclick="navigateToUrl('utils.html#backtest.data.utils.JSONCache')">
<code>JSONCache</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.data.utils.JSONCache%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="">
<li><code><a title="backtest.data.utils.JSONCache.cache" href="utils.html#backtest.data.utils.JSONCache.cache">cache</a></code></li>
<li><code><a title="backtest.data.utils.JSONCache.load" href="utils.html#backtest.data.utils.JSONCache.load">load</a></code></li>
</ul>
</div>
</div>
</div>
</div>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<div id="footer_container">
<p><b>Author</b>: Anthony Lavertu (2024)</p>
<p><b>Generated by</b> <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</div>
</footer>
</body>
</html>
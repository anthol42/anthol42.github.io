<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<link rel="icon" type="image/x-icon" href="/backtestpro/assets/favicon.ico">
<link href='/backtestpro/assets/bootstrap.min.css' rel='stylesheet', type='text/css'>
<link href="/backtestpro/assets/style.css" rel="stylesheet" type="text/css">
<script src="/backtestpro/assets/bootstrap.min.js"></script>
<script>
function navigateToUrl(url) {
// Navigate to the URL
window.location.href = url;
}
</script>
<title>backtest.indicators.indicator API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}#lunr-search{width:100%;font-size:1em;padding:6px 9px 5px 9px;border:1px solid silver}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right;margin-top:4em}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){.module-list{min-height:100vh}#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:80px}.content-container{min-height:100vh}#content{width:70%;max-width:100ch;padding:3em 4em;margin-top:20px;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<nav class="navbar navbar-light navbar-expand bg-light fixed-top shadow-sm" id="navbar-main">
<div class="navbar-container" style="padding-left: 20px">
<a class="navbar-brand logo" href="/backtestpro">
<img alt="Logo image" class="logo__image only-light" src="/backtestpro/assets/logo_light.svg">
</a>
<div class="col-lg-9 navbar">
<div class="mr-auto" id="navbar-center">
<div class="navbar-center-item">
<ul class="navbar-nav" id="navbar-main-elements">
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="/backtestpro">
Home
</a>
</li>
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="/backtestpro/get_started.html">
Get Started
</a>
</li>
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link" href="/backtestpro/tutorials">
Tutorials
</a>
</li>
<li class="toctree-l1 nav-item">
<a class="reference internal nav-link active" href="/backtestpro/docs/backtest">
Documentation
</a>
</li>
<li class="nav-item">
<a class="nav-link nav-external" href="/backtestpro/about.html">About</a>
</li>
</ul>
</div>
</div>
<div id="navbar-end">
<div class="navbar-end-item">
<code class="navbar-version">v0.0.1</code>
</div>
<div class="navbar-end-item">
<ul aria-label="Icon Links" class="navbar-nav" id="navbar-icon-links">
<li class="nav-item">
<a class="nav-link" href="https://github.com/anthol42/backtestPro" rel="noopener" target="_blank"
title="GitHub"><img alt="GitHub" class="icon-link" src="/backtestpro/assets/github-mark.svg"
style="height: 1.2em; margin: 0px; padding: 0px;"></a>
</li>
</ul>
</div>
</div>
</div>
</div>
</nav>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>indicators</code></h1>
</header>
<div class="content-container">
<section id="section-intro">
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="backtest.indicators.indicator.Indicator"><code class="flex name class">
<span>class <span class="ident">Indicator</span></span>
<span>(</span><span>out_feat: List[str], numba: bool = False, name: Optional[str] = None, **expected_params: type)</span>
</code></dt>
<dd>
<div class="desc"><p>This class is a decorator designed to make an Indicator out of a function.</p>
<h2 id="example">Example</h2>
<pre><code class="language-python-repl">&gt;&gt;&gt; @Indicator(out_feat=[&quot;SMA&quot;], period=int)
... def SMA(data: np.ndarray, index: List[str], features: List[str],
...     previous_data: Optional[npt.NDArray[np.float32]], period: int = 10) -&gt; np.ndarray:
...
...     out = np.zeros(len(data), dtype=np.float32)
...     for i in range(len(data) - period + 1):
...         out[i] = data[i: i+period, 0].sum() / period
...     return out[:, np.newaxis]
&gt;&gt;&gt; # Usage
&gt;&gt;&gt; series = pd.DataFrame(np.random.rand(1000), index=pd.date_range(start=&quot;2021-01-01&quot;, periods=1000, freq=&quot;min&quot;), columns=[&quot;Close&quot;])
&gt;&gt;&gt; indicator_10d = SMA()
&gt;&gt;&gt; indicator_20d = SMA(period=20)
&gt;&gt;&gt; out_10d = indicator_10d.get(series)
&gt;&gt;&gt; out_20d = indicator_20d.get(series)
</code></pre>
<p>The indicator function receives the data as a 2D numpy array, the index as a list of datetimes (or string if jit
compiled), the features as a list of strings, and any parameters set by the user.
The function must return a 2D
numpy array with the same length as the input data.</p>
<h2 id="args">Args:</h2>
<p><strong><code>out_feat</code></strong>: The features name that this indicator will return.
(Will be the column name in resulting df)<br>
<strong><code>numba</code></strong>: Whether the function uses numba JIT compilation or not.
If True, the index passed to the
indicator logic will be a list of strings, otherwise a list of datetime objects.<br>
<strong><code>name</code></strong>: The name of the indicator.
If not set, the name of the function will be used.<br>
<strong><code>expected_params</code></strong>: The expected parameters of the indicator.
Used to validate the parameters passed to the
indicator.
</p></div>
<h3>Static methods</h3>
<dl>
<dt id="backtest.indicators.indicator.Indicator.run"><code class="name flex">
<span>def <span class="ident">run</span></span>(<span>data: numpy.ndarray[typing.Any, numpy.dtype[numpy.float32]], index: Union[List[datetime.datetime], List[str]], features: List[str], previous_data: Optional[numpy.ndarray[typing.Any, numpy.dtype[numpy.float32]]] = None, **params) ‑> numpy.ndarray[typing.Any, numpy.dtype[numpy.float32]]</span>
</code></dt>
<dd>
<div class="desc"><p>This method can be overridden to implement the indicator logic.
This method is called when the callback method
is not set.</p>
<h2 id="args">Args:</h2>
<p><strong><code>data</code></strong>: The input data as a 2d numpy array.<br>
<strong><code>index</code></strong>: The index of the input data.
(datetime if not compiled with numba or string if compiled<br>
<strong><code>features</code></strong>: The features of the input data<br>
<strong><code>previous_data</code></strong>: An array of the previous indicator results.
The recent points in the array will be nan.
These are the values to fill.
This parameter is useful when streaming the indicator
(more compute efficient, but not all indicators support it.)<br>
<strong><code>params</code></strong>: Any parameters set by the user
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>A 2D array with the indicator results.
Must be the same length as the input data.</dd>
</dl></div>
</dd>
</dl>
<h3>Instance variables</h3>
<dl>
<dt id="backtest.indicators.indicator.Indicator.name"><code class="name">var <span class="ident">name</span> : str</code></dt>
<dd>
<div class="desc"><h2 id="returns">Returns:</h2>
<dl>
<dd>A unique name for the indicator.
(The name of the function and its identifier if different from 0)</dd>
</dl></div>
</dd>
<dt id="backtest.indicators.indicator.Indicator.out"><code class="name">var <span class="ident">out</span> : List[str]</code></dt>
<dd>
<div class="desc"><h2 id="returns">Returns:</h2>
<dl>
<dd>The output features of the indicator</dd>
</dl></div>
</dd>
<dt id="backtest.indicators.indicator.Indicator.type_name"><code class="name">var <span class="ident">type_name</span> : str</code></dt>
<dd>
<div class="desc"><h2 id="returns">Returns:</h2>
<dl>
<dd>The name of the indicator type</dd>
</dl></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="backtest.indicators.indicator.Indicator.get"><code class="name flex">
<span>def <span class="ident">get</span></span>(<span>self, data: pandas.core.frame.DataFrame, previous_values: Optional[pandas.core.frame.DataFrame]) ‑> pandas.core.frame.DataFrame</span>
</code></dt>
<dd>
<div class="desc"><p>Run the indicator logic on the data and returns the result as a DataFrame.</p>
<h2 id="args">Args:</h2>
<p><strong><code>data</code></strong>: The input dataframe with a datetime index.
(Usually the chart)<br>
<strong><code>previous_values</code></strong>: The previous values of the indicator.
(Used when streaming the indicator)
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>The indicator results as a dataframe</dd>
</dl></div>
</dd>
<dt id="backtest.indicators.indicator.Indicator.get_args"><code class="name flex">
<span>def <span class="ident">get_args</span></span>(<span>self) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><h2 id="returns">Returns:</h2>
<dl>
<dd>The arguments of the indicator as a string</dd>
</dl></div>
</dd>
<dt id="backtest.indicators.indicator.Indicator.get_name_no_id"><code class="name flex">
<span>def <span class="ident">get_name_no_id</span></span>(<span>self) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><h2 id="returns">Returns:</h2>
<dl>
<dd>The name of the indicator without the identifier</dd>
</dl></div>
</dd>
<dt id="backtest.indicators.indicator.Indicator.set_callback"><code class="name flex">
<span>def <span class="ident">set_callback</span></span>(<span>self, cb: Callable[[numpy.ndarray[Any, numpy.dtype[numpy.float32]], Union[List[datetime.datetime], List[str]], List[str], Optional[numpy.ndarray[Any, numpy.dtype[numpy.float32]]], ...], numpy.ndarray[Any, numpy.dtype[numpy.float32]]]) ‑> None</span>
</code></dt>
<dd>
<div class="desc"><p>Set the callback method to be used when the indicator is called.</p>
<h2 id="args">Args:</h2>
<p><strong><code>cb</code></strong>: The indicator logic
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>None</dd>
</dl></div>
</dd>
<dt id="backtest.indicators.indicator.Indicator.set_id"><code class="name flex">
<span>def <span class="ident">set_id</span></span>(<span>self, new: int)</span>
</code></dt>
<dd>
<div class="desc"><p>Set the identifier of the indicator.
Used to identify the indicator in the indicator set when there are multiple
indicators with the same name.</p>
<h2 id="args">Args:</h2>
<p><strong><code>new</code></strong>: The new id
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>None</dd>
</dl></div>
</dd>
<dt id="backtest.indicators.indicator.Indicator.set_params"><code class="name flex">
<span>def <span class="ident">set_params</span></span>(<span>self, **params: Any) ‑> None</span>
</code></dt>
<dd>
<div class="desc"><p>Set the parameters of the indicator.</p>
<h2 id="args">Args:</h2>
<p><strong><code>params</code></strong>: The parameters set by the user
</p>
<h2 id="returns">Returns:</h2>
<dl>
<dd>None</dd>
</dl></div>
</dd>
</dl>
</dd>
</dl>
</section>
</div>
</article>
<nav id="sidebar">
<form>
<input id="lunr-search" name="q" placeholder="🔎 Search ..." aria-label="Search"
disabled minlength="2">
</form>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/tingle/0.15.3/tingle.min.css" integrity="sha512-j1u8eUJ4f23xPPxwOrLUPQaCD2dwzNqqmDDcWS4deWsMv2ohLqmXXuP3hU7g8TyzbMSakP/mMqoNBYWj8AEIFg==" crossorigin>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tingle/0.15.3/tingle.min.js" integrity="sha512-plGUER9JkeEWPPqQBE4sdLqBoQug5Ap+BCGMc7bJ8BXkm+VVj6QzkpBz5Yv2yPkkq+cqg9IpkBaGCas6uDbW8g==" crossorigin></script>
<style>
.modal-box iframe {
width: 100vw;
height: calc(100vh - 80px);
}
@media screen and (min-width: 700px) {
.modal-box iframe {
width: 70vw;
height: 80vh;
}
}
.modal-box .tingle-modal-box {width: auto;}
.modal-box .tingle-modal-box__content {padding: 0;}
</style>
<script>
const input = document.getElementById('lunr-search');
input.disabled = false;
input.form.addEventListener('submit', (ev) => {
ev.preventDefault();
const url = new URL(window.location);
url.searchParams.set('q', input.value);
history.replaceState({}, null, url.toString());
search(input.value);
});
const query = new URL(window.location).searchParams.get('q');
if (query)
search(query);
function search(query) {
const url = '../../doc-search.html#' + encodeURIComponent(query);
new tingle.modal({
cssClass: ['modal-box'],
onClose: () => {
const url = new URL(window.location);
url.searchParams.delete('q');
history.replaceState({}, null, url.toString());
setTimeout(() => input.focus(), 100);
}
}).setContent('<div class="embed-responsive embed-responsive-16by9"><iframe class="embed-responsive-item" src="' + url + '"></iframe></div>').open();
}
</script>
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Path</h3>
<ul>
<li><code><div><a title="backtest" href="../index.html">backtest</a>.<a title="backtest.indicators" href="index.html">indicators</a>.<a title="backtest.indicators.indicator" href="#backtest.indicators.indicator">indicator</a></div></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<div class="accordion" id="classes-accordion">
<div class="accordion-item">
<h4 class="accordion-header">
<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_%3CClass+%27backtest.indicators.indicator.Indicator%27%3E" aria-expanded="false" aria-controls="collapse_%3CClass+%27backtest.indicators.indicator.Indicator%27%3E" onclick="navigateToUrl('#backtest.indicators.indicator.Indicator')">
<code>Indicator</code>
</button>
</h4>
<div id="collapse_%3CClass+%27backtest.indicators.indicator.Indicator%27%3E" class="accordion-collapse collapse" data-bs-parent="#classes-accordion">
<div class="accordion-body">
<ul class="two-column">
<li><code><a title="backtest.indicators.indicator.Indicator.get" href="#backtest.indicators.indicator.Indicator.get">get</a></code></li>
<li><code><a title="backtest.indicators.indicator.Indicator.get_args" href="#backtest.indicators.indicator.Indicator.get_args">get_args</a></code></li>
<li><code><a title="backtest.indicators.indicator.Indicator.get_name_no_id" href="#backtest.indicators.indicator.Indicator.get_name_no_id">get_name_no_id</a></code></li>
<li><code><a title="backtest.indicators.indicator.Indicator.name" href="#backtest.indicators.indicator.Indicator.name">name</a></code></li>
<li><code><a title="backtest.indicators.indicator.Indicator.out" href="#backtest.indicators.indicator.Indicator.out">out</a></code></li>
<li><code><a title="backtest.indicators.indicator.Indicator.run" href="#backtest.indicators.indicator.Indicator.run">run</a></code></li>
<li><code><a title="backtest.indicators.indicator.Indicator.set_callback" href="#backtest.indicators.indicator.Indicator.set_callback">set_callback</a></code></li>
<li><code><a title="backtest.indicators.indicator.Indicator.set_id" href="#backtest.indicators.indicator.Indicator.set_id">set_id</a></code></li>
<li><code><a title="backtest.indicators.indicator.Indicator.set_params" href="#backtest.indicators.indicator.Indicator.set_params">set_params</a></code></li>
<li><code><a title="backtest.indicators.indicator.Indicator.type_name" href="#backtest.indicators.indicator.Indicator.type_name">type_name</a></code></li>
</ul>
</div>
</div>
</div>
</div>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<div id="footer_container">
<p><b>Author</b>: Anthony Lavertu (2024)</p>
<p><b>Generated by</b> <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</div>
</footer>
</body>
</html>